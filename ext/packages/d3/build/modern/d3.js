(function(b,a){typeof exports==='object'&&typeof module!=='undefined'?a(exports):typeof define==='function'&&define.amd?define(['exports'],a):(a((b.d3=b.d3||{})))}(this,(function(a){'use strict';var jl="4.7.4";var al=function(b,c){return b<c?-1:b>c?1:b>=c?0:NaN};var cL=function(b){if(b.length===1){b=ascendingComparator(b)}return {left:function(f,g,c,d){if(c==null){c=0}if(d==null){d=f.length}while(c<d){var e=c+d>>>1;if(b(f[e],g)<0){c=e+1}else {d=e}}return c},right:function(f,g,c,d){if(c==null){c=0}if(d==null){d=f.length}while(c<d){var e=c+d>>>1;if(b(f[e],g)>0){d=e}else {c=e+1}}return c}}};function ascendingComparator(b){return function(c,d){return al(b(c),d)}}var dL=cL(al);var ai=dL.right;var hB=dL.left;var jW=function(b,c){if(c==null){c=pair}var d=0,e=b.length-1,g=b[0],f=new Array(e<0?0:e);while(d<e)f[d]=c(g,g=b[++d]);return f};function pair(b,c){return [b,c]}var jP=function(i,j,e){var f=i.length,g=j.length,k=new Array(f*g),b,c,d,h;if(e==null){e=pair}for(b=d=0;b<f;++b)for(h=i[b],c=0;c<g;++c,++d)k[d]=e(h,j[c]);return k};var hJ=function(b,c){return c<b?-1:c>b?1:c>=b?0:NaN};var ac=function(b){return b===null?NaN:+b};var eM=function(f,i){var j=f.length,d=0,b,c,h=0,e=-1,g=0;if(i==null){while(++e<j){if(!isNaN(b=ac(f[e]))){c=b-d;d+=c/++g;h+=c*(b-d)}}}else {while(++e<j){if(!isNaN(b=ac(i(f[e],e,f)))){c=b-d;d+=c/++g;h+=c*(b-d)}}}if(g>1){return h/(g-1)}};var ep=function(c,d){var b=eM(c,d);return b?Math.sqrt(b):b};var e9=function(d,h){var c=-1,g=d.length,e,b,f;if(h==null){while(++c<g)if((b=d[c])!=null&&b>=b){e=f=b;break}while(++c<g)if((b=d[c])!=null){if(e>b){e=b}if(f<b){f=b}}}else {while(++c<g)if((b=h(d[c],c,d))!=null&&b>=b){e=f=b;break}while(++c<g)if((b=h(d[c],c,d))!=null){if(e>b){e=b}if(f<b){f=b}}}return [e,f]};var fi=Array.prototype;var jY=fi.slice;var kl=fi.map;var bF=function(b){return function(){return b}};var iD=function(b){return b};var N=function(b,d,c){b=+b,d=+d,c=(e=arguments.length)<2?(d=b,b=0,1):e<3?1:+c;var f=-1,e=Math.max(0,Math.ceil((d-b)/c))|0,g=new Array(e);while(++f<e){g[f]=b+f*c}return g};var kk=Math.sqrt(50);var kD=Math.sqrt(10);var kC=Math.sqrt(2);var bU=function(c,d,e){var b=tickStep(c,d,e);return N(Math.ceil(c/b)*b,Math.floor(d/b)*b+b/2,b)};function tickStep(d,f,g){var e=Math.abs(f-d)/Math.max(0,g),b=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),c=e/b;if(c>=kk){b*=10}else if(c>=kD){b*=5}else if(c>=kC){b*=2}return f<d?-b:b}var e4=function(b){return Math.ceil(Math.log(b.length)/Math.LN2)+1};var h7=function(){var d=iD,c=e9,b=e4;function histogram(k){var e,o=k.length,l,j=new Array(o);for(e=0;e<o;++e){j[e]=d(k[e],e,k)}var p=c(j),h=p[0],i=p[1],f=b(j,h,i);if(!Array.isArray(f)){f=bU(h,i,f)}var g=f.length;while(f[0]<=h)f.shift(),--g;while(f[g-1]>=i)f.pop(),--g;var m=new Array(g+1),n;for(e=0;e<=g;++e){n=m[e]=[];n.x0=e>0?f[e-1]:h;n.x1=e<g?f[e]:i}for(e=0;e<o;++e){l=j[e];if(h<=l&&l<=i){m[ai(f,l,0,g)].push(k[e])}}return m}histogram.value=function(b){return arguments.length?(d=typeof b==="function"?b:bF(b),histogram):d};histogram.domain=function(b){return arguments.length?(c=typeof b==="function"?b:bF([b[0],b[1]]),histogram):c};histogram.thresholds=function(c){return arguments.length?(b=typeof c==="function"?c:Array.isArray(c)?bF(jY.call(c)):bF(c),histogram):b};return histogram};var a0=function(b,f,c){if(c==null){c=ac}if(!(e=b.length)){return}if((f=+f)<=0||e<2){return +c(b[0],0,b)}if(f>=1){return +c(b[e-1],e-1,b)}var e,h=(e-1)*f,d=Math.floor(h),g=+c(b[d],d,b),i=+c(b[d+1],d+1,b);return g+(i-g)*(h-d)};var ge=function(b,d,c){b=kl.call(b,ac).sort(al);return Math.ceil((c-d)/(2*(a0(b,0.75)-a0(b,0.25))*Math.pow(b.length,-1/3)))};var jX=function(b,d,c){return Math.ceil((c-d)/(3.5*ep(b)*Math.pow(b.length,-1/3)))};var km=function(d,g){var c=-1,f=d.length,e,b;if(g==null){while(++c<f)if((b=d[c])!=null&&b>=b){e=b;break}while(++c<f)if((b=d[c])!=null&&b>e){e=b}}else {while(++c<f)if((b=g(d[c],c,d))!=null&&b>=b){e=b;break}while(++c<f)if((b=g(d[c],c,d))!=null&&b>e){e=b}}return e};var j9=function(c,h){var g=0,f=c.length,d,b=-1,e=f;if(h==null){while(++b<f)if(!isNaN(d=ac(c[b]))){g+=d}else {--e}}else {while(++b<f)if(!isNaN(d=ac(h(c[b],b,c)))){g+=d}else {--e}}if(e){return g/e}};var jw=function(c,f){var e=[],g=c.length,d,b=-1;if(f==null){while(++b<g)if(!isNaN(d=ac(c[b]))){e.push(d)}}else {while(++b<g)if(!isNaN(d=ac(f(c[b],b,c)))){e.push(d)}}return a0(e.sort(al),0.5)};var c4=function(b){var g=b.length,f,h=-1,e=0,c,d;while(++h<g)e+=b[h].length;c=new Array(e);while(--g>=0){d=b[g];f=d.length;while(--f>=0){c[--e]=d[f]}}return c};var fF=function(d,g){var c=-1,f=d.length,e,b;if(g==null){while(++c<f)if((b=d[c])!=null&&b>=b){e=b;break}while(++c<f)if((b=d[c])!=null&&e>b){e=b}}else {while(++c<f)if((b=g(d[c],c,d))!=null&&b>=b){e=b;break}while(++c<f)if((b=g(d[c],c,d))!=null&&e>b){e=b}}return e};var i8=function(e,d){var b=d.length,c=new Array(b);while(b--)c[b]=e[d[b]];return c};var kc=function(d,c){if(!(h=d.length)){return}var e=0,h,f=0,g,b=d[f];if(!c){c=al}while(++e<h)if(c(g=d[e],b)<0||c(b,b)!==0){b=g,f=e}if(c(b,b)===0){return f}};var jc=function(c,b,f){var d=(f==null?c.length:f)-(b=b==null?0:+b),g,e;while(d){e=Math.random()*d--|0;g=c[d+b];c[d+b]=c[e+b];c[e+b]=g}return c};var ko=function(c,f){var e=0,g=c.length,d,b=-1;if(f==null){while(++b<g)if(d=+c[b]){e+=d}}else {while(++b<g)if(d=+f(c[b],b,c)){e+=d}}return e};var ev=function(b){if(!(e=b.length)){return []}for(var c=-1,g=fF(b,length),f=new Array(g);++c<g;){for(var d=-1,e,h=f[c]=new Array(e);++d<e;){h[d]=b[d][c]}}return f};function length(b){return b.length}var ks=function(){return ev(arguments)};var cX=Array.prototype.slice;var ee=function(b){return b};var b2=1;var bT=2;var c$=3;var bf=4;var eZ=1.0E-6;function translateX(b){return "translate("+b+",0)"}function translateY(b){return "translate(0,"+b+")"}function center(c){var b=c.bandwidth()/2;if(c.round()){b=Math.round(b)}return function(d){return c(d)+b}}function entering(){return !this.__axis}function axis(c,b){var h=[],i=null,j=null,e=6,f=6,k=3,d=c===b2||c===bf?-1:1,g,m=c===bf||c===bT?(g="x","y"):(g="y","x"),l=c===b2||c===c$?translateX:translateY;function axis(n){var B=i==null?(b.ticks?b.ticks.apply(b,h):b.domain()):i,A=j==null?(b.tickFormat?b.tickFormat.apply(b,h):ee):j,x=Math.max(e,0)+k,w=b.range(),y=w[0]+0.5,z=w[w.length-1]+0.5,u=(b.bandwidth?center:ee)(b.copy()),q=n.selection?n.selection():n,p=q.selectAll(".domain").data([null]),o=q.selectAll(".tick").data(B,b).order(),v=o.exit(),t=o.enter().append("g").attr("class","tick"),r=o.select("line"),s=o.select("text");p=p.merge(p.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000"));o=o.merge(t);r=r.merge(t.append("line").attr("stroke","#000").attr(g+"2",d*e).attr(m+"1",0.5).attr(m+"2",0.5));s=s.merge(t.append("text").attr("fill","#000").attr(g,d*x).attr(m,0.5).attr("dy",c===b2?"0em":c===c$?"0.71em":"0.32em"));if(n!==q){p=p.transition(n);o=o.transition(n);r=r.transition(n);s=s.transition(n);v=v.transition(n).attr("opacity",eZ).attr("transform",function(d){return isFinite(d=u(d))?l(d):this.getAttribute("transform")});t.attr("opacity",eZ).attr("transform",function(e){var d=this.parentNode.__axis;return l(d&&isFinite(d=d(e))?d:u(e))})}v.remove();p.attr("d",c===bf||c==bT?"M"+d*f+","+y+"H0.5V"+z+"H"+d*f:"M"+y+","+d*f+"V0.5H"+z+"V"+d*f);o.attr("opacity",1).attr("transform",function(d){return l(u(d))});r.attr(g+"2",d*e);s.attr(g,d*x).text(A);q.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",c===bT?"start":c===bf?"end":"middle");q.each(function(){this.__axis=u})}axis.scale=function(d){return arguments.length?(b=d,axis):b};axis.ticks=function(){return h=cX.call(arguments),axis};axis.tickArguments=function(d){return arguments.length?(h=d==null?[]:cX.call(d),axis):h.slice()};axis.tickValues=function(d){return arguments.length?(i=d==null?null:cX.call(d),axis):i&&i.slice()};axis.tickFormat=function(d){return arguments.length?(j=d,axis):j};axis.tickSize=function(d){return arguments.length?(e=f=+d,axis):e};axis.tickSizeInner=function(d){return arguments.length?(e=+d,axis):e};axis.tickSizeOuter=function(d){return arguments.length?(f=+d,axis):f};axis.tickPadding=function(d){return arguments.length?(k=+d,axis):k};return axis}function axisTop(b){return axis(b2,b)}function axisRight(b){return axis(bT,b)}function axisBottom(b){return axis(c$,b)}function axisLeft(b){return axis(bf,b)}var kb={value:function(){}};function dispatch(){for(var d=0,e=arguments.length,c={},b;d<e;++d){if(!(b=arguments[d]+"")||(b in c)){throw new Error("illegal type: "+b)}c[b]=[]}return new Dispatch(c)}function Dispatch(b){this._=b}function parseTypenames(b,c){return b.trim().split(/^|\s+/).map(function(d){var f="",e=d.indexOf(".");if(e>=0){f=d.slice(e+1),d=d.slice(0,e)}if(d&&!c.hasOwnProperty(d)){throw new Error("unknown type: "+d)}return {type:d,name:f}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(d,e){var c=this._,g=parseTypenames(d+"",c),b,f=-1,h=g.length;if(arguments.length<2){while(++f<h)if((b=(d=g[f]).type)&&(b=get(c[b],d.name))){return b}return}if(e!=null&&typeof e!=="function"){throw new Error("invalid callback: "+e)}while(++f<h){if(b=(d=g[f]).type){c[b]=set(c[b],d.name,e)}else if(e==null){for(b in c)c[b]=set(c[b],d.name,null)}}return this},copy:function(){var b={},c=this._;for(var d in c)b[d]=c[d].slice();return new Dispatch(b)},call:function(d,g){if((c=arguments.length-2)>0){for(var f=new Array(c),b=0,c,e;b<c;++b)f[b]=arguments[b+2]}if(!this._.hasOwnProperty(d)){throw new Error("unknown type: "+d)}for(e=this._[d],b=0,c=e.length;b<c;++b)e[b].value.apply(g,f)},apply:function(b,f,e){if(!this._.hasOwnProperty(b)){throw new Error("unknown type: "+b)}for(var d=this._[b],c=0,g=d.length;c<g;++c)d[c].value.apply(f,e)}};function get(c,e){for(var b=0,f=c.length,d;b<f;++b){if((d=c[b]).name===e){return d.value}}}function set(b,e,d){for(var c=0,f=b.length;c<f;++c){if(b[c].name===e){b[c]=kb,b=b.slice(0,c).concat(b.slice(c+1));break}}if(d!=null){b.push({name:e,value:d})}return b}var db="http://www.w3.org/1999/xhtml";var cz={svg:"http://www.w3.org/2000/svg",xhtml:db,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var a$=function(b){var c=b+="",d=c.indexOf(":");if(d>=0&&(c=b.slice(0,d))!=="xmlns"){b=b.slice(d+1)}return cz.hasOwnProperty(c)?{space:cz[c],local:b}:b};function creatorInherit(b){return function(){var c=this.ownerDocument,d=this.namespaceURI;return d===db&&c.documentElement.namespaceURI===db?c.createElement(b):c.createElementNS(d,b)}}function creatorFixed(b){return function(){return this.ownerDocument.createElementNS(b.space,b.local)}}var cS=function(c){var b=a$(c);return (b.local?creatorFixed:creatorInherit)(b)};var jy=0;function local$1(){return new Local()}function Local(){this._="@"+(++jy).toString(36)}Local.prototype=local$1.prototype={constructor:Local,get:function(b){var c=this._;while(!(c in b))if(!(b=b.parentNode)){return}return b[c]},set:function(c,b){return c[this._]=b},remove:function(b){return this._ in b&&delete b[this._]},toString:function(){return this._}};var e$=function(b){return function(){return this.matches(b)}};if(typeof document!=="undefined"){var a9=document.documentElement;if(!a9.matches){var g8=a9.webkitMatchesSelector||a9.msMatchesSelector||a9.mozMatchesSelector||a9.oMatchesSelector;e$=function(b){return function(){return g8.call(this,b)}}}}var cG=e$;var dX={};a.event=null;if(typeof document!=="undefined"){var h5=document.documentElement;if(!("onmouseenter" in h5)){dX={mouseenter:"mouseover",mouseleave:"mouseout"}}}function filterContextListener(b,d,c){b=contextListener(b,d,c);return function(f){var e=f.relatedTarget;if(!e||(e!==this&&!(e.compareDocumentPosition(this)&8))){b.call(this,f)}}}function contextListener(b,d,c){return function(f){var e=a.event;a.event=f;try{b.call(this,this.__data__,d,c)}finally{a.event=e}}}function parseTypenames$1(b){return b.trim().split(/^|\s+/).map(function(c){var e="",d=c.indexOf(".");if(d>=0){e=c.slice(d+1),c=c.slice(0,d)}return {type:c,name:e}})}function onRemove(b){return function(){var d=this.__on;if(!d){return}for(var f=0,e=-1,g=d.length,c;f<g;++f){if(c=d[f],(!b.type||c.type===b.type)&&c.name===b.name){this.removeEventListener(c.type,c.listener,c.capture)}else {d[++e]=c}}if(++e){d.length=e}else {delete this.__on}}}function onAdd(b,d,c){var e=dX.hasOwnProperty(b.type)?filterContextListener:contextListener;return function(m,k,j){var g=this.__on,f,h=e(d,k,j);if(g){for(var i=0,l=g.length;i<l;++i){if((f=g[i]).type===b.type&&f.name===b.name){this.removeEventListener(f.type,f.listener,f.capture);this.addEventListener(f.type,f.listener=h,f.capture=c);f.value=d;return}}}this.addEventListener(b.type,h,c);f={type:b.type,name:b.name,value:d,listener:h,capture:c};if(!g){this.__on=[f]}else {g.push(f)}}}var hm=function(k,h,f){var e=parseTypenames$1(k+""),b,i=e.length,j;if(arguments.length<2){var c=this.node().__on;if(c){for(var g=0,l=c.length,d;g<l;++g){for(b=0,d=c[g];b<i;++b){if((j=e[b]).type===d.type&&j.name===d.name){return d.value}}}}return}c=h?onAdd:onRemove;if(f==null){f=!1}for(b=0;b<i;++b)this.each(c(e[b],h,f));return this};function customEvent(b,c,f,e){var d=a.event;b.sourceEvent=a.event;a.event=b;try{return c.apply(f,e)}finally{a.event=d}}var cr=function(){var b=a.event,c;while(c=b.sourceEvent)b=c;return b};var c7=function(c,d){var f=c.ownerSVGElement||c;if(f.createSVGPoint){var b=f.createSVGPoint();b.x=d.clientX,b.y=d.clientY;b=b.matrixTransform(c.getScreenCTM().inverse());return [b.x,b.y]}var e=c.getBoundingClientRect();return [d.clientX-e.left-c.clientLeft,d.clientY-e.top-c.clientTop]};var af=function(c){var b=cr();if(b.changedTouches){b=b.changedTouches[0]}return c7(c,b)};function none(){}var bK=function(b){return b==null?none:function(){return this.querySelector(b)}};var gk=function(d){if(typeof d!=="function"){d=bK(d)}for(var i=this._groups,j=i.length,h=new Array(j),e=0;e<j;++e){for(var g=i[e],k=g.length,l=h[e]=new Array(k),b,f,c=0;c<k;++c){if((b=g[c])&&(f=d.call(b,b.__data__,c,g))){if("__data__" in b){f.__data__=b.__data__}l[c]=f}}}return new Selection(h,this._parents)};function empty$1(){return []}var cq=function(b){return b==null?empty$1:function(){return this.querySelectorAll(b)}};var f1=function(b){if(typeof b!=="function"){b=cq(b)}for(var i=this._groups,j=i.length,g=[],h=[],f=0;f<j;++f){for(var e=i[f],k=e.length,c,d=0;d<k;++d){if(c=e[d]){g.push(b.call(c,c.__data__,d,e));h.push(c)}}}return new Selection(g,h)};var gh=function(b){if(typeof b!=="function"){b=cG(b)}for(var h=this._groups,i=h.length,g=new Array(i),e=0;e<i;++e){for(var f=h[e],k=f.length,j=g[e]=[],c,d=0;d<k;++d){if((c=f[d])&&b.call(c,c.__data__,d,f)){j.push(c)}}}return new Selection(g,this._parents)};var fe=function(b){return new Array(b.length)};var gu=function(){return new Selection(this._enter||this._groups.map(fe),this._parents)};function EnterNode(b,c){this.ownerDocument=b.ownerDocument;this.namespaceURI=b.namespaceURI;this._next=null;this._parent=b;this.__data__=c}EnterNode.prototype={constructor:EnterNode,appendChild:function(b){return this._parent.insertBefore(b,this._next)},insertBefore:function(b,c){return this._parent.insertBefore(b,c)},querySelector:function(b){return this._parent.querySelector(b)},querySelectorAll:function(b){return this._parent.querySelectorAll(b)}};var hH=function(b){return function(){return b}};var er="$";function bindIndex(h,d,j,i,k,e){var b=0,c,f=d.length,g=e.length;for(;b<g;++b){if(c=d[b]){c.__data__=e[b];i[b]=c}else {j[b]=new EnterNode(h,e[b])}}for(;b<f;++b){if(c=d[b]){k[b]=c}}}function bindKey(j,g,o,n,k,f,l){var b,c,e={},h=g.length,m=f.length,i=new Array(h),d;for(b=0;b<h;++b){if(c=g[b]){i[b]=d=er+l.call(c,c.__data__,b,g);if(d in e){k[b]=c}else {e[d]=c}}}for(b=0;b<m;++b){d=er+l.call(j,f[b],b,f);if(c=e[d]){n[b]=c;c.__data__=f[b];e[d]=null}else {o[b]=new EnterNode(j,f[b])}}for(b=0;b<h;++b){if((c=g[b])&&(e[i[b]]===c)){k[b]=c}}}var gP=function(d,t){if(!d){e=new Array(this.size()),b=-1;this.each(function(c){e[++b]=c});return e}var w=t?bindKey:bindIndex,k=this._parents,o=this._groups;if(typeof d!=="function"){d=hH(d)}for(var j=o.length,c=new Array(j),p=new Array(j),r=new Array(j),b=0;b<j;++b){var h=k[b],q=o[b],u=q.length,e=d.call(h,h&&h.__data__,b,k),g=e.length,m=p[b]=new Array(g),l=c[b]=new Array(g),v=r[b]=new Array(u);w(h,q,m,l,v,e,t);for(var f=0,i=0,n,s;f<g;++f){if(n=m[f]){if(f>=i){i=f+1}while(!(s=l[i])&&++i<g){}n._next=s||null}}}c=new Selection(c,k);c._enter=p;c._exit=r;return c};var gR=function(){return new Selection(this._exit||this._groups.map(fe),this._parents)};var gw=function(k){for(var d=this._groups,g=k._groups,f=d.length,n=g.length,o=Math.min(f,n),e=new Array(f),b=0;b<o;++b){for(var h=d[b],l=g[b],j=h.length,m=e[b]=new Array(j),i,c=0;c<j;++c){if(i=h[c]||l[c]){m[c]=i}}}for(;b<f;++b){e[b]=d[b]}return new Selection(e,this._parents)};var gy=function(){for(var f=this._groups,g=-1,h=f.length;++g<h;){for(var d=f[g],e=d.length-1,b=d[e],c;--e>=0;){if(c=d[e]){if(b&&b!==c.nextSibling){b.parentNode.insertBefore(c,b)}b=c}}}return this};var gV=function(d){if(!d){d=ascending$1}function compareNode(b,c){return b&&c?d(b.__data__,c.__data__):!b-!c}for(var g=this._groups,j=g.length,e=new Array(j),c=0;c<j;++c){for(var h=g[c],k=h.length,f=e[c]=new Array(k),i,b=0;b<k;++b){if(i=h[b]){f[b]=i}}f.sort(compareNode)}return new Selection(e,this._parents).order()};function ascending$1(b,c){return b<c?-1:b>c?1:b>=c?0:NaN}var gO=function(){var b=arguments[0];arguments[0]=this;b.apply(null,arguments);return this};var gx=function(){var b=new Array(this.size()),c=-1;this.each(function(){b[++c]=this});return b};var gT=function(){for(var d=this._groups,c=0,g=d.length;c<g;++c){for(var e=d[c],b=0,h=e.length;b<h;++b){var f=e[b];if(f){return f}}}return null};var gU=function(){var b=0;this.each(function(){++b});return b};var gt=function(){return !this.node()};var gQ=function(g){for(var f=this._groups,e=0,h=f.length;e<h;++e){for(var c=f[e],b=0,i=c.length,d;b<i;++b){if(d=c[b]){g.call(d,d.__data__,b,c)}}}return this};function attrRemove(b){return function(){this.removeAttribute(b)}}function attrRemoveNS(b){return function(){this.removeAttributeNS(b.space,b.local)}}function attrConstant(c,b){return function(){this.setAttribute(c,b)}}function attrConstantNS(b,c){return function(){this.setAttributeNS(b.space,b.local,c)}}function attrFunction(b,c){return function(){var d=c.apply(this,arguments);if(d==null){this.removeAttribute(b)}else {this.setAttribute(b,d)}}}function attrFunctionNS(b,c){return function(){var d=c.apply(this,arguments);if(d==null){this.removeAttributeNS(b.space,b.local)}else {this.setAttributeNS(b.space,b.local,d)}}}var gN=function(e,c){var b=a$(e);if(arguments.length<2){var d=this.node();return b.local?d.getAttributeNS(b.space,b.local):d.getAttribute(b)}return this.each((c==null?(b.local?attrRemoveNS:attrRemove):(typeof c==="function"?(b.local?attrFunctionNS:attrFunction):(b.local?attrConstantNS:attrConstant)))(b,c))};var aJ=function(b){return (b.ownerDocument&&b.ownerDocument.defaultView)||(b.document&&b)||b.defaultView};function styleRemove(b){return function(){this.style.removeProperty(b)}}function styleConstant(d,c,b){return function(){this.style.setProperty(d,c,b)}}function styleFunction(b,d,c){return function(){var e=d.apply(this,arguments);if(e==null){this.style.removeProperty(b)}else {this.style.setProperty(b,e,c)}}}var gA=function(d,b,c){var e;return arguments.length>1?this.each((b==null?styleRemove:typeof b==="function"?styleFunction:styleConstant)(d,b,c==null?"":c)):aJ(e=this.node()).getComputedStyle(e,null).getPropertyValue(d)};function propertyRemove(b){return function(){delete this[b]}}function propertyConstant(c,b){return function(){this[c]=b}}function propertyFunction(b,c){return function(){var d=c.apply(this,arguments);if(d==null){delete this[b]}else {this[b]=d}}}var f5=function(c,b){return arguments.length>1?this.each((b==null?propertyRemove:typeof b==="function"?propertyFunction:propertyConstant)(c,b)):this.node()[c]};function classArray(b){return b.trim().split(/^|\s+/)}function classList(b){return b.classList||new ClassList(b)}function ClassList(b){this._node=b;this._names=classArray(b.getAttribute("class")||"")}ClassList.prototype={add:function(b){var c=this._names.indexOf(b);if(c<0){this._names.push(b);this._node.setAttribute("class",this._names.join(" "))}},remove:function(c){var b=this._names.indexOf(c);if(b>=0){this._names.splice(b,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(b){return this._names.indexOf(b)>=0}};function classedAdd(e,b){var d=classList(e),c=-1,f=b.length;while(++c<f)d.add(b[c])}function classedRemove(e,b){var d=classList(e),c=-1,f=b.length;while(++c<f)d.remove(b[c])}function classedTrue(b){return function(){classedAdd(this,b)}}function classedFalse(b){return function(){classedRemove(this,b)}}function classedFunction(b,c){return function(){(c.apply(this,arguments)?classedAdd:classedRemove)(this,b)}}var f7=function(f,c){var b=classArray(f+"");if(arguments.length<2){var e=classList(this.node()),d=-1,g=b.length;while(++d<g)if(!e.contains(b[d])){return !1}return !0}return this.each((typeof c==="function"?classedFunction:c?classedTrue:classedFalse)(b,c))};function textRemove(){this.textContent=""}function textConstant(b){return function(){this.textContent=b}}function textFunction(b){return function(){var c=b.apply(this,arguments);this.textContent=c==null?"":c}}var gW=function(b){return arguments.length?this.each(b==null?textRemove:(typeof b==="function"?textFunction:textConstant)(b)):this.node().textContent};function htmlRemove(){this.innerHTML=""}function htmlConstant(b){return function(){this.innerHTML=b}}function htmlFunction(b){return function(){var c=b.apply(this,arguments);this.innerHTML=c==null?"":c}}var gS=function(b){return arguments.length?this.each(b==null?htmlRemove:(typeof b==="function"?htmlFunction:htmlConstant)(b)):this.node().innerHTML};function raise(){if(this.nextSibling){this.parentNode.appendChild(this)}}var gz=function(){return this.each(raise)};function lower(){if(this.previousSibling){this.parentNode.insertBefore(this,this.parentNode.firstChild)}}var gv=function(){return this.each(lower)};var gg=function(b){var c=typeof b==="function"?b:cS(b);return this.select(function(){return this.appendChild(c.apply(this,arguments))})};function constantNull(){return null}var gi=function(c,b){var d=typeof c==="function"?c:cS(c),e=b==null?constantNull:typeof b==="function"?b:bK(b);return this.select(function(){return this.insertBefore(d.apply(this,arguments),e.apply(this,arguments)||null)})};function remove(){var b=this.parentNode;if(b){b.removeChild(this)}}var gj=function(){return this.each(remove)};var gs=function(b){return arguments.length?this.property("__data__",b):this.node().__data__};function dispatchEvent(f,d,c){var e=aJ(f),b=e.CustomEvent;if(b){b=new b(d,c)}else {b=e.document.createEvent("Event");if(c){b.initEvent(d,c.bubbles,c.cancelable),b.detail=c.detail}else {b.initEvent(d,!1,!1)}}f.dispatchEvent(b)}function dispatchConstant(c,b){return function(){return dispatchEvent(this,c,b)}}function dispatchFunction(c,b){return function(){return dispatchEvent(this,c,b.apply(this,arguments))}}var f4=function(c,b){return this.each((typeof b==="function"?dispatchFunction:dispatchConstant)(c,b))};var dk=[null];function Selection(c,b){this._groups=c;this._parents=b}function selection(){return new Selection([[document.documentElement]],dk)}Selection.prototype=selection.prototype={constructor:Selection,select:gk,selectAll:f1,filter:gh,data:gP,enter:gu,exit:gR,merge:gw,order:gy,sort:gV,call:gO,nodes:gx,node:gT,size:gU,empty:gt,each:gQ,attr:gN,style:gA,property:f5,classed:f7,text:gW,html:gS,raise:gz,lower:gv,append:gg,insert:gi,remove:gj,datum:gs,on:hm,dispatch:f4};var C=function(b){return typeof b==="string"?new Selection([[document.querySelector(b)]],[document.documentElement]):new Selection([[b]],dk)};var ij=function(b){return typeof b==="string"?new Selection([document.querySelectorAll(b)],[document.documentElement]):new Selection([b==null?[]:b],dk)};var bV=function(f,b,d){if(arguments.length<3){d=b,b=cr().changedTouches}for(var c=0,g=b?b.length:0,e;c<g;++c){if((e=b[c]).identifier===d){return c7(f,e)}}return null};var jh=function(f,b){if(b==null){b=cr().touches}for(var c=0,e=b?b.length:0,d=new Array(e);c<e;++c){d[c]=c7(f,b[c])}return d};function nopropagation(){a.event.stopImmediatePropagation()}var aE=function(){a.event.preventDefault();a.event.stopImmediatePropagation()};var bw=function(c){var b=c.document.documentElement,d=C(c).on("dragstart.drag",aE,!0);if("onselectstart" in b){d.on("selectstart.drag",aE,!0)}else {b.__noselect=b.style.MozUserSelect;b.style.MozUserSelect="none"}};function yesdrag(d,e){var b=d.document.documentElement,c=C(d).on("dragstart.drag",null);if(e){c.on("click.drag",aE,!0);setTimeout(function(){c.on("click.drag",null)},0)}if("onselectstart" in b){c.on("selectstart.drag",null)}else {b.style.MozUserSelect=b.__noselect;delete b.__noselect}}var ct=function(b){return function(){return b}};function DragEvent(e,f,c,i,d,j,k,g,h,b){this.target=e;this.type=f;this.subject=c;this.identifier=i;this.active=d;this.x=j;this.y=k;this.dx=g;this.dy=h;this._=b}DragEvent.prototype.on=function(){var b=this._.on.apply(this._,arguments);return b===this._?this:b};function defaultFilter$1(){return !a.event.button}function defaultContainer(){return this.parentNode}function defaultSubject(b){return b==null?{x:a.event.x,y:a.event.y}:b}var j3=function(){var g=defaultFilter$1,d=defaultContainer,i=defaultSubject,b={},e=dispatch("start","drag","end"),f=0,h,c;function drag(b){b.on("mousedown.drag",mousedowned).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function mousedowned(){if(c||!g.apply(this,arguments)){return}var b=beforestart("mouse",d.apply(this,arguments),af,this,arguments);if(!b){return}C(a.event.view).on("mousemove.drag",mousemoved,!0).on("mouseup.drag",mouseupped,!0);bw(a.event.view);nopropagation();h=!1;b("start")}function mousemoved(){aE();h=!0;b.mouse("drag")}function mouseupped(){C(a.event.view).on("mousemove.drag mouseup.drag",null);yesdrag(a.event.view,h);aE();b.mouse("end")}function touchstarted(){if(!g.apply(this,arguments)){return}var c=a.event.changedTouches,f=d.apply(this,arguments),h=c.length,b,e;for(b=0;b<h;++b){if(e=beforestart(c[b].identifier,f,bV,this,arguments)){nopropagation();e("start")}}}function touchmoved(){var d=a.event.changedTouches,f=d.length,c,e;for(c=0;c<f;++c){if(e=b[d[c].identifier]){aE();e("drag")}}}function touchended(){var e=a.event.changedTouches,g=e.length,d,f;if(c){clearTimeout(c)}c=setTimeout(function(){c=null},500);for(d=0;d<g;++d){if(f=b[e[d].identifier]){nopropagation();f("end")}}}function beforestart(d,j,k,m,l){var c=k(j,d),g,n,o,h=e.copy();if(!customEvent(new DragEvent(drag,"beforestart",g,d,f,c[0],c[1],0,0,h),function(){if((a.event.subject=g=i.apply(m,l))==null){return !1}n=g.x-c[0]||0;o=g.y-c[1]||0;return !0})){return}return function gesture(e){var p=c,i;switch(e){case "start":b[d]=gesture,i=f++;break;case "end":delete b[d],--f;case "drag":c=k(j,d),i=f;break;}customEvent(new DragEvent(drag,e,g,d,i,c[0]+n,c[1]+o,c[0]-p[0],c[1]-p[1],h),h.apply,h,[e,m,l])}}drag.filter=function(b){return arguments.length?(g=typeof b==="function"?b:ct(!!b),drag):g};drag.container=function(b){return arguments.length?(d=typeof b==="function"?b:ct(b),drag):d};drag.subject=function(b){return arguments.length?(i=typeof b==="function"?b:ct(b),drag):i};drag.on=function(){var b=e.on.apply(e,arguments);return b===e?drag:b};return drag};var aF=function(b,d,c){b.prototype=d.prototype=c;c.constructor=b};function extend(e,b){var c=Object.create(e.prototype);for(var d in b)c[d]=b[d];return c}function Color(){}var aq=0.7;var aB=1/aq;var aO="\\s*([+-]?\\d+)\\s*";var bj="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*";var S="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*";var jB=/^#([0-9a-f]{3})$/;var jC=/^#([0-9a-f]{6})$/;var hk=new RegExp("^rgb\\("+[aO,aO,aO]+"\\)$");var hl=new RegExp("^rgb\\("+[S,S,S]+"\\)$");var g2=new RegExp("^rgba\\("+[aO,aO,aO,bj]+"\\)$");var g3=new RegExp("^rgba\\("+[S,S,S,bj]+"\\)$");var hj=new RegExp("^hsl\\("+[bj,S,S]+"\\)$");var g1=new RegExp("^hsla\\("+[bj,S,S,bj]+"\\)$");var fn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aF(Color,color,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}});function color(c){var b;c=(c+"").trim().toLowerCase();return (b=jB.exec(c))?(b=parseInt(b[1],16),new Rgb((b>>8&15)|(b>>4&240),(b>>4&15)|(b&240),((b&15)<<4)|(b&15),1)):(b=jC.exec(c))?rgbn(parseInt(b[1],16)):(b=hk.exec(c))?new Rgb(b[1],b[2],b[3],1):(b=hl.exec(c))?new Rgb(b[1]*255/100,b[2]*255/100,b[3]*255/100,1):(b=g2.exec(c))?rgba(b[1],b[2],b[3],b[4]):(b=g3.exec(c))?rgba(b[1]*255/100,b[2]*255/100,b[3]*255/100,b[4]):(b=hj.exec(c))?hsla(b[1],b[2]/100,b[3]/100,1):(b=g1.exec(c))?hsla(b[1],b[2]/100,b[3]/100,b[4]):fn.hasOwnProperty(c)?rgbn(fn[c]):c==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(b){return new Rgb(b>>16&255,b>>8&255,b&255,1)}function rgba(e,d,c,b){if(b<=0){e=d=c=NaN}return new Rgb(e,d,c,b)}function rgbConvert(b){if(!(b instanceof Color)){b=color(b)}if(!b){return new Rgb()}b=b.rgb();return new Rgb(b.r,b.g,b.b,b.opacity)}function rgb(c,e,d,b){return arguments.length===1?rgbConvert(c):new Rgb(c,e,d,b==null?1:b)}function Rgb(e,d,c,b){this.r=+e;this.g=+d;this.b=+c;this.opacity=+b}aF(Rgb,rgb,extend(Color,{brighter:function(b){b=b==null?aB:Math.pow(aB,b);return new Rgb(this.r*b,this.g*b,this.b*b,this.opacity)},darker:function(b){b=b==null?aq:Math.pow(aq,b);return new Rgb(this.r*b,this.g*b,this.b*b,this.opacity)},rgb:function(){return this},displayable:function(){return (0<=this.r&&this.r<=255)&&(0<=this.g&&this.g<=255)&&(0<=this.b&&this.b<=255)&&(0<=this.opacity&&this.opacity<=1)},toString:function(){var b=this.opacity;b=isNaN(b)?1:Math.max(0,Math.min(1,b));return (b===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(b===1?")":", "+b+")")}}));function hsla(b,d,c,e){if(e<=0){b=d=c=NaN}else if(c<=0||c>=1){b=d=NaN}else if(d<=0){b=NaN}return new Hsl(b,d,c,e)}function hslConvert(b){if(b instanceof Hsl){return new Hsl(b.h,b.s,b.l,b.opacity)}if(!(b instanceof Color)){b=color(b)}if(!b){return new Hsl()}if(b instanceof Hsl){return b}b=b.rgb();var h=b.r/255,e=b.g/255,g=b.b/255,i=Math.min(h,e,g),d=Math.max(h,e,g),f=NaN,c=d-i,j=(d+i)/2;if(c){if(h===d){f=(e-g)/c+(e<g)*6}else if(e===d){f=(g-h)/c+2}else {f=(h-e)/c+4}c/=j<0.5?d+i:2-d-i;f*=60}else {c=j>0&&j<1?0:f}return new Hsl(f,c,j,b.opacity)}function hsl(c,e,d,b){return arguments.length===1?hslConvert(c):new Hsl(c,e,d,b==null?1:b)}function Hsl(c,e,d,b){this.h=+c;this.s=+e;this.l=+d;this.opacity=+b}aF(Hsl,hsl,extend(Color,{brighter:function(b){b=b==null?aB:Math.pow(aB,b);return new Hsl(this.h,this.s,this.l*b,this.opacity)},darker:function(b){b=b==null?aq:Math.pow(aq,b);return new Hsl(this.h,this.s,this.l*b,this.opacity)},rgb:function(){var b=this.h%360+(this.h<0)*360,f=isNaN(b)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<0.5?c:1-c)*f,e=2*c-d;return new Rgb(hsl2rgb(b>=240?b-240:b+120,e,d),hsl2rgb(b,e,d),hsl2rgb(b<120?b+240:b-120,e,d),this.opacity)},displayable:function(){return (0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)}}));function hsl2rgb(c,b,d){return (c<60?b+(d-b)*c/60:c<180?d:c<240?b+(d-b)*(240-c)/60:b)*255}var eV=Math.PI/180;var e1=180/Math.PI;var b4=18;var fN=0.95047;var fO=1;var fP=1.08883;var fS=4/29;var aR=6/29;var fT=3*aR*aR;var kJ=aR*aR*aR;function labConvert(b){if(b instanceof Lab){return new Lab(b.l,b.a,b.b,b.opacity)}if(b instanceof Hcl){var g=b.h*eV;return new Lab(b.l,Math.cos(g)*b.c,Math.sin(g)*b.c,b.opacity)}if(!(b instanceof Rgb)){b=rgbConvert(b)}var d=rgb2xyz(b.r),c=rgb2xyz(b.g),e=rgb2xyz(b.b),h=xyz2lab((0.4124564*d+0.3575761*c+0.1804375*e)/fN),f=xyz2lab((0.2126729*d+0.7151522*c+0.072175*e)/fO),i=xyz2lab((0.0193339*d+0.119192*c+0.9503041*e)/fP);return new Lab(116*f-16,500*(h-f),200*(f-i),b.opacity)}function lab(c,d,e,b){return arguments.length===1?labConvert(c):new Lab(c,d,e,b==null?1:b)}function Lab(e,c,d,b){this.l=+e;this.a=+c;this.b=+d;this.opacity=+b}aF(Lab,lab,extend(Color,{brighter:function(b){return new Lab(this.l+b4*(b==null?1:b),this.a,this.b,this.opacity)},darker:function(b){return new Lab(this.l-b4*(b==null?1:b),this.a,this.b,this.opacity)},rgb:function(){var b=(this.l+16)/116,c=isNaN(this.a)?b:b+this.a/500,d=isNaN(this.b)?b:b-this.b/200;b=fO*lab2xyz(b);c=fN*lab2xyz(c);d=fP*lab2xyz(d);return new Rgb(xyz2rgb(3.2404542*c-1.5371385*b-0.4985314*d),xyz2rgb(-0.969266*c+1.8760108*b+0.041556*d),xyz2rgb(0.0556434*c-0.2040259*b+1.0572252*d),this.opacity)}}));function xyz2lab(b){return b>kJ?Math.pow(b,1/3):b/fT+fS}function lab2xyz(b){return b>aR?b*b*b:fT*(b-fS)}function xyz2rgb(b){return 255*(b<=0.0031308?12.92*b:1.055*Math.pow(b,1/2.4)-0.055)}function rgb2xyz(b){return (b/=255)<=0.04045?b/12.92:Math.pow((b+0.055)/1.055,2.4)}function hclConvert(b){if(b instanceof Hcl){return new Hcl(b.h,b.c,b.l,b.opacity)}if(!(b instanceof Lab)){b=labConvert(b)}var c=Math.atan2(b.b,b.a)*e1;return new Hcl(c<0?c+360:c,Math.sqrt(b.a*b.a+b.b*b.b),b.l,b.opacity)}function hcl(c,d,e,b){return arguments.length===1?hclConvert(c):new Hcl(c,d,e,b==null?1:b)}function Hcl(d,c,e,b){this.h=+d;this.c=+c;this.l=+e;this.opacity=+b}aF(Hcl,hcl,extend(Color,{brighter:function(b){return new Hcl(this.h,this.c,this.l+b4*(b==null?1:b),this.opacity)},darker:function(b){return new Hcl(this.h,this.c,this.l-b4*(b==null?1:b),this.opacity)},rgb:function(){return labConvert(this).rgb()}}));var fU=-0.14861;var dz=+1.78277;var dA=-0.29227;var ce=-0.90649;var bn=+1.97294;var fM=bn*ce;var fL=bn*dz;var fg=dz*dA-ce*fU;function cubehelixConvert(b){if(b instanceof Cubehelix){return new Cubehelix(b.h,b.s,b.l,b.opacity)}if(!(b instanceof Rgb)){b=rgbConvert(b)}var j=b.r/255,h=b.g/255,g=b.b/255,c=(fg*g+fM*j-fL*h)/(fg+fM-fL),d=g-c,f=(bn*(h-c)-dA*d)/ce,i=Math.sqrt(f*f+d*d)/(bn*c*(1-c)),e=i?Math.atan2(f,d)*e1-120:NaN;return new Cubehelix(e<0?e+360:e,i,c,b.opacity)}function cubehelix(c,e,d,b){return arguments.length===1?cubehelixConvert(c):new Cubehelix(c,e,d,b==null?1:b)}function Cubehelix(c,e,d,b){this.h=+c;this.s=+e;this.l=+d;this.opacity=+b}aF(Cubehelix,cubehelix,extend(Color,{brighter:function(b){b=b==null?aB:Math.pow(aB,b);return new Cubehelix(this.h,this.s,this.l*b,this.opacity)},darker:function(b){b=b==null?aq:Math.pow(aq,b);return new Cubehelix(this.h,this.s,this.l*b,this.opacity)},rgb:function(){var f=isNaN(this.h)?0:(this.h+120)*eV,b=+this.l,d=isNaN(this.s)?0:this.s*b*(1-b),c=Math.cos(f),e=Math.sin(f);return new Rgb(255*(b+d*(fU*c+dz*e)),255*(b+d*(dA*c+ce*e)),255*(b+d*(bn*c)),this.opacity)}}));function basis(b,e,f,g,h){var c=b*b,d=c*b;return ((1-3*b+3*c-d)*e+(4-6*c+3*d)*f+(1+3*b+3*c-3*d)*g+d*h)/6}var eR=function(b){var c=b.length-1;return function(e){var d=e<=0?(e=0):e>=1?(e=1,c-1):Math.floor(e*c),f=b[d],g=b[d+1],h=d>0?b[d-1]:2*f-g,i=d<c-1?b[d+2]:2*g-f;return basis((e-d/c)*c,h,f,g,i)}};var d1=function(c){var b=c.length;return function(e){var d=Math.floor(((e%=1)<0?++e:e)*b),f=c[(d+b-1)%b],g=c[d%b],h=c[(d+1)%b],i=c[(d+2)%b];return basis((e-d/b)*b,f,g,h,i)}};var bx=function(b){return function(){return b}};function linear(b,c){return function(d){return b+d*c}}function exponential(c,d,b){return c=Math.pow(c,b),d=Math.pow(d,b)-c,b=1/b,function(e){return Math.pow(c+e*d,b)}}function hue(c,d){var b=d-c;return b?linear(c,b>180||b<-180?b-360*Math.round(b/360):b):bx(isNaN(c)?d:c)}function gamma(b){return (b=+b)===1?nogamma:function(c,d){return d-c?exponential(c,d,b):bx(isNaN(c)?d:c)}}function nogamma(b,c){var d=c-b;return d?linear(b,d):bx(isNaN(b)?c:b)}var aV=((function rgbGamma(c){var b=gamma(c);function rgb$$1(d,e){var i=b((d=rgb(d)).r,(e=rgb(e)).r),h=b(d.g,e.g),g=b(d.b,e.b),f=nogamma(d.opacity,e.opacity);return function(b){d.r=i(b);d.g=h(b);d.b=g(b);d.opacity=f(b);return d+""}}rgb$$1.gamma=rgbGamma;return rgb$$1}))(1);function rgbSpline(b){return function(i){var g=i.length,h=new Array(g),f=new Array(g),e=new Array(g),d,c;for(d=0;d<g;++d){c=rgb(i[d]);h[d]=c.r||0;f[d]=c.g||0;e[d]=c.b||0}h=b(h);f=b(f);e=b(e);c.opacity=1;return function(d){c.r=h(d);c.g=f(d);c.b=e(d);return c+""}}}var iL=rgbSpline(eR);var gM=rgbSpline(d1);var eP=function(e,d){var c=d?d.length:0,g=e?Math.min(c,e.length):0,h=new Array(c),f=new Array(c),b;for(b=0;b<g;++b)h[b]=aS(e[b],d[b]);for(;b<c;++b)f[b]=d[b];return function(c){for(b=0;b<g;++b)f[b]=h[b](c);return f}};var fw=function(b,c){var d=new Date();return b=+b,c-=b,function(e){return d.setTime(b+c*e),d}};var B=function(b,c){return b=+b,c-=b,function(d){return b+c*d}};var fd=function(d,c){var f={},e={},b;if(d===null||typeof d!=="object"){d={}}if(c===null||typeof c!=="object"){c={}}for(b in c){if(b in d){f[b]=aS(d[b],c[b])}else {e[b]=c[b]}}return function(g){for(b in f)e[b]=f[b](g);return e}};var ds=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;var dt=new RegExp(ds.source,"g");function zero(b){return function(){return b}}function one(b){return function(c){return b(c)+""}}var cj=function(j,d){var g=ds.lastIndex=dt.lastIndex=0,i,f,e,c=-1,b=[],h=[];j=j+"",d=d+"";while((i=ds.exec(j))&&(f=dt.exec(d))){if((e=f.index)>g){e=d.slice(g,e);if(b[c]){b[c]+=e}else {b[++c]=e}}if((i=i[0])===(f=f[0])){if(b[c]){b[c]+=f}else {b[++c]=f}}else {b[++c]=null;h.push({i:c,x:B(i,f)})}g=dt.lastIndex}if(g<d.length){e=d.slice(g);if(b[c]){b[c]+=e}else {b[++c]=e}}return b.length<2?(h[0]?one(h[0].x):zero(d)):(d=h.length,function(f){for(var c=0,e;c<d;++c)b[(e=h[c]).i]=e.x(f);return b.join("")})};var aS=function(e,b){var c=typeof b,d;return b==null||c==="boolean"?bx(b):(c==="number"?B:c==="string"?((d=color(b))?(b=d,aV):cj):b instanceof color?aV:b instanceof Date?fw:Array.isArray(b)?eP:isNaN(b)?fd:B)(e,b)};var dJ=function(b,c){return b=+b,c-=b,function(d){return Math.round(b+c*d)}};var eW=180/Math.PI;var cw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};var eo=function(b,c,f,g,i,j){var e,h,d;if(e=Math.sqrt(b*b+c*c)){b/=e,c/=e}if(d=b*f+c*g){f-=b*d,g-=c*d}if(h=Math.sqrt(f*f+g*g)){f/=h,g/=h,d/=h}if(b*g<c*f){b=-b,c=-c,d=-d,e=-e}return {translateX:i,translateY:j,rotate:Math.atan2(c,b)*eW,skewX:Math.atan(d)*eW,scaleX:e,scaleY:h}};var a8;var cT;var eU;var bP;function parseCss(b){if(b==="none"){return cw}if(!a8){a8=document.createElement("DIV"),cT=document.documentElement,eU=document.defaultView}a8.style.transform=b;b=eU.getComputedStyle(cT.appendChild(a8),null).getPropertyValue("transform");cT.removeChild(a8);b=b.slice(7,-1).split(",");return eo(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])}function parseSvg(b){if(b==null){return cw}if(!bP){bP=document.createElementNS("http://www.w3.org/2000/svg","g")}bP.setAttribute("transform",b);if(!(b=bP.transform.baseVal.consolidate())){return cw}b=b.matrix;return eo(b.a,b.b,b.c,b.d,b.e,b.f)}function interpolateTransform(e,c,d,b){function pop(f){return f.length?f.pop()+" ":""}function translate(h,i,f,g,k,l){if(h!==f||i!==g){var j=k.push("translate(",null,c,null,d);l.push({i:j-4,x:B(h,f)},{i:j-2,x:B(i,g)})}else if(f||g){k.push("translate("+f+c+g+d)}}function rotate(g,f,h,i){if(g!==f){if(g-f>180){f+=360}else if(f-g>180){g+=360}i.push({i:h.push(pop(h)+"rotate(",null,b)-2,x:B(g,f)})}else if(f){h.push(pop(h)+"rotate("+f+b)}}function skewX(h,f,g,i){if(h!==f){i.push({i:g.push(pop(g)+"skewX(",null,b)-2,x:B(h,f)})}else if(f){g.push(pop(g)+"skewX("+f+b)}}function scale(i,j,f,g,h,l){if(i!==f||j!==g){var k=h.push(pop(h)+"scale(",null,",",null,")");l.push({i:k-4,x:B(i,f)},{i:k-2,x:B(j,g)})}else if(f!==1||g!==1){h.push(pop(h)+"scale("+f+","+g+")")}}return function(f,g){var i=[],h=[];f=e(f),g=e(g);translate(f.translateX,f.translateY,g.translateX,g.translateY,i,h);rotate(f.rotate,g.rotate,i,h);skewX(f.skewX,g.skewX,i,h);scale(f.scaleX,f.scaleY,g.scaleX,g.scaleY,i,h);f=g=null;return function(m){var j=-1,l=h.length,k;while(++j<l)i[(k=h[j]).i]=k.x(m);return i.join("")}}}var dC=interpolateTransform(parseCss,"px, ","px)","deg)");var dD=interpolateTransform(parseSvg,", ",")",")");var bk=Math.SQRT2;var dj=2;var fA=4;var iA=1.0E-12;function cosh(b){return ((b=Math.exp(b))+1/b)/2}function sinh(b){return ((b=Math.exp(b))-1/b)/2}function tanh(b){return ((b=Math.exp(2*b))-1)/(b+1)}var dM=function(o,p){var j=o[0],k=o[1],b=o[2],q=p[0],r=p[1],c=p[2],g=q-j,h=r-k,f=g*g+h*h,i,e;if(f<iA){e=Math.log(c/b)/bk;i=function(c){return [j+c*g,k+c*h,b*Math.exp(bk*c*e)]}}else {var n=Math.sqrt(f),l=(c*c-b*b+fA*f)/(2*b*dj*n),m=(c*c-b*b-fA*f)/(2*c*dj*n),d=Math.log(Math.sqrt(l*l+1)-l),s=Math.log(Math.sqrt(m*m+1)-m);e=(s-d)/bk;i=function(l){var f=l*e,c=cosh(d),i=b/(dj*n)*(c*tanh(bk*f+d)-sinh(d));return [j+i*g,k+i*h,b*c/cosh(bk*f+d)]}}i.duration=e*1000;return i};function hsl$1(b){return function(c,d){var f=b((c=hsl(c)).h,(d=hsl(d)).h),h=nogamma(c.s,d.s),g=nogamma(c.l,d.l),e=nogamma(c.opacity,d.opacity);return function(i){c.h=f(i);c.s=h(i);c.l=g(i);c.opacity=e(i);return c+""}}}var jT=hsl$1(hue);var i_=hsl$1(nogamma);function lab$1(b,c){var g=nogamma((b=lab(b)).l,(c=lab(c)).l),e=nogamma(b.a,c.a),f=nogamma(b.b,c.b),d=nogamma(b.opacity,c.opacity);return function(h){b.l=g(h);b.a=e(h);b.b=f(h);b.opacity=d(h);return b+""}}function hcl$1(b){return function(c,d){var g=b((c=hcl(c)).h,(d=hcl(d)).h),f=nogamma(c.c,d.c),h=nogamma(c.l,d.l),e=nogamma(c.opacity,d.opacity);return function(i){c.h=g(i);c.c=f(i);c.l=h(i);c.opacity=e(i);return c+""}}}var jR=hcl$1(hue);var i$=hcl$1(nogamma);function cubehelix$1(b){return (function cubehelixGamma(c){c=+c;function cubehelix$$1(d,e){var g=b((d=cubehelix(d)).h,(e=cubehelix(e)).h),i=nogamma(d.s,e.s),h=nogamma(d.l,e.l),f=nogamma(d.opacity,e.opacity);return function(j){d.h=g(j);d.s=i(j);d.l=h(Math.pow(j,c));d.opacity=f(j);return d+""}}cubehelix$$1.gamma=cubehelixGamma;return cubehelix$$1})(1)}var ht=cubehelix$1(hue);var br=cubehelix$1(nogamma);var iK=function(e,c){var d=new Array(c);for(var b=0;b<c;++b)d[b]=e(b/(c-1));return d};var aK=0;var ba=0;var a4=0;var es=1000;var bL;var a5;var bz=0;var Z=0;var cD=0;var c2=typeof performance==="object"&&performance.now?performance:Date;var eH=typeof requestAnimationFrame==="function"?requestAnimationFrame:function(b){setTimeout(b,17)};function now(){return Z||(eH(clearNow),Z=c2.now()+cD)}function clearNow(){Z=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(c,d,b){if(typeof c!=="function"){throw new TypeError("callback is not a function")}b=(b==null?now():+b)+(d==null?0:+d);if(!this._next&&a5!==this){if(a5){a5._next=this}else {bL=this}a5=this}this._call=c;this._time=b;sleep()},stop:function(){if(this._call){this._call=null;this._time=Infinity;sleep()}}};function timer(c,d,e){var b=new Timer();b.restart(c,d,e);return b}function timerFlush(){now();++aK;var b=bL,c;while(b){if((c=Z-b._time)>=0){b._call.call(null,c)}b=b._next}--aK}function wake(){Z=(bz=c2.now())+cD;aK=ba=0;try{timerFlush()}finally{aK=0;nap();Z=0}}function poke(){var c=c2.now(),b=c-bz;if(b>es){cD-=b,bz=c}}function nap(){var c,b=bL,e,d=Infinity;while(b){if(b._call){if(d>b._time){d=b._time}c=b,b=b._next}else {e=b._next,b._next=null;b=c?c._next=e:bL=e}}a5=c;sleep(d)}function sleep(c){if(aK){return}if(ba){ba=clearTimeout(ba)}var b=c-Z;if(b>24){if(c<Infinity){ba=setTimeout(wake,b)}if(a4){a4=clearInterval(a4)}}else {if(!a4){bz=Z,a4=setInterval(poke,es)}aK=1,eH(wake)}}var cI=function(d,b,e){var c=new Timer();b=b==null?0:+b;c.restart(function(f){c.stop();d(f+b)},b,e);return c};var hO=function(e,b,c){var d=new Timer(),f=b;if(b==null){return d.restart(e,b,c),d}b=+b,c=c==null?now():+c;d.restart(function tick(g){g+=f;d.restart(tick,f+=b,c);e(g)},b,c);return d};var iX=dispatch("start","end","interrupt");var hK=[];var eN=0;var cA=1;var bE=2;var cQ=3;var eO=4;var cZ=5;var bS=6;var bJ=function(c,h,e,g,f,b){var d=c.__transition;if(!d){c.__transition={}}else if(e in d){return}create(c,e,{name:h,index:g,group:f,on:iX,tween:hK,time:b.time,delay:b.delay,duration:b.duration,ease:b.ease,timer:null,state:eN})};function init(c,d){var b=c.__transition;if(!b||!(b=b[d])||b.state>eN){throw new Error("too late")}return b}function set$1(c,d){var b=c.__transition;if(!b||!(b=b[d])||b.state>bE){throw new Error("too late")}return b}function get$1(c,d){var b=c.__transition;if(!b||!(b=b[d])){throw new Error("too late")}return b}function create(c,f,b){var d=c.__transition,e;d[f]=b;b.timer=timer(schedule,0,b.time);function schedule(d){b.state=cA;b.timer.restart(start,b.delay,b.time);if(b.delay<=d){start(d-b.delay)}}function start(k){var h,i,j,g;if(b.state!==cA){return stop()}for(h in d){g=d[h];if(g.name!==b.name){continue}if(g.state===cQ){return cI(start)}if(g.state===eO){g.state=bS;g.timer.stop();g.on.call("interrupt",c,c.__data__,g.index,g.group);delete d[h]}else if(+h<f){g.state=bS;g.timer.stop();delete d[h]}}cI(function(){if(b.state===cQ){b.state=eO;b.timer.restart(tick,b.delay,b.time);tick(k)}});b.state=bE;b.on.call("start",c,c.__data__,b.index,b.group);if(b.state!==bE){return}b.state=cQ;e=new Array(j=b.tween.length);for(h=0,i=-1;h<j;++h){if(g=b.tween[h].value.call(c,c.__data__,b.index,b.group)){e[++i]=g}}e.length=i+1}function tick(d){var i=d<b.duration?b.ease.call(null,d/b.duration):(b.timer.restart(stop),b.state=cZ,1),g=-1,h=e.length;while(++g<h){e[g].call(null,i)}if(b.state===cZ){b.on.call("end",c,c.__data__,b.index,b.group);stop()}}function stop(){b.state=bS;b.timer.stop();delete d[f];for(var e in d)return;delete c.__transition}}var an=function(e,d){var c=e.__transition,b,g,h=!0,f;if(!c){return}d=d==null?null:d+"";for(f in c){if((b=c[f]).name!==d){h=!1;continue}g=b.state>bE&&b.state<cZ;b.state=bS;b.timer.stop();if(g){b.on.call("interrupt",e,e.__data__,b.index,b.group)}delete c[f]}if(h){delete e.__transition}};var f0=function(b){return this.each(function(){an(this,b)})};function tweenRemove(e,d){var c,b;return function(){var g=set$1(this,e),h=g.tween;if(h!==c){b=c=h;for(var f=0,i=b.length;f<i;++f){if(b[f].name===d){b=b.slice();b.splice(f,1);break}}}g.tween=b}}function tweenFunction(f,e,d){var c,b;if(typeof d!=="function"){throw new Error()}return function(){var h=set$1(this,f),i=h.tween;if(i!==c){b=(c=i).slice();for(var k={name:e,value:d},g=0,j=b.length;g<j;++g){if(b[g].name===e){b[g]=k;break}}if(g===j){b.push(k)}}h.tween=b}}var gp=function(b,e){var f=this._id;b+="";if(arguments.length<2){var d=get$1(this.node(),f).tween;for(var c=0,h=d.length,g;c<h;++c){if((g=d[c]).name===b){return g.value}}return null}return this.each((e==null?tweenRemove:tweenFunction)(f,b,e))};function tweenValue(b,c,e){var d=b._id;b.each(function(){var f=set$1(this,d);(f.value||(f.value={}))[c]=e.apply(this,arguments)});return function(f){return get$1(f,d).value[c]}}var dQ=function(d,b){var c;return (typeof b==="number"?B:b instanceof color?aV:(c=color(b))?(b=c,aV):cj)(d,b)};function attrRemove$1(b){return function(){this.removeAttribute(b)}}function attrRemoveNS$1(b){return function(){this.removeAttributeNS(b.space,b.local)}}function attrConstant$1(f,e,d){var c,b;return function(){var g=this.getAttribute(f);return g===d?null:g===c?b:b=e(c=g,d)}}function attrConstantNS$1(c,f,e){var d,b;return function(){var g=this.getAttributeNS(c.space,c.local);return g===e?null:g===d?b:b=f(d=g,e)}}function attrFunction$1(e,f,g){var c,d,b;return function(){var h,i=g(this);if(i==null){return void this.removeAttribute(e)}h=this.getAttribute(e);return h===i?null:h===c&&i===d?b:b=f(c=h,d=i)}}function attrFunctionNS$1(b,f,g){var d,e,c;return function(){var h,i=g(this);if(i==null){return void this.removeAttributeNS(b.space,b.local)}h=this.getAttributeNS(b.space,b.local);return h===i?null:h===d&&i===e?c:c=f(d=h,e=i)}}var gB=function(d,c){var b=a$(d),e=b==="transform"?dD:dQ;return this.attrTween(d,typeof c==="function"?(b.local?attrFunctionNS$1:attrFunction$1)(b,e,tweenValue(this,"attr."+d,c)):c==null?(b.local?attrRemoveNS$1:attrRemove$1)(b):(b.local?attrConstantNS$1:attrConstant$1)(b,e,c+""))};function attrTweenNS(b,c){function tween(){var d=this,e=c.apply(d,arguments);return e&&function(f){d.setAttributeNS(b.space,b.local,e(f))}}tween._value=c;return tween}function attrTween(c,b){function tween(){var d=this,e=b.apply(d,arguments);return e&&function(f){d.setAttribute(c,e(f))}}tween._value=b;return tween}var fZ=function(e,c){var b="attr."+e;if(arguments.length<2){return (b=this.tween(b))&&b._value}if(c==null){return this.tween(b,null)}if(typeof c!=="function"){throw new Error()}var d=a$(e);return this.tween(b,(d.local?attrTweenNS:attrTween)(d,c))};function delayFunction(c,b){return function(){init(this,c).delay=+b.apply(this,arguments)}}function delayConstant(c,b){return b=+b,function(){init(this,c).delay=b}}var gm=function(b){var c=this._id;return arguments.length?this.each((typeof b==="function"?delayFunction:delayConstant)(c,b)):get$1(this.node(),c).delay};function durationFunction(c,b){return function(){set$1(this,c).duration=+b.apply(this,arguments)}}function durationConstant(c,b){return b=+b,function(){set$1(this,c).duration=b}}var f2=function(b){var c=this._id;return arguments.length?this.each((typeof b==="function"?durationFunction:durationConstant)(c,b)):get$1(this.node(),c).duration};function easeConstant(c,b){if(typeof b!=="function"){throw new Error()}return function(){set$1(this,c).ease=b}}var gC=function(c){var b=this._id;return arguments.length?this.each(easeConstant(b,c)):get$1(this.node(),b).ease};var f8=function(b){if(typeof b!=="function"){b=cG(b)}for(var h=this._groups,i=h.length,g=new Array(i),e=0;e<i;++e){for(var f=h[e],k=f.length,j=g[e]=[],c,d=0;d<k;++d){if((c=f[d])&&b.call(c,c.__data__,d,f)){j.push(c)}}}return new Transition(g,this._parents,this._name,this._id)};var gn=function(g){if(g._id!==this._id){throw new Error()}for(var d=this._groups,h=g._groups,f=d.length,n=h.length,o=Math.min(f,n),e=new Array(f),b=0;b<o;++b){for(var i=d[b],l=h[b],k=i.length,m=e[b]=new Array(k),j,c=0;c<k;++c){if(j=i[c]||l[c]){m[c]=j}}}for(;b<f;++b){e[b]=d[b]}return new Transition(e,this._parents,this._name,this._id)};function start(b){return (b+"").trim().split(/^|\s+/).every(function(c){var d=c.indexOf(".");if(d>=0){c=c.slice(0,d)}return !c||c==="start"})}function onFunction(g,b,e){var c,d,f=start(b)?init:set$1;return function(){var h=f(this,g),i=h.on;if(i!==c){(d=(c=i).copy()).on(b,e)}h.on=d}}var g5=function(b,d){var c=this._id;return arguments.length<2?get$1(this.node(),c).on.on(b):this.each(onFunction(c,b,d))};function removeFunction(b){return function(){var c=this.parentNode;for(var d in this.__transition)if(+d!==b){return}if(c){c.removeChild(this)}}}var f9=function(){return this.on("end.remove",removeFunction(this._id))};var ga=function(d){var l=this._name,i=this._id;if(typeof d!=="function"){d=bK(d)}for(var k=this._groups,m=k.length,j=new Array(m),e=0;e<m;++e){for(var h=k[e],n=h.length,f=j[e]=new Array(n),c,g,b=0;b<n;++b){if((c=h[b])&&(g=d.call(c,c.__data__,b,h))){if("__data__" in c){g.__data__=c.__data__}f[b]=g;bJ(f[b],l,i,b,f,get$1(c,i))}}}return new Transition(j,this._parents,l,i)};var f$=function(c){var n=this._name,h=this._id;if(typeof c!=="function"){c=cq(c)}for(var l=this._groups,q=l.length,j=[],k=[],i=0;i<q;++i){for(var g=l[i],r=g.length,b,e=0;e<r;++e){if(b=g[e]){for(var d=c.call(b,b.__data__,e,g),m,o=get$1(b,h),f=0,p=d.length;f<p;++f){if(m=d[f]){bJ(m,n,h,f,d,o)}}j.push(d);k.push(b)}}}return new Transition(j,k,n,h)};var hq=selection.prototype.constructor;var f_=function(){return new hq(this._groups,this._parents)};function styleRemove$1(b,f){var d,e,c;return function(){var i=aJ(this).getComputedStyle(this,null),g=i.getPropertyValue(b),h=(this.style.removeProperty(b),i.getPropertyValue(b));return g===h?null:g===d&&h===e?c:c=f(d=g,e=h)}}function styleRemoveEnd(b){return function(){this.style.removeProperty(b)}}function styleConstant$1(f,e,d){var c,b;return function(){var g=aJ(this).getComputedStyle(this,null).getPropertyValue(f);return g===d?null:g===c?b:b=e(c=g,d)}}function styleFunction$1(b,f,g){var d,e,c;return function(){var j=aJ(this).getComputedStyle(this,null),i=j.getPropertyValue(b),h=g(this);if(h==null){h=(this.style.removeProperty(b),j.getPropertyValue(b))}return i===h?null:i===d&&h===e?c:c=f(d=i,e=h)}}var go=function(b,c,e){var d=(b+="")==="transform"?dC:dQ;return c==null?this.styleTween(b,styleRemove$1(b,d)).on("end.style."+b,styleRemoveEnd(b)):this.styleTween(b,typeof c==="function"?styleFunction$1(b,d,tweenValue(this,"style."+b,c)):styleConstant$1(b,d,c+""),e)};function styleTween(d,b,c){function tween(){var e=this,f=b.apply(e,arguments);return f&&function(g){e.style.setProperty(d,f(g),c)}}tween._value=b;return tween}var fV=function(e,c,d){var b="style."+(e+="");if(arguments.length<2){return (b=this.tween(b))&&b._value}if(c==null){return this.tween(b,null)}if(typeof c!=="function"){throw new Error()}return this.tween(b,styleTween(e,c,d==null?"":d))};function textConstant$1(b){return function(){this.textContent=b}}function textFunction$1(b){return function(){var c=b(this);this.textContent=c==null?"":c}}var gD=function(b){return this.tween("text",typeof b==="function"?textFunction$1(tweenValue(this,"text",b)):textConstant$1(b==null?"":b+""))};var fW=function(){var h=this._name,j=this._id,i=newId();for(var d=this._groups,k=d.length,g=0;g<k;++g){for(var e=d[g],l=e.length,f,c=0;c<l;++c){if(f=e[c]){var b=get$1(f,j);bJ(f,h,i,c,e,{time:b.time+b.delay+b.duration,delay:0,duration:b.duration,ease:b.ease})}}}return new Transition(d,this._parents,h,i)};var kE=0;function Transition(c,b,d,e){this._groups=c;this._parents=b;this._name=d;this._id=e}function transition(b){return selection().transition(b)}function newId(){return ++kE}var au=selection.prototype;Transition.prototype=transition.prototype={constructor:Transition,select:ga,selectAll:f$,filter:f8,merge:gn,selection:f_,transition:fW,call:au.call,nodes:au.nodes,node:au.node,size:au.size,empty:au.empty,each:au.each,on:g5,attr:gB,attrTween:fZ,style:go,styleTween:fV,text:gD,remove:f9,tween:gp,delay:gm,duration:f2,ease:gC};function linear$1(b){return +b}function quadIn(b){return b*b}function quadOut(b){return b*(2-b)}function quadInOut(b){return ((b*=2)<=1?b*b:--b*(2-b)+1)/2}function cubicIn(b){return b*b*b}function cubicOut(b){return --b*b*b+1}function cubicInOut(b){return ((b*=2)<=1?b*b*b:(b-=2)*b*b+2)/2}var cN=3;var jA=(function custom(b){b=+b;function polyIn(c){return Math.pow(c,b)}polyIn.exponent=custom;return polyIn})(cN);var i9=(function custom(b){b=+b;function polyOut(c){return 1-Math.pow(1-c,b)}polyOut.exponent=custom;return polyOut})(cN);var et=(function custom(b){b=+b;function polyInOut(c){return ((c*=2)<=1?Math.pow(c,b):2-Math.pow(2-c,b))/2}polyInOut.exponent=custom;return polyInOut})(cN);var fR=Math.PI;var fb=fR/2;function sinIn(b){return 1-Math.cos(b*fb)}function sinOut(b){return Math.sin(b*fb)}function sinInOut(b){return (1-Math.cos(fR*b))/2}function expIn(b){return Math.pow(2,10*b-10)}function expOut(b){return 1-Math.pow(2,-10*b)}function expInOut(b){return ((b*=2)<=1?Math.pow(2,10*b-10):2-Math.pow(2,10-10*b))/2}function circleIn(b){return 1-Math.sqrt(1-b*b)}function circleOut(b){return Math.sqrt(1- --b*b)}function circleInOut(b){return ((b*=2)<=1?1-Math.sqrt(1-b*b):Math.sqrt(1-(b-=2)*b)+1)/2}var dy=4/11;var ku=6/11;var kv=8/11;var kw=3/4;var kx=9/11;var ky=10/11;var kz=15/16;var kA=21/22;var kB=63/64;var cc=1/dy/dy;function bounceIn(b){return 1-bounceOut(1-b)}function bounceOut(b){return (b=+b)<dy?cc*b*b:b<kv?cc*(b-=ku)*b+kw:b<ky?cc*(b-=kx)*b+kz:cc*(b-=kA)*b+kB}function bounceInOut(b){return ((b*=2)<=1?1-bounceOut(1-b):bounceOut(b-1)+1)/2}var cH=1.70158;var jq=(function custom(b){b=+b;function backIn(c){return c*c*((b+1)*c-b)}backIn.overshoot=custom;return backIn})(cH);var iS=(function custom(b){b=+b;function backOut(c){return --c*c*((b+1)*c+b)+1}backOut.overshoot=custom;return backOut})(cH);var em=(function custom(b){b=+b;function backInOut(c){return ((c*=2)<1?c*c*((b+1)*c-b):(c-=2)*c*((b+1)*c+b)+2)/2}backInOut.overshoot=custom;return backInOut})(cH);var aP=2*Math.PI;var cB=1;var c1=0.3;var h4=(function custom(b,c){var d=Math.asin(1/(b=Math.max(1,b)))*(c/=aP);function elasticIn(e){return b*Math.pow(2,10*--e)*Math.sin((d-e)/c)}elasticIn.amplitude=function(d){return custom(d,c*aP)};elasticIn.period=function(d){return custom(b,d)};return elasticIn})(cB,c1);var ec=(function custom(b,c){var d=Math.asin(1/(b=Math.max(1,b)))*(c/=aP);function elasticOut(e){return 1-b*Math.pow(2,-10*(e=+e))*Math.sin((e+d)/c)}elasticOut.amplitude=function(d){return custom(d,c*aP)};elasticOut.period=function(d){return custom(b,d)};return elasticOut})(cB,c1);var he=(function custom(b,c){var d=Math.asin(1/(b=Math.max(1,b)))*(c/=aP);function elasticInOut(e){return ((e=e*2-1)<0?b*Math.pow(2,10*e)*Math.sin((d-e)/c):2-b*Math.pow(2,-10*e)*Math.sin((d+e)/c))/2}elasticInOut.amplitude=function(d){return custom(d,c*aP)};elasticInOut.period=function(d){return custom(b,d)};return elasticInOut})(cB,c1);var cl={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(c,d){var b;while(!(b=c.__transition)||!(b=b[d])){if(!(c=c.parentNode)){return cl.time=now(),cl}}return b}var fY=function(b){var c,i;if(b instanceof Transition){c=b._id,b=b._name}else {c=newId(),(i=cl).time=now(),b=b==null?null:b+""}for(var e=this._groups,j=e.length,h=0;h<j;++h){for(var f=e[h],k=f.length,g,d=0;d<k;++d){if(g=f[d]){bJ(g,b,c,d,f,i||inherit(g,c))}}}return new Transition(e,this._parents,b,c)};selection.prototype.interrupt=f0;selection.prototype.transition=fY;var jE=[null];var jo=function(f,b){var c=f.__transition,e,d;if(c){b=b==null?null:b+"";for(d in c){if((e=c[d]).state>cA&&e.name===b){return new Transition([[f]],jE,b,+d)}}}return null};var eb=function(b){return function(){return b}};var hA=function(c,d,b){this.target=c;this.type=d;this.selection=b};function nopropagation$1(){a.event.stopImmediatePropagation()}var bB=function(){a.event.preventDefault();a.event.stopImmediatePropagation()};var ek={name:"drag"};var cs={name:"space"};var ax={name:"handle"};var aw={name:"center"};var cf={name:"x",handles:["e","w"].map(type),input:function(b,c){return b&&[[b[0],c[0][1]],[b[1],c[1][1]]]},output:function(b){return b&&[b[0][0],b[1][0]]}};var cg={name:"y",handles:["n","s"].map(type),input:function(b,c){return b&&[[c[0][0],b[0]],[c[1][0],b[1]]]},output:function(b){return b&&[b[0][1],b[1][1]]}};var kt={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(type),input:function(b){return b},output:function(b){return b}};var W={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var fk={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"};var fl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"};var jF={overlay:+1,selection:+1,n:null,e:+1,s:null,w:-1,nw:-1,ne:+1,se:+1,sw:-1};var jG={overlay:+1,selection:+1,n:-1,e:null,s:+1,w:null,nw:-1,ne:-1,se:+1,sw:+1};function type(b){return {type:b}}function defaultFilter(){return !a.event.button}function defaultExtent(){var b=this.ownerSVGElement||this;return [[0,0],[b.width.baseVal.value,b.height.baseVal.value]]}function local$$1(b){while(!b.__brush)if(!(b=b.parentNode)){return}return b.__brush}function empty(b){return b[0][0]===b[1][0]||b[0][1]===b[1][1]}function brushSelection(c){var b=c.__brush;return b?b.dim.output(b.selection):null}function brushX(){return brush$1(cf)}function brushY(){return brush$1(cg)}var jN=function(){return brush$1(kt)};function brush$1(b){var f=defaultExtent,g=defaultFilter,e=dispatch(brush,"start","brush","end"),c=6,d;function brush(c){var d=c.property("__brush",initialize).selectAll(".overlay").data([type("overlay")]);d.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",W.overlay).merge(d).each(function(){var d=local$$1(this).extent;C(this).attr("x",d[0][0]).attr("y",d[0][1]).attr("width",d[1][0]-d[0][0]).attr("height",d[1][1]-d[0][1])});c.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",W.selection).attr("fill","#777").attr("fill-opacity",0.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var e=c.selectAll(".handle").data(b.handles,function(d){return d.type});e.exit().remove();e.enter().append("rect").attr("class",function(d){return "handle handle--"+d.type}).attr("cursor",function(d){return W[d.type]});c.each(redraw).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",started)}brush.move=function(d,c){if(d.selection){d.on("start.brush",function(){emitter(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){emitter(this,arguments).end()}).tween("brush",function(){var g=this,f=g.__brush,i=emitter(g,arguments),h=f.selection,e=b.input(typeof c==="function"?c.apply(this,arguments):c,f.extent),j=aS(h,e);function tween(h){f.selection=h===1&&empty(e)?null:j(h);redraw.call(g);i.brush()}return h&&e?tween:tween(1)})}else {d.each(function(){var e=this,h=arguments,g=e.__brush,f=b.input(typeof c==="function"?c.apply(e,h):c,g.extent),i=emitter(e,h).beforestart();an(e);g.selection=f==null||empty(f)?null:f;redraw.call(e);i.start().brush().end()})}};function redraw(){var e=C(this),d=local$$1(this).selection;if(d){e.selectAll(".selection").style("display",null).attr("x",d[0][0]).attr("y",d[0][1]).attr("width",d[1][0]-d[0][0]).attr("height",d[1][1]-d[0][1]);e.selectAll(".handle").style("display",null).attr("x",function(e){return e.type[e.type.length-1]==="e"?d[1][0]-c/2:d[0][0]-c/2}).attr("y",function(e){return e.type[0]==="s"?d[1][1]-c/2:d[0][1]-c/2}).attr("width",function(e){return e.type==="n"||e.type==="s"?d[1][0]-d[0][0]+c:c}).attr("height",function(e){return e.type==="e"||e.type==="w"?d[1][1]-d[0][1]+c:c})}else {e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}}function emitter(c,d){return c.__brush.emitter||new Emitter(c,d)}function Emitter(c,d){this.that=c;this.args=d;this.state=c.__brush;this.active=0}Emitter.prototype={beforestart:function(){if(++this.active===1){this.state.emitter=this,this.starting=!0}return this},start:function(){if(this.starting){this.starting=!1,this.emit("start")}return this},brush:function(){this.emit("brush");return this},end:function(){if(--this.active===0){delete this.state.emitter,this.emit("end")}return this},emit:function(c){customEvent(new hA(brush,c,b.output(this.state.selection)),e.apply,e,[c,this.that,this.args])}};function started(){if(a.event.touches){if(a.event.changedTouches.length<a.event.touches.length){return bB()}}else if(d){return}if(!g.apply(this,arguments)){return}var u=this,r=a.event.target.__data__.type,s=(a.event.metaKey?r="overlay":r)==="selection"?ek:(a.event.altKey?aw:ax),c=b===cg?null:jF[r],e=b===cf?null:jG[r],t=local$$1(u),E=t.extent,m=t.selection,y=E[0][0],j,q,w=E[0][1],i,o,v=E[1][0],k,n,x=E[1][1],l,p,f,h,J,D=c&&e&&a.event.shiftKey,G,H,A=af(u),B=A,I=emitter(u,arguments).beforestart();if(r==="overlay"){t.selection=m=[[j=b===cg?y:A[0],i=b===cf?w:A[1]],[k=b===cg?v:j,l=b===cf?x:i]]}else {j=m[0][0];i=m[0][1];k=m[1][0];l=m[1][1]}q=j;o=i;n=k;p=l;var F=C(u).attr("pointer-events","none");var z=F.selectAll(".overlay").attr("cursor",W[r]);if(a.event.touches){F.on("touchmove.brush",moved,!0).on("touchend.brush touchcancel.brush",ended,!0)}else {var K=C(a.event.view).on("keydown.brush",keydowned,!0).on("keyup.brush",keyupped,!0).on("mousemove.brush",moved,!0).on("mouseup.brush",ended,!0);bw(a.event.view)}nopropagation$1();an(u);redraw.call(u);I.start();function moved(){var c=af(u);if(D&&!G&&!H){if(Math.abs(c[0]-B[0])>Math.abs(c[1]-B[1])){H=!0}else {G=!0}}B=c;J=!0;bB();move()}function move(){var d;f=B[0]-A[0];h=B[1]-A[1];switch(s){case cs:case ek:{if(c){f=Math.max(y-j,Math.min(v-k,f)),q=j+f,n=k+f}if(e){h=Math.max(w-i,Math.min(x-l,h)),o=i+h,p=l+h}break};case ax:{if(c<0){f=Math.max(y-j,Math.min(v-j,f)),q=j+f,n=k}else if(c>0){f=Math.max(y-k,Math.min(v-k,f)),q=j,n=k+f}if(e<0){h=Math.max(w-i,Math.min(x-i,h)),o=i+h,p=l}else if(e>0){h=Math.max(w-l,Math.min(x-l,h)),o=i,p=l+h}break};case aw:{if(c){q=Math.max(y,Math.min(v,j-f*c)),n=Math.max(y,Math.min(v,k+f*c))}if(e){o=Math.max(w,Math.min(x,i-h*e)),p=Math.max(w,Math.min(x,l+h*e))}break};}if(n<q){c*=-1;d=j,j=k,k=d;d=q,q=n,n=d;if(r in fk){z.attr("cursor",W[r=fk[r]])}}if(p<o){e*=-1;d=i,i=l,l=d;d=o,o=p,p=d;if(r in fl){z.attr("cursor",W[r=fl[r]])}}if(t.selection){m=t.selection}if(G){q=m[0][0],n=m[1][0]}if(H){o=m[0][1],p=m[1][1]}if(m[0][0]!==q||m[0][1]!==o||m[1][0]!==n||m[1][1]!==p){t.selection=[[q,o],[n,p]];redraw.call(u);I.brush()}}function ended(){nopropagation$1();if(a.event.touches){if(a.event.touches.length){return}if(d){clearTimeout(d)}d=setTimeout(function(){d=null},500);F.on("touchmove.brush touchend.brush touchcancel.brush",null)}else {yesdrag(a.event.view,J);K.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null)}F.attr("pointer-events","all");z.attr("cursor",W.overlay);if(t.selection){m=t.selection}if(empty(m)){t.selection=null,redraw.call(u)}I.end()}function keydowned(){switch(a.event.keyCode){case 16:{D=c&&e;break};case 18:{if(s===ax){if(c){k=n-f*c,j=q+f*c}if(e){l=p-h*e,i=o+h*e}s=aw;move()}break};case 32:{if(s===ax||s===aw){if(c<0){k=n-f}else if(c>0){j=q-f}if(e<0){l=p-h}else if(e>0){i=o-h}s=cs;z.attr("cursor",W.selection);move()}break};default:return;}bB()}function keyupped(){switch(a.event.keyCode){case 16:{if(D){G=H=D=!1;move()}break};case 18:{if(s===aw){if(c<0){k=n}else if(c>0){j=q}if(e<0){l=p}else if(e>0){i=o}s=ax;move()}break};case 32:{if(s===cs){if(a.event.altKey){if(c){k=n-f*c,j=q+f*c}if(e){l=p-h*e,i=o+h*e}s=aw}else {if(c<0){k=n}else if(c>0){j=q}if(e<0){l=p}else if(e>0){i=o}s=ax}z.attr("cursor",W[r]);move()}break};default:return;}bB()}}function initialize(){var c=this.__brush||{selection:null};c.extent=f.apply(this,arguments);c.dim=b;return c}brush.extent=function(c){return arguments.length?(f=typeof c==="function"?c:eb([[+c[0][0],+c[0][1]],[+c[1][0],+c[1][1]]]),brush):f};brush.filter=function(c){return arguments.length?(g=typeof c==="function"?c:eb(!!c),brush):g};brush.handleSize=function(d){return arguments.length?(c=+d,brush):c};brush.on=function(){var c=e.on.apply(e,arguments);return c===e?brush:c};return brush}var fD=Math.cos;var fH=Math.sin;var fz=Math.PI;var bG=fz/2;var fq=fz*2;var fm=Math.max;function compareValue(b){return function(c,d){return b(c.source.value+c.target.value,d.source.value+d.target.value)}}var jO=function(){var e=0,d=null,c=null,b=null;function chord(l){var f=l.length,m=[],t=N(f),q=[],n=[],x=n.groups=new Array(f),r=new Array(f*f),k,i,v,u,g,h;k=0,g=-1;while(++g<f){i=0,h=-1;while(++h<f){i+=l[g][h]}m.push(i);q.push(N(f));k+=i}if(d){t.sort(function(b,c){return d(m[b],m[c])})}if(c){q.forEach(function(d,b){d.sort(function(e,f){return c(l[b][e],l[b][f])})})}k=fm(0,fq-e*f)/k;u=k?e:fq/f;i=0,g=-1;while(++g<f){v=i,h=-1;while(++h<f){var j=t[g],s=q[j][h],w=l[j][s],y=i,z=i+=w*k;r[s*f+j]={index:j,subindex:s,startAngle:y,endAngle:z,value:w}}x[j]={index:j,startAngle:v,endAngle:i,value:m[j]};i+=u}g=-1;while(++g<f){h=g-1;while(++h<f){var o=r[h*f+g],p=r[g*f+h];if(o.value||p.value){n.push(o.value<p.value?{source:p,target:o}:{source:o,target:p})}}}return b?n.sort(b):n}chord.padAngle=function(b){return arguments.length?(e=fm(0,b),chord):e};chord.sortGroups=function(b){return arguments.length?(d=b,chord):d};chord.sortSubgroups=function(b){return arguments.length?(c=b,chord):c};chord.sortChords=function(c){return arguments.length?(c==null?b=null:(b=compareValue(c))._=c,chord):b&&b._};return chord};var jd=Array.prototype.slice;var cu=function(b){return function(){return b}};var di=Math.PI;var da=2*di;var am=1.0E-6;var hV=da-am;function Path(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function path(){return new Path()}Path.prototype=path.prototype={constructor:Path,moveTo:function(b,c){this._+="M"+(this._x0=this._x1=+b)+","+(this._y0=this._y1=+c)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(b,c){this._+="L"+(this._x1=+b)+","+(this._y1=+c)},quadraticCurveTo:function(b,c,d,e){this._+="Q"+(+b)+","+(+c)+","+(this._x1=+d)+","+(this._y1=+e)},bezierCurveTo:function(b,d,c,e,f,g){this._+="C"+(+b)+","+(+d)+","+(+c)+","+(+e)+","+(this._x1=+f)+","+(this._y1=+g)},arcTo:function(b,c,i,j,d){b=+b,c=+c,i=+i,j=+j,d=+d;var s=this._x1,t=this._y1,g=i-b,h=j-c,e=s-b,f=t-c,k=e*e+f*f;if(d<0){throw new Error("negative radius: "+d)}if(this._x1===null){this._+="M"+(this._x1=b)+","+(this._y1=c)}else if(!(k>am)){}else if(!(Math.abs(f*g-h*e)>am)||!d){this._+="L"+(this._x1=b)+","+(this._y1=c)}else {var m=i-s,n=j-t,o=g*g+h*h,v=m*m+n*n,q=Math.sqrt(o),p=Math.sqrt(k),u=d*Math.tan((di-Math.acos((o+k-v)/(2*q*p)))/2),l=u/p,r=u/q;if(Math.abs(l-1)>am){this._+="L"+(b+l*e)+","+(c+l*f)}this._+="A"+d+","+d+",0,0,"+(+(f*m>e*n))+","+(this._x1=b+r*g)+","+(this._y1=c+r*h)}},arc:function(d,e,b,f,g,k){d=+d,e=+e,b=+b;var l=b*Math.cos(f),m=b*Math.sin(f),h=d+l,i=e+m,j=1^k,c=k?f-g:g-f;if(b<0){throw new Error("negative radius: "+b)}if(this._x1===null){this._+="M"+h+","+i}else if(Math.abs(this._x1-h)>am||Math.abs(this._y1-i)>am){this._+="L"+h+","+i}if(!b){return}if(c<0){c=c%da+da}if(c>hV){this._+="A"+b+","+b+",0,1,"+j+","+(d-l)+","+(e-m)+"A"+b+","+b+",0,1,"+j+","+(this._x1=h)+","+(this._y1=i)}else if(c>am){this._+="A"+b+","+b+",0,"+(+(c>=di))+","+j+","+(this._x1=d+b*Math.cos(g))+","+(this._y1=e+b*Math.sin(g))}},rect:function(d,e,b,c){this._+="M"+(this._x0=this._x1=+d)+","+(this._y0=this._y1=+e)+"h"+(+b)+"v"+(+c)+"h"+(-b)+"Z"},toString:function(){return this._}};function defaultSource(b){return b.source}function defaultTarget(b){return b.target}function defaultRadius(b){return b.radius}function defaultStartAngle(b){return b.startAngle}function defaultEndAngle(b){return b.endAngle}var jD=function(){var f=defaultSource,g=defaultTarget,e=defaultRadius,c=defaultStartAngle,d=defaultEndAngle,b=null;function ribbon(){var k,h=jd.call(arguments),r=f.apply(this,h),s=g.apply(this,h),l=+e.apply(this,(h[0]=r,h)),i=c.apply(this,h)-bG,n=d.apply(this,h)-bG,o=l*fD(i),p=l*fH(i),m=+e.apply(this,(h[0]=s,h)),j=c.apply(this,h)-bG,q=d.apply(this,h)-bG;if(!b){b=k=path()}b.moveTo(o,p);b.arc(0,0,l,i,n);if(i!==j||n!==q){b.quadraticCurveTo(0,0,m*fD(j),m*fH(j));b.arc(0,0,m,j,q)}b.quadraticCurveTo(0,0,o,p);b.closePath();if(k){return b=null,k+""||null}}ribbon.radius=function(b){return arguments.length?(e=typeof b==="function"?b:cu(+b),ribbon):e};ribbon.startAngle=function(b){return arguments.length?(c=typeof b==="function"?b:cu(+b),ribbon):c};ribbon.endAngle=function(b){return arguments.length?(d=typeof b==="function"?b:cu(+b),ribbon):d};ribbon.source=function(b){return arguments.length?(f=b,ribbon):f};ribbon.target=function(b){return arguments.length?(g=b,ribbon):g};ribbon.context=function(c){return arguments.length?((b=c==null?null:c),ribbon):b};return ribbon};var H="$";function Map(){}Map.prototype=map$1.prototype={constructor:Map,has:function(b){return (H+b) in this},get:function(b){return this[H+b]},set:function(c,b){this[H+c]=b;return this},remove:function(c){var b=H+c;return b in this&&delete this[b]},clear:function(){for(var b in this)if(b[0]===H){delete this[b]}},keys:function(){var c=[];for(var b in this)if(b[0]===H){c.push(b.slice(1))}return c},values:function(){var c=[];for(var b in this)if(b[0]===H){c.push(this[b])}return c},entries:function(){var c=[];for(var b in this)if(b[0]===H){c.push({key:b.slice(1),value:this[b]})}return c},size:function(){var b=0;for(var c in this)if(c[0]===H){++b}return b},empty:function(){for(var b in this)if(b[0]===H){return !1}return !0},each:function(c){for(var b in this)if(b[0]===H){c(this[b],b.slice(1),this)}}};function map$1(b,f){var d=new Map();if(b instanceof Map){b.each(function(c,e){d.set(e,c)})}else if(Array.isArray(b)){var c=-1,g=b.length,h;if(f==null){while(++c<g)d.set(c,b[c])}else {while(++c<g)d.set(f(h=b[c],c,b),h)}}else if(b){for(var e in b)d.set(e,b[e])}return d}var ka=function(){var b=[],f=[],e,d,c;function apply(c,g,i,j){if(g>=b.length){return d!=null?d(c):(e!=null?c.sort(e):c)}var n=-1,p=c.length,o=b[g++],k,h,f=map$1(),m,l=i();while(++n<p){if(m=f.get(k=o(h=c[n])+"")){m.push(h)}else {f.set(k,[h])}}f.each(function(b,d){j(l,d,apply(b,g,i,j))});return l}function entries(g,e){if(++e>b.length){return g}var c,h=f[e-1];if(d!=null&&e>=b.length){c=g.entries()}else {c=[],g.each(function(d,b){c.push({key:b,values:entries(d,e)})})}return h!=null?c.sort(function(b,c){return h(b.key,c.key)}):c}return c={object:function(b){return apply(b,0,createObject,setObject)},map:function(b){return apply(b,0,createMap,setMap)},entries:function(b){return entries(apply(b,0,createMap,setMap),0)},key:function(d){b.push(d);return c},sortKeys:function(d){f[b.length-1]=d;return c},sortValues:function(b){e=b;return c},rollup:function(b){d=b;return c}}};function createObject(){return {}}function setObject(b,d,c){b[d]=c}function createMap(){return map$1()}function setMap(d,c,b){d.set(c,b)}function Set(){}var as=map$1.prototype;Set.prototype=set$2.prototype={constructor:Set,has:as.has,add:function(b){b+="";this[H+b]=b;return this},remove:as.remove,clear:as.clear,values:as.keys,size:as.size,empty:as.empty,each:as.each};function set$2(b,e){var d=new Set();if(b instanceof Set){b.each(function(c){d.add(c)})}else if(b){var c=-1,f=b.length;if(e==null){while(++c<f)d.add(b[c])}else {while(++c<f)d.add(e(b[c],c,b))}}return d}var j7=function(d){var b=[];for(var c in d)b.push(c);return b};var jK=function(c){var b=[];for(var d in c)b.push(c[d]);return b};var iY=function(d){var b=[];for(var c in d)b.push({key:c,value:d[c]});return b};function objectConverter(b){return new Function("d","return {"+b.map(function(c,d){return JSON.stringify(c)+": d["+d+"]"}).join(",")+"}")}function customConverter(b,d){var c=objectConverter(b);return function(e,f){return d(c(e),f,b)}}function inferColumns(d){var b=Object.create(null),c=[];d.forEach(function(f){for(var e in f){if(!(e in b)){c.push(b[e]=e)}}});return c}var dq=function(b){var d=new RegExp("[\""+b+"\n\r]"),c=b.charCodeAt(0);function parse(g,f){var c,d,e=parseRows(g,function(e,h){if(c){return c(e,h-1)}d=e,c=f?customConverter(e,f):objectConverter(e)});e.columns=d;return e}function parseRows(d,m){var l={},i={},k=[],j=d.length,e=0,n=0,g,f;function token(){if(e>=j){return i}if(f){return f=!1,l}var k=e,h;if(d.charCodeAt(k)===34){var g=k;while(g++<j){if(d.charCodeAt(g)===34){if(d.charCodeAt(g+1)!==34){break}++g}}e=g+2;h=d.charCodeAt(g+1);if(h===13){f=!0;if(d.charCodeAt(g+2)===10){++e}}else if(h===10){f=!0}return d.slice(k+1,g).replace(/""/g,"\"")}while(e<j){var n=1;h=d.charCodeAt(e++);if(h===10){f=!0}else if(h===13){f=!0;if(d.charCodeAt(e)===10){++e,++n}}else if(h!==c){continue}return d.slice(k,e-n)}return d.slice(k)}while((g=token())!==i){var h=[];while(g!==l&&g!==i){h.push(g);g=token()}if(m&&(h=m(h,n++))==null){continue}k.push(h)}return k}function format(d,c){if(c==null){c=inferColumns(d)}return [c.map(formatValue).join(b)].concat(d.map(function(e){return c.map(function(f){return formatValue(e[f])}).join(b)})).join("\n")}function formatRows(c){return c.map(formatRow).join("\n")}function formatRow(c){return c.map(formatValue).join(b)}function formatValue(c){return c==null?"":d.test(c+="")?"\""+c.replace(/\"/g,"\"\"")+"\"":c}return {parse:parse,parseRows:parseRows,format:format,formatRows:formatRows}};var b_=dq(",");var ey=b_.parse;var ha=b_.parseRows;var h3=b_.format;var gY=b_.formatRows;var b3=dq("\t");var eL=b3.parse;var hn=b3.parseRows;var it=b3.format;var g6=b3.formatRows;var iw=function(b,c){var d;if(b==null){b=0}if(c==null){c=0}function force(){var e,i=d.length,f,g=0,h=0;for(e=0;e<i;++e){f=d[e],g+=f.x,h+=f.y}for(g=g/i-b,h=h/i-c,e=0;e<i;++e){f=d[e],f.x-=g,f.y-=h}}force.initialize=function(e){d=e};force.x=function(d){return arguments.length?(b=+d,force):b};force.y=function(d){return arguments.length?(c=+d,force):c};return force};var r=function(b){return function(){return b}};var aa=function(){return (Math.random()-0.5)*1.0E-6};var iO=function(b){var c=+this._x.call(null,b),d=+this._y.call(null,b);return add(this.cover(c,d),c,d,b)};function add(b,o,p,t){if(isNaN(o)||isNaN(p)){return b}var c,d=b._root,g={data:t},k=b._x0,m=b._y0,l=b._x1,n=b._y1,e,f,q,r,j,i,h,s;if(!d){return b._root=g,b}while(d.length){if(j=o>=(e=(k+l)/2)){k=e}else {l=e}if(i=p>=(f=(m+n)/2)){m=f}else {n=f}if(c=d,!(d=d[h=i<<1|j])){return c[h]=g,b}}q=+b._x.call(null,d.data);r=+b._y.call(null,d.data);if(o===q&&p===r){return g.next=d,c?c[h]=g:b._root=g,b}do{c=c?c[h]=new Array(4):b._root=new Array(4);if(j=o>=(e=(k+l)/2)){k=e}else {l=e}if(i=p>=(f=(m+n)/2)){m=f}else {n=f}}while((h=i<<1|j)===(s=(r>=f)<<1|(q>=e)));return c[s]=d,c[h]=g,b}function addAll(j){var m,b,i=j.length,c,d,k=new Array(i),l=new Array(i),e=Infinity,g=Infinity,f=-Infinity,h=-Infinity;for(b=0;b<i;++b){if(isNaN(c=+this._x.call(null,m=j[b]))||isNaN(d=+this._y.call(null,m))){continue}k[b]=c;l[b]=d;if(c<e){e=c}if(c>f){f=c}if(d<g){g=d}if(d>h){h=d}}if(f<e){e=this._x0,f=this._x1}if(h<g){g=this._y0,h=this._y1}this.cover(e,g).cover(f,h);for(b=0;b<i;++b){add(this,k[b],l[b],j[b])}return this}var hX=function(h,i){if(isNaN(h=+h)||isNaN(i=+i)){return this}var c=this._x0,f=this._y0,e=this._x1,g=this._y1;if(isNaN(c)){e=(c=Math.floor(h))+1;g=(f=Math.floor(i))+1}else if(c>h||h>e||f>i||i>g){var d=e-c,j=this._root,b,k;switch(k=(i<(f+g)/2)<<1|(h<(c+e)/2)){case 0:{do b=new Array(4),b[k]=j,j=b;while(d*=2,e=c+d,g=f+d,h>e||i>g);break};case 1:{do b=new Array(4),b[k]=j,j=b;while(d*=2,c=e-d,g=f+d,c>h||i>g);break};case 2:{do b=new Array(4),b[k]=j,j=b;while(d*=2,e=c+d,f=g-d,h>e||f>i);break};case 3:{do b=new Array(4),b[k]=j,j=b;while(d*=2,c=e-d,f=g-d,c>h||f>i);break};}if(this._root&&this._root.length){this._root=j}}else {return this}this._x0=c;this._y0=f;this._x1=e;this._y1=g;return this};var ip=function(){var b=[];this.visit(function(c){if(!c.length){do b.push(c.data);while(c=c.next)}});return b};var hx=function(b){return arguments.length?this.cover(+b[0][0],+b[0][1]).cover(+b[1][0],+b[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]]};var u=function(b,c,e,d,f){this.node=b;this.x0=c;this.y0=e;this.x1=d;this.y1=f};var iq=function(f,g,d){var t,j=this._x0,n=this._y0,k,o,l,p,m=this._x1,q=this._y1,b=[],c=this._root,e,s;if(c){b.push(new u(c,j,n,m,q))}if(d==null){d=Infinity}else {j=f-d,n=g-d;m=f+d,q=g+d;d*=d}while(e=b.pop()){if(!(c=e.node)||(k=e.x0)>m||(o=e.y0)>q||(l=e.x1)<j||(p=e.y1)<n){continue}if(c.length){var h=(k+l)/2,i=(o+p)/2;b.push(new u(c[3],h,i,l,p),new u(c[2],k,i,h,p),new u(c[1],h,o,l,i),new u(c[0],k,o,h,i));if(s=(g>=i)<<1|(f>=h)){e=b[b.length-1];b[b.length-1]=b[b.length-1-s];b[b.length-1-s]=e}}else {var w=f-+this._x.call(null,c.data),x=g-+this._y.call(null,c.data),v=w*w+x*x;if(v<d){var r=Math.sqrt(d=v);j=f-r,n=g-r;m=f+r,q=g+r;t=c.data}}}return t};var hy=function(j){if(isNaN(r=+this._x.call(null,j))||isNaN(s=+this._y.call(null,j))){return this}var c,b=this._root,g,f,e,m=this._x0,o=this._y0,n=this._x1,p=this._y1,r,s,h,i,l,k,d,q;if(!b){return this}if(b.length){while(!0){if(l=r>=(h=(m+n)/2)){m=h}else {n=h}if(k=s>=(i=(o+p)/2)){o=i}else {p=i}if(!(c=b,b=b[d=k<<1|l])){return this}if(!b.length){break}if(c[(d+1)&3]||c[(d+2)&3]||c[(d+3)&3]){g=c,q=d}}}while(b.data!==j)if(!(f=b,b=b.next)){return this}if(e=b.next){delete b.next}if(f){return (e?f.next=e:delete f.next),this}if(!c){return this._root=e,this}e?c[d]=e:delete c[d];if((b=c[0]||c[1]||c[2]||c[3])&&b===(c[3]||c[2]||c[1]||c[0])&&!b.length){if(g){g[q]=b}else {this._root=b}}return this};function removeAll(c){for(var b=0,d=c.length;b<d;++b)this.remove(c[b]);return this}var ir=function(){return this._root};var is=function(){var b=0;this.visit(function(c){if(!c.length){do ++b;while(c=c.next)}});return b};var hY=function(l){var d=[],e,c=this._root,b,f,i,g,j;if(c){d.push(new u(c,this._x0,this._y0,this._x1,this._y1))}while(e=d.pop()){if(!l(c=e.node,f=e.x0,i=e.y0,g=e.x1,j=e.y1)&&c.length){var h=(f+g)/2,k=(i+j)/2;if(b=c[3]){d.push(new u(b,h,k,g,j))}if(b=c[2]){d.push(new u(b,f,k,h,j))}if(b=c[1]){d.push(new u(b,h,i,g,k))}if(b=c[0]){d.push(new u(b,f,i,h,k))}}}return this};var gE=function(m){var d=[],l=[],b;if(this._root){d.push(new u(this._root,this._x0,this._y0,this._x1,this._y1))}while(b=d.pop()){var e=b.node;if(e.length){var c,h=b.x0,j=b.y0,i=b.x1,k=b.y1,f=(h+i)/2,g=(j+k)/2;if(c=e[0]){d.push(new u(c,h,j,f,g))}if(c=e[1]){d.push(new u(c,f,j,i,g))}if(c=e[2]){d.push(new u(c,h,g,f,k))}if(c=e[3]){d.push(new u(c,f,g,i,k))}}l.push(b)}while(b=l.pop()){m(b.node,b.x0,b.y0,b.x1,b.y1)}return this};function defaultX(b){return b[0]}var jI=function(b){return arguments.length?(this._x=b,this):this._x};function defaultY(b){return b[1]}var jJ=function(b){return arguments.length?(this._y=b,this):this._y};function quadtree(b,d,e){var c=new Quadtree(d==null?defaultX:d,e==null?defaultY:e,NaN,NaN,NaN,NaN);return b==null?c:c.addAll(b)}function Quadtree(f,g,b,d,c,e){this._x=f;this._y=g;this._x0=b;this._y0=d;this._x1=c;this._y1=e;this._root=undefined}function leaf_copy(b){var c={data:b.data},d=c;while(b=b.next)d=d.next={data:b.data};return c}var s=quadtree.prototype=Quadtree.prototype;s.copy=function(){var c=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),b=this._root,f,e;if(!b){return c}if(!b.length){return c._root=leaf_copy(b),c}f=[{source:b,target:c._root=new Array(4)}];while(b=f.pop()){for(var d=0;d<4;++d){if(e=b.source[d]){if(e.length){f.push({source:e,target:b.target[d]=new Array(4)})}else {b.target[d]=leaf_copy(e)}}}}return c};s.add=iO;s.addAll=addAll;s.cover=hX;s.data=ip;s.extent=hx;s.find=iq;s.remove=hy;s.removeAll=removeAll;s.root=ir;s.size=is;s.visit=hY;s.visitAfter=gE;s.x=jI;s.y=jJ;function x(b){return b.x+b.vx}function y(b){return b.y+b.vy}var iV=function(c){var b,d,f=1,e=1;if(typeof c!=="function"){c=r(c==null?1:+c)}function force(){var k,o=b.length,l,g,i,j,h,m;for(var n=0;n<e;++n){l=quadtree(b,x,y).visitAfter(prepare);for(k=0;k<o;++k){g=b[k];h=d[g.index],m=h*h;i=g.x+g.vx;j=g.y+g.vy;l.visit(apply)}}function apply(o,p,r,q,s){var e=o.data,n=o.r,b=h+n;if(e){if(e.index>g.index){var k=i-e.x-e.vx,l=j-e.y-e.vy,d=k*k+l*l;if(d<b*b){if(k===0){k=aa(),d+=k*k}if(l===0){l=aa(),d+=l*l}d=(b-(d=Math.sqrt(d)))/d*f;g.vx+=(k*=d)*(b=(n*=n)/(m+n));g.vy+=(l*=d)*b;e.vx-=k*(b=1-b);e.vy-=l*b}}return}return p>i+b||q<i-b||r>j+b||s<j-b}}function prepare(b){if(b.data){return b.r=d[b.data.index]}for(var e=b.r=0;e<4;++e){if(b[e]&&b[e].r>b.r){b.r=b[e].r}}}function initialize(){if(!b){return}var e,g=b.length,f;d=new Array(g);for(e=0;e<g;++e)f=b[e],d[f.index]=+c(f,e,b)}force.initialize=function(d){b=d;initialize()};force.iterations=function(b){return arguments.length?(e=+b,force):e};force.strength=function(b){return arguments.length?(f=+b,force):f};force.radius=function(b){return arguments.length?(c=typeof b==="function"?b:r(+b),initialize(),force):c};return force};function index(b){return b.index}function find(d,b){var c=d.get(b);if(!c){throw new Error("missing: "+b)}return c}var j8=function(b){var k=index,i=defaultStrength,g,h=r(30),f,d,c,j,e=1;if(b==null){b=[]}function defaultStrength(d){return 1/Math.min(c[d.source.index],c[d.target.index])}function force(p){for(var o=0,q=b.length;o<e;++o){for(var h=0,n,c,d,k,l,i,m;h<q;++h){n=b[h],c=n.source,d=n.target;k=d.x+d.vx-c.x-c.vx||aa();l=d.y+d.vy-c.y-c.vy||aa();i=Math.sqrt(k*k+l*l);i=(i-f[h])/i*p*g[h];k*=i,l*=i;d.vx-=k*(m=j[h]);d.vy-=l*m;c.vx+=k*(m=1-m);c.vy+=l*m}}}function initialize(){if(!d){return}var h,m=d.length,i=b.length,l=map$1(d,k),e;for(h=0,c=new Array(m);h<i;++h){e=b[h],e.index=h;if(typeof e.source!=="object"){e.source=find(l,e.source)}if(typeof e.target!=="object"){e.target=find(l,e.target)}c[e.source.index]=(c[e.source.index]||0)+1;c[e.target.index]=(c[e.target.index]||0)+1}for(h=0,j=new Array(i);h<i;++h){e=b[h],j[h]=c[e.source.index]/(c[e.source.index]+c[e.target.index])}g=new Array(i),initializeStrength();f=new Array(i),initializeDistance()}function initializeStrength(){if(!d){return}for(var c=0,e=b.length;c<e;++c){g[c]=+i(b[c],c,b)}}function initializeDistance(){if(!d){return}for(var c=0,e=b.length;c<e;++c){f[c]=+h(b[c],c,b)}}force.initialize=function(c){d=c;initialize()};force.links=function(c){return arguments.length?(b=c,initialize(),force):b};force.id=function(c){return arguments.length?(k=c,force):k};force.iterations=function(c){return arguments.length?(e=+c,force):e};force.strength=function(c){return arguments.length?(i=typeof c==="function"?c:r(+c),initializeStrength(),force):i};force.distance=function(c){return arguments.length?(h=typeof c==="function"?c:r(+c),initializeDistance(),force):h};return force};function x$1(b){return b.x}function y$1(b){return b.y}var g_=10;var hf=Math.PI*(3-Math.sqrt(5));var hU=function(c){var b,d=1,g=0.001,j=1-Math.pow(g,1/300),i=0,f=0.6,e=map$1(),k=timer(step),h=dispatch("tick","end");if(c==null){c=[]}function step(){tick();h.call("tick",b);if(d<g){k.stop();h.call("end",b)}}function tick(){var g,h=c.length,b;d+=(i-d)*j;e.each(function(b){b(d)});for(g=0;g<h;++g){b=c[g];if(b.fx==null){b.x+=b.vx*=f}else {b.x=b.fx,b.vx=0}if(b.fy==null){b.y+=b.vy*=f}else {b.y=b.fy,b.vy=0}}}function initializeNodes(){for(var d=0,g=c.length,b;d<g;++d){b=c[d],b.index=d;if(isNaN(b.x)||isNaN(b.y)){var e=g_*Math.sqrt(d),f=d*hf;b.x=e*Math.cos(f);b.y=e*Math.sin(f)}if(isNaN(b.vx)||isNaN(b.vy)){b.vx=b.vy=0}}}function initializeForce(b){if(b.initialize){b.initialize(c)}return b}initializeNodes();return b={tick:tick,restart:function(){return k.restart(step),b},stop:function(){return k.stop(),b},nodes:function(d){return arguments.length?(c=d,initializeNodes(),e.each(initializeForce),b):c},alpha:function(e){return arguments.length?(d=+e,b):d},alphaMin:function(d){return arguments.length?(g=+d,b):g},alphaDecay:function(d){return arguments.length?(j=+d,b):+j},alphaTarget:function(d){return arguments.length?(i=+d,b):i},velocityDecay:function(d){return arguments.length?(f=1-d,b):1-f},force:function(d,f){return arguments.length>1?((f==null?e.remove(d):e.set(d,initializeForce(f))),b):e.get(d)},find:function(k,l,b){var e=0,j=c.length,g,h,f,d,i;if(b==null){b=Infinity}else {b*=b}for(e=0;e<j;++e){d=c[e];g=k-d.x;h=l-d.y;f=g*g+h*h;if(f<b){i=d,b=f}}return i},on:function(d,e){return arguments.length>1?(h.on(d,e),b):h.on(d)}}};var iF=function(){var c,b,g,h=r(-30),f,d=1,e=Infinity,i=0.81;function force(f){var d,h=c.length,e=quadtree(c,x$1,y$1).visitAfter(accumulate);for(g=f,d=0;d<h;++d)b=c[d],e.visit(apply)}function initialize(){if(!c){return}var b,e=c.length,d;f=new Array(e);for(b=0;b<e;++b)d=c[b],f[d.index]=+h(d,b,c)}function accumulate(c){var d=0,b,e,h,i,g;if(c.length){for(h=i=g=0;g<4;++g){if((b=c[g])&&(e=b.value)){d+=e,h+=e*b.x,i+=e*b.y}}c.x=h/d;c.y=i/d}else {b=c;b.x=b.data.x;b.y=b.data.y;do d+=f[b.data.index];while(b=b.next)}c.value=d}function apply(h,m,o,n){if(!h.value){return !0}var j=h.x-b.x,k=h.y-b.y,l=n-m,c=j*j+k*k;if(l*l/i<c){if(c<e){if(j===0){j=aa(),c+=j*j}if(k===0){k=aa(),c+=k*k}if(c<d){c=Math.sqrt(d*c)}b.vx+=j*h.value*g/c;b.vy+=k*h.value*g/c}return !0}else if(h.length||c>=e){return}if(h.data!==b||h.next){if(j===0){j=aa(),c+=j*j}if(k===0){k=aa(),c+=k*k}if(c<d){c=Math.sqrt(d*c)}}do if(h.data!==b){l=f[h.data.index]*g/c;b.vx+=j*l;b.vy+=k*l}while(h=h.next)}force.initialize=function(b){c=b;initialize()};force.strength=function(b){return arguments.length?(h=typeof b==="function"?b:r(+b),initialize(),force):h};force.distanceMin=function(b){return arguments.length?(d=b*b,force):Math.sqrt(d)};force.distanceMax=function(b){return arguments.length?(e=b*b,force):Math.sqrt(e)};force.theta=function(b){return arguments.length?(i=b*b,force):Math.sqrt(i)};return force};var kp=function(c){var e=r(0.1),b,d,f;if(typeof c!=="function"){c=r(c==null?0:+c)}function force(h){for(var e=0,i=b.length,g;e<i;++e){g=b[e],g.vx+=(f[e]-g.x)*d[e]*h}}function initialize(){if(!b){return}var g,h=b.length;d=new Array(h);f=new Array(h);for(g=0;g<h;++g){d[g]=isNaN(f[g]=+c(b[g],g,b))?0:+e(b[g],g,b)}}force.initialize=function(d){b=d;initialize()};force.strength=function(b){return arguments.length?(e=typeof b==="function"?b:r(+b),initialize(),force):e};force.x=function(b){return arguments.length?(c=typeof b==="function"?b:r(+b),initialize(),force):c};return force};var kr=function(c){var e=r(0.1),b,d,f;if(typeof c!=="function"){c=r(c==null?0:+c)}function force(h){for(var e=0,i=b.length,g;e<i;++e){g=b[e],g.vy+=(f[e]-g.y)*d[e]*h}}function initialize(){if(!b){return}var g,h=b.length;d=new Array(h);f=new Array(h);for(g=0;g<h;++g){d[g]=isNaN(f[g]=+c(b[g],g,b))?0:+e(b[g],g,b)}}force.initialize=function(d){b=d;initialize()};force.strength=function(b){return arguments.length?(e=typeof b==="function"?b:r(+b),initialize(),force):e};force.y=function(b){return arguments.length?(c=typeof b==="function"?b:r(+b),initialize(),force):c};return force};var bs=function(b,e){if((d=(b=e?b.toExponential(e-1):b.toExponential()).indexOf("e"))<0){return null}var d,c=b.slice(0,d);return [c.length>1?c[0]+c.slice(2):c,+b.slice(d+1)]};var aA=function(b){return b=bs(Math.abs(b)),b?b[1]:NaN};var hv=function(b,c){return function(h,f){var g=h.length,j=[],i=0,d=b[0],e=0;while(g>0&&d>0){if(e+d+1>f){d=Math.max(1,f-e)}j.push(h.substring(g-=d,g+d));if((e+=d+1)>f){break}d=b[i=(i+1)%b.length]}return j.reverse().join(c)}};var gJ=function(b){return function(c){return c.replace(/[0-9]/g,function(d){return b[+d]})}};var g$=function(c,g){c=c.toPrecision(g);h: for(var f=c.length,d=1,b=-1,e;d<f;++d){switch(c[d]){case ".":b=e=d;break;case "0":if(b===0){b=d};e=d;break;case "e":break h;default:if(b>0){b=0};break;}}return b>0?c.slice(0,b)+c.slice(e+1):c};var dT;var gd=function(f,h){var d=bs(f,h);if(!d){return f+""}var c=d[0],g=d[1],b=g-(dT=Math.max(-8,Math.min(8,Math.floor(g/3)))*3)+1,e=c.length;return b===e?c:b>e?c+new Array(b-e+1).join("0"):b>0?c.slice(0,b)+"."+c.slice(b):"0."+new Array(1-b).join("0")+bs(f,Math.max(0,h+b-1))[0]};var dW=function(e,f){var d=bs(e,f);if(!d){return e+""}var b=d[0],c=d[1];return c<0?"0."+new Array(-c).join("0")+b:b.length>c+1?b.slice(0,c+1)+"."+b.slice(c+1):b+new Array(c-b.length+2).join("0")};var d5={"":g$,"%":function(c,b){return (c*100).toFixed(b)},"b":function(b){return Math.round(b).toString(2)},"c":function(b){return b+""},"d":function(b){return Math.round(b).toString(10)},"e":function(c,b){return c.toExponential(b)},"f":function(c,b){return c.toFixed(b)},"g":function(c,b){return c.toPrecision(b)},"o":function(b){return Math.round(b).toString(8)},"p":function(c,b){return dW(c*100,b)},"r":dW,"s":gd,"X":function(b){return Math.round(b).toString(16).toUpperCase()},"x":function(b){return Math.round(b).toString(16)}};var kI=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function formatSpecifier(b){return new FormatSpecifier(b)}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(g){if(!(b=kI.exec(g))){throw new Error("invalid format: "+g)}var b,e=b[1]||" ",d=b[2]||">",l=b[3]||"-",j=b[4]||"",f=!!b[5],k=b[6]&&+b[6],h=!!b[7],i=b[8]&&+b[8].slice(1),c=b[9]||"";if(c==="n"){h=!0,c="g"}else if(!d5[c]){c=""}if(f||(e==="0"&&d==="=")){f=!0,e="0",d="="}this.fill=e;this.align=d;this.sign=l;this.symbol=j;this.zero=f;this.width=k;this.comma=h;this.precision=i;this.type=c}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var ef=function(b){return b};var eD=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];var dY=function(b){var d=b.grouping&&b.thousands?hv(b.grouping,b.thousands):ef,c=b.currency,f=b.decimal,e=b.numerals?gJ(b.numerals):ef;function newFormat(g){g=formatSpecifier(g);var t=g.fill,s=g.align,i=g.sign,k=g.symbol,o=g.zero,l=g.width,n=g.comma,j=g.precision,h=g.type;var q=k==="$"?c[0]:k==="#"&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",r=k==="$"?c[1]:/[%p]/.test(h)?"%":"";var m=d5[h],p=!h||/[defgprs%]/.test(h);j=j==null?(h?6:12):/[gprs]/.test(h)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function format(c){var v=q,k=r,w,A,z;if(h==="c"){k=m(c)+k;c=""}else {c=+c;var x=c<0;c=m(Math.abs(c),j);if(x&&+c===0){x=!1}v=(x?(i==="("?i:"-"):i==="-"||i==="("?"":i)+v;k=k+(h==="s"?eD[8+dT/3]:"")+(x&&i==="("?")":"");if(p){w=-1,A=c.length;while(++w<A){if(z=c.charCodeAt(w),48>z||z>57){k=(z===46?f+c.slice(w+1):c.slice(w))+k;c=c.slice(0,w);break}}}}if(n&&!o){c=d(c,Infinity)}var y=v.length+c.length+k.length,u=y<l?new Array(l-y+1).join(t):"";if(n&&o){c=d(u+c,u.length?l-k.length:Infinity),u=""}switch(s){case "<":c=v+c+k+u;break;case "=":c=v+u+c+k;break;case "^":c=u.slice(0,y=u.length>>1)+v+c+k+u.slice(y);break;default:c=u+v+c+k;break;}return e(c)}format.toString=function(){return g+""};return format}function formatPrefix(c,f){var g=newFormat((c=formatSpecifier(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(aA(f)/3)))*3,h=Math.pow(10,-d),e=eD[8+d/3];return function(d){return g(h*d)+e}}return {format:newFormat,formatPrefix:formatPrefix}};var bI;defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(b){bI=dY(b);a.format=bI.format;a.formatPrefix=bI.formatPrefix;return bI}var dR=function(b){return Math.max(0,-aA(Math.abs(b)))};var dO=function(c,b){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(aA(b)/3)))*3-aA(Math.abs(c)))};var dS=function(b,c){b=Math.abs(b),c=Math.abs(c)-b;return Math.max(0,aA(c)-aA(b))+1};var ae=function(){return new Adder()};function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(b){add$1(bZ,b,this.t);add$1(this,bZ.s,this.s);if(this.s){this.t+=bZ.t}else {this.s=bZ.t}},valueOf:function(){return this.s}};var bZ=new Adder();function add$1(c,b,e){var f=c.s=b+e,d=f-b,g=f-d;c.t=(b-g)+(e-d)}var d=1.0E-6;var ed=1.0E-12;var g=Math.PI;var m=g/2;var bC=g/4;var A=g*2;var j=180/g;var e=g/180;var h=Math.abs;var aM=Math.atan;var t=Math.atan2;var c=Math.cos;var bY=Math.ceil;var fE=Math.exp;var b1=Math.log;var dr=Math.pow;var b=Math.sin;var bg=Math.sign||function(b){return b>0?1:b<0?-1:0};var n=Math.sqrt;var du=Math.tan;function acos(b){return b>1?0:b<-1?g:Math.acos(b)}function asin(b){return b>1?m:b<-1?-m:Math.asin(b)}function haversin(c){return (c=b(c/2))*c}function noop$1(){}function streamGeometry(b,c){if(b&&dG.hasOwnProperty(b.type)){dG[b.type](b,c)}}var dK={Feature:function(b,c){streamGeometry(b.geometry,c)},FeatureCollection:function(d,e){var b=d.features,c=-1,f=b.length;while(++c<f)streamGeometry(b[c].geometry,e)}};var dG={Sphere:function(c,b){b.sphere()},Point:function(b,c){b=b.coordinates;c.point(b[0],b[1],b[2])},MultiPoint:function(b,e){var c=b.coordinates,d=-1,f=c.length;while(++d<f)b=c[d],e.point(b[0],b[1],b[2])},LineString:function(b,c){streamLine(b.coordinates,c,0)},MultiLineString:function(d,e){var b=d.coordinates,c=-1,f=b.length;while(++c<f)streamLine(b[c],e,0)},Polygon:function(b,c){streamPolygon(b.coordinates,c)},MultiPolygon:function(d,e){var b=d.coordinates,c=-1,f=b.length;while(++c<f)streamPolygon(b[c],e)},GeometryCollection:function(d,e){var b=d.geometries,c=-1,f=b.length;while(++c<f)streamGeometry(b[c],e)}};function streamLine(d,c,f){var e=-1,g=d.length-f,b;c.lineStart();while(++e<g)b=d[e],c.point(b[0],b[1],b[2]);c.lineEnd()}function streamPolygon(c,b){var d=-1,e=c.length;b.polygonStart();while(++d<e)streamLine(c[d],b,1);b.polygonEnd()}var M=function(b,c){if(b&&dK.hasOwnProperty(b.type)){dK[b.type](b,c)}else {streamGeometry(b,c)}};var bu=ae();var bM=ae();var ez;var fo;var cU;var cR;var cW;var O={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){bu.reset();O.lineStart=areaRingStart;O.lineEnd=areaRingEnd},polygonEnd:function(){var b=+bu;bM.add(b<0?A+b:b);this.lineStart=this.lineEnd=this.point=noop$1},sphere:function(){bM.add(A)}};function areaRingStart(){O.point=areaPointFirst}function areaRingEnd(){areaPoint(ez,fo)}function areaPointFirst(f,d){O.point=areaPoint;ez=f,fo=d;f*=e,d*=e;cU=f,cR=c(d=d/2+bC),cW=b(d)}function areaPoint(f,d){f*=e,d*=e;d=d/2+bC;var i=f-cU,h=i>=0?1:-1,g=h*i,j=c(d),k=b(d),l=cW*k,m=cR*j+l*c(g),n=l*h*b(g);bu.add(t(n,m));cU=f,cR=j,cW=k}var j0=function(b){bM.reset();M(b,O);return bM*2};function spherical(b){return [t(b[1],b[0]),asin(b[2])]}function cartesian(d){var f=d[0],g=d[1],e=c(g);return [e*c(f),e*b(f),b(g)]}function cartesianDot(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]}function cartesianCross(b,c){return [b[1]*c[2]-b[2]*c[1],b[2]*c[0]-b[0]*c[2],b[0]*c[1]-b[1]*c[0]]}function cartesianAddInPlace(b,c){b[0]+=c[0],b[1]+=c[1],b[2]+=c[2]}function cartesianScale(b,c){return [b[0]*c,b[1]*c,b[2]*c]}function cartesianNormalizeInPlace(b){var c=n(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=c,b[1]/=c,b[2]/=c}var k;var E;var l;var I;var ao;var eg;var e_;var aQ;var a2=ae();var ad;var X;var V={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){V.point=boundsRingPoint;V.lineStart=boundsRingStart;V.lineEnd=boundsRingEnd;a2.reset();O.polygonStart()},polygonEnd:function(){O.polygonEnd();V.point=boundsPoint;V.lineStart=boundsLineStart;V.lineEnd=boundsLineEnd;if(bu<0){k=-(l=180),E=-(I=90)}else if(a2>d){I=90}else if(a2<-d){E=-90}X[0]=k,X[1]=l}};function boundsPoint(c,b){ad.push(X=[k=c,l=c]);if(b<E){E=b}if(b>I){I=b}}function linePoint(b,c){var p=cartesian([b*e,c*e]);if(aQ){var n=cartesianCross(aQ,p),q=[n[1],-n[0],0],d=cartesianCross(q,n);cartesianNormalizeInPlace(d);d=spherical(d);var o=b-ao,i=o>0?1:-1,f=d[0]*j*i,g,m=h(o)>180;if(m^(i*ao<f&&f<i*b)){g=d[1]*j;if(g>I){I=g}}else if(f=(f+360)%360-180,m^(i*ao<f&&f<i*b)){g=-d[1]*j;if(g<E){E=g}}else {if(c<E){E=c}if(c>I){I=c}}if(m){if(b<ao){if(angle(k,b)>angle(k,l)){l=b}}else {if(angle(b,l)>angle(k,l)){k=b}}}else {if(l>=k){if(b<k){k=b}if(b>l){l=b}}else {if(b>ao){if(angle(k,b)>angle(k,l)){l=b}}else {if(angle(b,l)>angle(k,l)){k=b}}}}}else {ad.push(X=[k=b,l=b])}if(c<E){E=c}if(c>I){I=c}aQ=p,ao=b}function boundsLineStart(){V.point=linePoint}function boundsLineEnd(){X[0]=k,X[1]=l;V.point=boundsPoint;aQ=null}function boundsRingPoint(b,d){if(aQ){var c=b-ao;a2.add(h(c)>180?c+(c>0?360:-360):c)}else {eg=b,e_=d}O.point(b,d);linePoint(b,d)}function boundsRingStart(){O.lineStart()}function boundsRingEnd(){boundsRingPoint(eg,e_);O.lineEnd();if(h(a2)>d){k=-(l=180)}X[0]=k,X[1]=l;aQ=null}function angle(c,b){return (b-=c)<0?b+360:b}function rangeCompare(b,c){return b[0]-c[0]}function rangeContains(b,c){return b[0]<=b[1]?b[0]<=c&&c<=b[1]:c<b[0]||b[1]<c}var js=function(i){var d,f,b,c,e,g,h;I=l=-(k=E=Infinity);ad=[];M(i,V);if(f=ad.length){ad.sort(rangeCompare);for(d=1,b=ad[0],e=[b];d<f;++d){c=ad[d];if(rangeContains(b,c[0])||rangeContains(b,c[1])){if(angle(b[0],c[1])>angle(b[0],b[1])){b[1]=c[1]}if(angle(c[0],b[1])>angle(b[0],b[1])){b[0]=c[0]}}else {e.push(b=c)}}for(g=-Infinity,f=e.length-1,d=0,b=e[f];d<=f;b=c,++d){c=e[d];if((h=angle(b[1],c[0]))>g){g=h,k=c[0],l=b[1]}}}ad=X=null;return k===Infinity||E===Infinity?[[NaN,NaN],[NaN,NaN]]:[[k,E],[l,I]]};var bl;var b5;var b6;var b8;var ca;var b7;var b9;var cb;var dv;var dw;var dx;var eh;var e0;var v;var w;var z;var L={sphere:noop$1,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){L.lineStart=centroidRingStart;L.lineEnd=centroidRingEnd},polygonEnd:function(){L.lineStart=centroidLineStart;L.lineEnd=centroidLineEnd}};function centroidPoint(d,f){d*=e,f*=e;var g=c(f);centroidPointCartesian(g*c(d),g*b(d),b(f))}function centroidPointCartesian(b,c,d){++bl;b6+=(b-b6)/bl;b8+=(c-b8)/bl;ca+=(d-ca)/bl}function centroidLineStart(){L.point=centroidLinePointFirst}function centroidLinePointFirst(d,f){d*=e,f*=e;var g=c(f);v=g*c(d);w=g*b(d);z=b(f);L.point=centroidLinePoint;centroidPointCartesian(v,w,z)}function centroidLinePoint(i,j){i*=e,j*=e;var k=c(j),f=k*c(i),g=k*b(i),h=b(j),d=t(n((d=w*h-z*g)*d+(d=z*f-v*h)*d+(d=v*g-w*f)*d),v*f+w*g+z*h);b5+=d;b7+=d*(v+(v=f));b9+=d*(w+(w=g));cb+=d*(z+(z=h));centroidPointCartesian(v,w,z)}function centroidLineEnd(){L.point=centroidPoint}function centroidRingStart(){L.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(eh,e0);L.point=centroidPoint}function centroidRingPointFirst(d,f){eh=d,e0=f;d*=e,f*=e;L.point=centroidRingPoint;var g=c(f);v=g*c(d);w=g*b(d);z=b(f);centroidPointCartesian(v,w,z)}function centroidRingPoint(f,g){f*=e,g*=e;var q=c(g),m=q*c(f),o=q*b(f),p=b(g),h=w*p-z*o,i=z*m-v*p,j=v*o-w*m,k=n(h*h+i*i+j*j),d=asin(k),l=k&&-d/k;dv+=l*h;dw+=l*i;dx+=l*j;b5+=d;b7+=d*(v+(v=m));b9+=d*(w+(w=o));cb+=d*(z+(z=p));centroidPointCartesian(v,w,z)}var ix=function(g){bl=b5=b6=b8=ca=b7=b9=cb=dv=dw=dx=0;M(g,L);var b=dv,c=dw,e=dx,f=b*b+c*c+e*e;if(f<ed){b=b7,c=b9,e=cb;if(b5<d){b=b6,c=b8,e=ca}f=b*b+c*c+e*e;if(f<ed){return [NaN,NaN]}}return [t(c,b)*j,asin(e/n(f))*j]};var ay=function(b){return function(){return b}};var eS=function(b,c){function compose(d,e){return d=b(d,e),c(d[0],d[1])}if(b.invert&&c.invert){compose.invert=function(d,e){return d=c.invert(d,e),d&&b.invert(d[0],d[1])}}return compose};function rotationIdentity(b,c){return [b>g?b-A:b<-g?b+A:b,c]}rotationIdentity.invert=rotationIdentity;function rotateRadians(d,c,b){return (d%=A)?(c||b?eS(rotationLambda(d),rotationPhiGamma(c,b)):rotationLambda(d)):(c||b?rotationPhiGamma(c,b):rotationIdentity)}function forwardRotationLambda(b){return function(c,d){return c+=b,[c>g?c-A:c<-g?c+A:c,d]}}function rotationLambda(b){var c=forwardRotationLambda(b);c.invert=forwardRotationLambda(-b);return c}function rotationPhiGamma(i,h){var f=c(i),g=b(i),d=c(h),e=b(h);function rotation(k,l){var j=c(l),n=c(k)*j,o=b(k)*j,p=b(l),m=p*f+n*g;return [t(o*d-m*e,n*f-p*g),asin(m*d+o*e)]}rotation.invert=function(k,l){var j=c(l),n=c(k)*j,o=b(k)*j,p=b(l),m=p*d-o*e;return [t(o*d+p*e,n*f+m*g),asin(m*f-n*g)]};return rotation}var eF=function(b){b=rotateRadians(b[0]*e,b[1]*e,b.length>2?b[2]*e:0);function forward(c){c=b(c[0]*e,c[1]*e);return c[0]*=j,c[1]*=j,c}forward.invert=function(c){c=b.invert(c[0]*e,c[1]*e);return c[0]*=j,c[1]*=j,c};return forward};function circleStream(n,h,l,f,d,e){if(!l){return}var i=c(h),k=b(h),m=f*l;if(d==null){d=h+f*A;e=h-m/2}else {d=circleRadius(i,d);e=circleRadius(i,e);if(f>0?d<e:d>e){d+=f*A}}for(var j,g=d;f>0?g>e:g<e;g-=m){j=spherical([i,-k*c(g),-k*b(g)]);n.point(j[0],j[1])}}function circleRadius(e,b){b=cartesian(b),b[0]-=e;cartesianNormalizeInPlace(b);var c=acos(-b[1]);return ((-b[2]<0?-c:c)+A-d)%A}var ju=function(){var d=ay([0,0]),f=ay(90),c=ay(6),b,g,h={point:point};function point(c,d){b.push(c=g(c,d));c[0]*=j,c[1]*=j}function circle(){var i=d.apply(this,arguments),k=f.apply(this,arguments)*e,j=c.apply(this,arguments)*e;b=[];g=rotateRadians(-i[0]*e,-i[1]*e,0).invert;circleStream(h,k,j,1);i={type:"Polygon",coordinates:[b]};b=g=null;return i}circle.center=function(b){return arguments.length?(d=typeof b==="function"?b:ay([+b[0],+b[1]]),circle):d};circle.radius=function(b){return arguments.length?(f=typeof b==="function"?b:ay(+b),circle):f};circle.precision=function(b){return arguments.length?(c=typeof b==="function"?b:ay(+b),circle):c};return circle};var ea=function(){var b=[],c;return {point:function(b,d){c.push([b,d])},lineStart:function(){b.push(c=[])},lineEnd:noop$1,rejoin:function(){if(b.length>1){b.push(b.pop().concat(b.shift()))}},result:function(){var d=b;b=[];c=null;return d}}};var iy=function(i,j,m,o,n,p){var g=i[0],h=i[1],k=j[0],l=j[1],c=0,d=1,e=k-g,f=l-h,b;b=m-g;if(!e&&b>0){return}b/=e;if(e<0){if(b<c){return}if(b<d){d=b}}else if(e>0){if(b>d){return}if(b>c){c=b}}b=n-g;if(!e&&b<0){return}b/=e;if(e<0){if(b>d){return}if(b>c){c=b}}else if(e>0){if(b<c){return}if(b<d){d=b}}b=o-h;if(!f&&b>0){return}b/=f;if(f<0){if(b<c){return}if(b<d){d=b}}else if(f>0){if(b>d){return}if(b>c){c=b}}b=p-h;if(!f&&b<0){return}b/=f;if(f<0){if(b>d){return}if(b>c){c=b}}else if(f>0){if(b<c){return}if(b<d){d=b}}if(c>0){i[0]=g+c*e,i[1]=h+c*f}if(d<1){j[0]=g+d*e,j[1]=h+d*f}return !0};var by=function(b,c){return h(b[0]-c[0])<d&&h(b[1]-c[1])<d};function Intersection(e,b,d,c){this.x=e;this.z=b;this.o=d;this.e=c;this.v=!1;this.n=this.p=null}var d2=function(o,n,l,k,d){var g=[],f=[],c,j;o.forEach(function(b){if((j=b.length-1)<=0){return}var j,h=b[0],i=b[j],e;if(by(h,i)){d.lineStart();for(c=0;c<j;++c)d.point((h=b[c])[0],h[1]);d.lineEnd();return}g.push(e=new Intersection(h,b,null,!0));f.push(e.o=new Intersection(h,null,e,!1));g.push(e=new Intersection(i,b,null,!1));f.push(e.o=new Intersection(i,null,e,!0))});if(!g.length){return}f.sort(n);link$1(g);link$1(f);for(c=0,j=f.length;c<j;++c){f[c].e=l=!l}var m=g[0],e,i;while(1){var b=m,h=!0;while(b.v)if((b=b.n)===m){return}e=b.z;d.lineStart();do{b.v=b.o.v=!0;if(b.e){if(h){for(c=0,j=e.length;c<j;++c)d.point((i=e[c])[0],i[1])}else {k(b.x,b.n.x,1,d)}b=b.n}else {if(h){e=b.p.z;for(c=e.length-1;c>=0;--c)d.point((i=e[c])[0],i[1])}else {k(b.x,b.p.x,-1,d)}b=b.p}b=b.o;e=b.z;h=!h}while(!b.v);d.lineEnd()}};function link$1(d){if(!(f=d.length)){return}var f,e=0,b=d[0],c;while(++e<f){b.n=c=d[e];c.p=b;b=c}b.n=c=d[0];c.p=b}var a7=1000000000;var bN=-a7;function clipExtent(c,f,e,b){function visible(d,g){return c<=d&&d<=e&&f<=g&&g<=b}function interpolate(i,h,g,j){var d=0,k=0;if(i==null||(d=corner(i,g))!==(k=corner(h,g))||comparePoint(i,h)<0^g>0){do j.point(d===0||d===3?c:e,d>1?b:f);while((d=(d+g+4)%4)!==k)}else {j.point(h[0],h[1])}}function corner(i,g){return h(i[0]-c)<d?g>0?0:3:h(i[0]-e)<d?g>0?2:1:h(i[1]-f)<d?g>0?1:0:g>0?3:2}function compareIntersection(d,g){return comparePoint(d.x,g.x)}function comparePoint(g,h){var d=corner(g,1),i=corner(h,1);return d!==i?d-i:d===0?h[1]-g[1]:d===1?g[0]-h[0]:d===2?g[1]-h[1]:h[0]-g[0]}return function(g){var d=g,n=ea(),h,i,q,s,t,r,l,m,j,p,k;var o={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:polygonStart,polygonEnd:polygonEnd};function point(h,i){if(visible(h,i)){d.point(h,i)}}function polygonInside(){var m=0;for(var o=0,r=i.length;o<r;++o){for(var n=i[o],p=1,q=n.length,j=n[0],k,d,l=j[0],h=j[1];p<q;++p){k=l,d=h,j=n[p],l=j[0],h=j[1];if(d<=b){if(h>b&&(l-k)*(b-d)>(h-d)*(c-k)){++m}}else {if(h<=b&&(l-k)*(b-d)<(h-d)*(c-k)){--m}}}}return m}function polygonStart(){d=n,h=[],i=[],k=!0}function polygonEnd(){var l=polygonInside(),j=k&&l,m=(h=c4(h)).length;if(j||m){g.polygonStart();if(j){g.lineStart();interpolate(null,null,1,g);g.lineEnd()}if(m){d2(h,compareIntersection,l,interpolate,g)}g.polygonEnd()}d=g,h=i=q=null}function lineStart(){o.point=linePoint;if(i){i.push(q=[])}p=!0;j=!1;l=m=NaN}function lineEnd(){if(h){linePoint(s,t);if(r&&j){n.rejoin()}h.push(n.result())}o.point=point;if(j){d.lineEnd()}}function linePoint(h,n){var o=visible(h,n);if(i){q.push([h,n])}if(p){s=h,t=n,r=o;p=!1;if(o){d.lineStart();d.point(h,n)}}else {if(o&&j){d.point(h,n)}else {var u=[l=Math.max(bN,Math.min(a7,l)),m=Math.max(bN,Math.min(a7,m))],v=[h=Math.max(bN,Math.min(a7,h)),n=Math.max(bN,Math.min(a7,n))];if(iy(u,v,c,f,e,b)){if(!j){d.lineStart();d.point(u[0],u[1])}d.point(v[0],v[1]);if(!o){d.lineEnd()}k=!1}else if(o){d.lineStart();d.point(h,n);k=!1}}}l=h,m=n,j=o}return o}}var iB=function(){var d=0,f=0,e=960,g=500,b,c,h;return h={stream:function(h){return b&&c===h?b:b=clipExtent(d,f,e,g)(c=h)},extent:function(i){return arguments.length?(d=+i[0][0],f=+i[0][1],e=+i[1][0],g=+i[1][1],b=c=null,h):[[d,f],[e,g]]}}};var c9=ae();var dN=function(y,E){var h=E[0],H=E[1],J=[b(h),-c(h),0],p=0,C=0;c9.reset();for(var r=0,K=y.length;r<K;++r){if(!(u=(q=y[r]).length)){continue}var q,u,i=q[u-1],m=i[0],F=i[1]/2+bC,z=b(F),w=c(F);for(var s=0;s<u;++s,m=n,z=B,w=x,i=j){var j=q[s],n=j[0],G=j[1]/2+bC,B=b(G),x=c(G),e=n-m,o=e>=0?1:-1,l=o*e,f=l>g,I=z*B;c9.add(t(I*o*b(l),w*x+I*c(l)));p+=f?e+o*A:e;if(f^m>=h^n>=h){var k=cartesianCross(cartesian(i),cartesian(j));cartesianNormalizeInPlace(k);var v=cartesianCross(J,k);cartesianNormalizeInPlace(v);var D=(f^e>=0?-1:1)*asin(v[2]);if(H>D||H===D&&(k[0]||k[1])){C+=f^e>=0?1:-1}}}}return (p<-d||p<d&&c9<-d)^(C&1)};var cF=ae();var cE;var bD;var bA;var av={sphere:noop$1,point:noop$1,lineStart:lengthLineStart,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1};function lengthLineStart(){av.point=lengthPointFirst;av.lineEnd=lengthLineEnd}function lengthLineEnd(){av.point=av.lineEnd=noop$1}function lengthPointFirst(f,d){f*=e,d*=e;cE=f,bD=b(d),bA=c(d);av.point=lengthPoint}function lengthPoint(f,i){f*=e,i*=e;var g=b(i),d=c(i),k=h(f-cE),j=c(k),o=b(k),l=d*o,m=bA*g-bD*d*j,p=bD*g+bA*d*j;cF.add(t(n(l*l+m*m),p));cE=f,bD=g,bA=d}var eA=function(b){cF.reset();M(b,av);return +cF};var cn=[null,null];var iI={type:"LineString",coordinates:cn};var a3=function(b,c){cn[0]=b;cn[1]=c;return eA(iI)};var dF={Feature:function(b,c){return containsGeometry(b.geometry,c)},FeatureCollection:function(d,e){var b=d.features,c=-1,f=b.length;while(++c<f)if(containsGeometry(b[c].geometry,e)){return !0}return !1}};var dE={Sphere:function(){return !0},Point:function(b,c){return containsPoint(b.coordinates,c)},MultiPoint:function(d,e){var b=d.coordinates,c=-1,f=b.length;while(++c<f)if(containsPoint(b[c],e)){return !0}return !1},LineString:function(b,c){return containsLine(b.coordinates,c)},MultiLineString:function(d,e){var b=d.coordinates,c=-1,f=b.length;while(++c<f)if(containsLine(b[c],e)){return !0}return !1},Polygon:function(b,c){return containsPolygon(b.coordinates,c)},MultiPolygon:function(d,e){var b=d.coordinates,c=-1,f=b.length;while(++c<f)if(containsPolygon(b[c],e)){return !0}return !1},GeometryCollection:function(d,e){var b=d.geometries,c=-1,f=b.length;while(++c<f)if(containsGeometry(b[c],e)){return !0}return !1}};function containsGeometry(b,c){return b&&dE.hasOwnProperty(b.type)?dE[b.type](b,c):!1}function containsPoint(b,c){return a3(b,c)===0}function containsLine(b,c){var e=a3(b[0],b[1]),f=a3(b[0],c),g=a3(c,b[1]);return f+g<=e+d}function containsPolygon(b,c){return !!dN(b.map(ringRadians),pointRadians(c))}function ringRadians(b){return b=b.map(pointRadians),b.pop(),b}function pointRadians(b){return [b[0]*e,b[1]*e]}var iz=function(b,c){return (b&&dF.hasOwnProperty(b.type)?dF[b.type]:containsGeometry)(b,c)};function graticuleX(e,b,c){var f=N(e,b-d,c).concat(b);return function(d){return f.map(function(f){return [d,f]})}}function graticuleY(e,b,c){var f=N(e,b-d,c).concat(b);return function(d){return f.map(function(f){return [f,d]})}}function graticule(){var i,g,c,b,k,j,f,e,o=10,p=o,m=90,n=360,s,t,q,r,l=2.5;function graticule(){return {type:"MultiLineString",coordinates:lines()}}function lines(){return N(bY(b/m)*m,c,m).map(q).concat(N(bY(e/n)*n,f,n).map(r)).concat(N(bY(g/o)*o,i,o).filter(function(b){return h(b%m)>d}).map(s)).concat(N(bY(j/p)*p,k,p).filter(function(b){return h(b%n)>d}).map(t))}graticule.lines=function(){return lines().map(function(b){return {type:"LineString",coordinates:b}})};graticule.outline=function(){return {type:"Polygon",coordinates:[q(b).concat(r(f).slice(1),q(c).reverse().slice(1),r(e).reverse().slice(1))]}};graticule.extent=function(b){if(!arguments.length){return graticule.extentMinor()}return graticule.extentMajor(b).extentMinor(b)};graticule.extentMajor=function(d){if(!arguments.length){return [[b,e],[c,f]]}b=+d[0][0],c=+d[1][0];e=+d[0][1],f=+d[1][1];if(b>c){d=b,b=c,c=d}if(e>f){d=e,e=f,f=d}return graticule.precision(l)};graticule.extentMinor=function(b){if(!arguments.length){return [[g,j],[i,k]]}g=+b[0][0],i=+b[1][0];j=+b[0][1],k=+b[1][1];if(g>i){b=g,g=i,i=b}if(j>k){b=j,j=k,k=b}return graticule.precision(l)};graticule.step=function(b){if(!arguments.length){return graticule.stepMinor()}return graticule.stepMajor(b).stepMinor(b)};graticule.stepMajor=function(b){if(!arguments.length){return [m,n]}m=+b[0],n=+b[1];return graticule};graticule.stepMinor=function(b){if(!arguments.length){return [o,p]}o=+b[0],p=+b[1];return graticule};graticule.precision=function(d){if(!arguments.length){return l}l=+d;s=graticuleX(j,k,90);t=graticuleY(g,i,l);q=graticuleX(e,f,90);r=graticuleY(b,c,l);return graticule};return graticule.extentMajor([[-180,-90+d],[180,90-d]]).extentMinor([[-180,-80-d],[180,80+d]])}function graticule10(){return graticule()()}var g0=function(o,p){var f=o[0]*e,g=o[1]*e,k=p[0]*e,l=p[1]*e,h=c(g),w=b(g),i=c(l),x=b(l),r=h*c(f),u=h*b(f),s=i*c(k),v=i*b(k),d=2*asin(n(haversin(l-g)+h*i*haversin(k-f))),q=b(d);var m=d?function(h){var e=b(h*=d)/q,c=b(d-h)/q,f=c*r+e*s,g=c*u+e*v,i=c*w+e*x;return [t(g,f)*j,t(i,n(f*f+g*g))*j]}:function(){return [f*j,g*j]};m.distance=d;return m};var ak=function(b){return b};var cC=ae();var ck=ae();var fJ;var fK;var dn;var dp;var U={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){U.lineStart=areaRingStart$1;U.lineEnd=areaRingEnd$1},polygonEnd:function(){U.lineStart=U.lineEnd=U.point=noop$1;cC.add(h(ck));ck.reset()},result:function(){var b=cC/2;cC.reset();return b}};function areaRingStart$1(){U.point=areaPointFirst$1}function areaPointFirst$1(b,c){U.point=areaPoint$1;fJ=dn=b,fK=dp=c}function areaPoint$1(b,c){ck.add(dp*b-dn*c);dn=b,dp=c}function areaRingEnd$1(){areaPoint$1(fJ,fK)}var aN=Infinity;var b$=aN;var bm=-aN;var cd=bm;var bp={point:boundsPoint$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var b=[[aN,b$],[bm,cd]];bm=cd=-(b$=aN=Infinity);return b}};function boundsPoint$1(b,c){if(b<aN){aN=b}if(b>bm){bm=b}if(c<b$){b$=c}if(c>cd){cd=c}}var dc=0;var de=0;var bd=0;var bW=0;var bX=0;var aL=0;var dd=0;var df=0;var be=0;var fr;var ft;var Q;var R;var F={point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){F.lineStart=centroidRingStart$1;F.lineEnd=centroidRingEnd$1},polygonEnd:function(){F.point=centroidPoint$1;F.lineStart=centroidLineStart$1;F.lineEnd=centroidLineEnd$1},result:function(){var b=be?[dd/be,df/be]:aL?[bW/aL,bX/aL]:bd?[dc/bd,de/bd]:[NaN,NaN];dc=de=bd=bW=bX=aL=dd=df=be=0;return b}};function centroidPoint$1(b,c){dc+=b;de+=c;++bd}function centroidLineStart$1(){F.point=centroidPointFirstLine}function centroidPointFirstLine(b,c){F.point=centroidPointLine;centroidPoint$1(Q=b,R=c)}function centroidPointLine(b,c){var e=b-Q,f=c-R,d=n(e*e+f*f);bW+=d*(Q+b)/2;bX+=d*(R+c)/2;aL+=d;centroidPoint$1(Q=b,R=c)}function centroidLineEnd$1(){F.point=centroidPoint$1}function centroidRingStart$1(){F.point=centroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(fr,ft)}function centroidPointFirstRing(b,c){F.point=centroidPointRing;centroidPoint$1(fr=Q=b,ft=R=c)}function centroidPointRing(c,d){var e=c-Q,f=d-R,b=n(e*e+f*f);bW+=b*(Q+c)/2;bX+=b*(R+d)/2;aL+=b;b=R*c-Q*d;dd+=b*(Q+c);df+=b*(R+d);be+=b*3;centroidPoint$1(Q=c,R=d)}function PathContext(b){this._context=b}PathContext.prototype={_radius:4.5,pointRadius:function(b){return this._radius=b,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0){this._context.closePath()}this._point=NaN},point:function(b,c){switch(this._point){case 0:{this._context.moveTo(b,c);this._point=1;break};case 1:{this._context.lineTo(b,c);break};default:{this._context.moveTo(b+this._radius,c);this._context.arc(b,c,this._radius,0,A);break};}},result:noop$1};var cp=ae();var cy;var fs;var fu;var bh;var bi;var aW={point:noop$1,lineStart:function(){aW.point=lengthPointFirst$1},lineEnd:function(){if(cy){lengthPoint$1(fs,fu)}aW.point=noop$1},polygonStart:function(){cy=!0},polygonEnd:function(){cy=null},result:function(){var b=+cp;cp.reset();return b}};function lengthPointFirst$1(b,c){aW.point=lengthPoint$1;fs=bh=b,fu=bi=c}function lengthPoint$1(b,c){bh-=b,bi-=c;cp.add(n(bh*bh+bi*bi));bh=b,bi=c}function PathString(){this._string=[]}PathString.prototype={_circle:circle$1(4.5),pointRadius:function(b){return this._circle=circle$1(b),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0){this._string.push("Z")}this._point=NaN},point:function(b,c){switch(this._point){case 0:{this._string.push("M",b,",",c);this._point=1;break};case 1:{this._string.push("L",b,",",c);break};default:{this._string.push("M",b,",",c,this._circle);break};}},result:function(){if(this._string.length){var b=this._string.join("");this._string=[];return b}}};function circle$1(b){return "m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}var i0=function(e,f){var d=4.5,b,c;function path(g){if(g){if(typeof d==="function"){c.pointRadius(+d.apply(this,arguments))}M(g,b(c))}return c.result()}path.area=function(c){M(c,b(U));return U.result()};path.measure=function(c){M(c,b(aW));return aW.result()};path.bounds=function(c){M(c,b(bp));return bp.result()};path.centroid=function(c){M(c,b(F));return F.result()};path.projection=function(c){return arguments.length?(b=c==null?(e=null,ak):(e=c).stream,path):e};path.context=function(b){if(!arguments.length){return f}c=b==null?(f=null,new PathString()):new PathContext(f=b);if(typeof d!=="function"){c.pointRadius(d)}return path};path.pointRadius=function(b){if(!arguments.length){return d}d=typeof b==="function"?b:(c.pointRadius(+b),+b);return path};return path.projection(e).context(f)};var fv=function(e,c,b,d){return function(m,f){var n=c(f),p=m.invert(d[0],d[1]),o=ea(),k=c(o),h=!1,l,i,j;var g={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){g.point=pointRing;g.lineStart=ringStart;g.lineEnd=ringEnd;i=[];l=[]},polygonEnd:function(){g.point=point;g.lineStart=lineStart;g.lineEnd=lineEnd;i=c4(i);var j=dN(l,p);if(i.length){if(!h){f.polygonStart(),h=!0}d2(i,compareIntersection,j,b,f)}else if(j){if(!h){f.polygonStart(),h=!0}f.lineStart();b(null,null,1,f);f.lineEnd()}if(h){f.polygonEnd(),h=!1}i=l=null},sphere:function(){f.polygonStart();f.lineStart();b(null,null,1,f);f.lineEnd();f.polygonEnd()}};function point(g,h){var i=m(g,h);if(e(g=i[0],h=i[1])){f.point(g,h)}}function pointLine(h,i){var g=m(h,i);n.point(g[0],g[1])}function lineStart(){g.point=pointLine;n.lineStart()}function lineEnd(){g.point=point;n.lineEnd()}function pointRing(g,i){j.push([g,i]);var h=m(g,i);k.point(h[0],h[1])}function ringStart(){k.lineStart();j=[]}function ringEnd(){pointRing(j[0][0],j[0][1]);k.lineEnd();var q=k.clean(),g=o.result(),n,t=g.length,s,p,r;j.pop();l.push(j);j=null;if(!t){return}if(q&1){p=g[0];if((s=p.length-1)>0){if(!h){f.polygonStart(),h=!0}f.lineStart();for(n=0;n<s;++n)f.point((r=p[n])[0],r[1]);f.lineEnd()}return}if(t>1&&q&2){g.push(g.pop().concat(g.shift()))}i.push(g.filter(validSegment))}return g}};function validSegment(b){return b.length>1}function compareIntersection(b,c){return ((b=b.x)[0]<0?b[1]-m-d:m-b[1])-((c=c.x)[0]<0?c[1]-m-d:m-c[1])}var dI=fv(function(){return !0},clipAntimeridianLine,clipAntimeridianInterpolate,[-g,-m]);function clipAntimeridianLine(b){var e=NaN,c=NaN,f=NaN,i;return {lineStart:function(){b.lineStart();i=1},point:function(j,l){var k=j>0?g:-g,n=h(j-e);if(h(n-g)<d){b.point(e,c=(c+l)/2>0?m:-m);b.point(f,c);b.lineEnd();b.lineStart();b.point(k,c);b.point(j,c);i=0}else if(f!==k&&n>=g){if(h(e-f)<d){e-=f*d}if(h(j-k)<d){j-=k*d}c=clipAntimeridianIntersect(e,c,j,l);b.point(f,c);b.lineEnd();b.lineStart();b.point(k,c);i=0}b.point(e=j,c=l);f=k},lineEnd:function(){b.lineEnd();e=c=NaN},clean:function(){return 2-i}}}function clipAntimeridianIntersect(k,e,l,f){var i,j,g=b(k-l);return h(g)>d?aM((b(e)*(j=c(f))*b(l)-b(f)*(i=c(e))*b(k))/(i*j*g)):(e+f)/2}function clipAntimeridianInterpolate(i,e,j,b){var c;if(i==null){c=j*m;b.point(-g,c);b.point(0,c);b.point(g,c);b.point(g,0);b.point(g,-c);b.point(0,-c);b.point(-g,-c);b.point(-g,0);b.point(-g,c)}else if(h(i[0]-e[0])>d){var f=i[0]<e[0]?g:-g;c=j*f/2;b.point(-f,c);b.point(0,c);b.point(f,c)}else {b.point(e[0],e[1])}}var hG=function(b,j){var f=c(b),e=f>0,i=h(f)>d;function interpolate(e,f,c,d){circleStream(d,b,j,c,e,f)}function visible(d,e){return c(d)*c(e)>f}function clipLine(c){var f,m,h,l,k;return {lineStart:function(){l=h=!1;k=1},point:function(r,s){var n=[r,s],o,p=visible(r,s),t=e?p?0:code(r,s):p?code(r+(r<0?g:-g),s):0;if(!f&&(l=h=p)){c.lineStart()}if(p!==h){o=intersect(f,n);if(by(f,o)||by(n,o)){n[0]+=d;n[1]+=d;p=visible(n[0],n[1])}}if(p!==h){k=0;if(p){c.lineStart();o=intersect(n,f);c.point(o[0],o[1])}else {o=intersect(f,n);c.point(o[0],o[1]);c.lineEnd()}f=o}else if(i&&f&&e^p){var q;if(!(t&m)&&(q=intersect(n,f,!0))){k=0;if(e){c.lineStart();c.point(q[0][0],q[0][1]);c.point(q[1][0],q[1][1]);c.lineEnd()}else {c.point(q[1][0],q[1][1]);c.lineEnd();c.lineStart();c.point(q[0][0],q[0][1])}}}if(p&&(!f||!by(f,n))){c.point(n[0],n[1])}f=n,h=p,m=t},lineEnd:function(){if(h){c.lineEnd()}f=null},clean:function(){return k|((l&&h)<<1)}}}function intersect(q,y,A){var J=cartesian(q),K=cartesian(y);var B=[1,0,0],o=cartesianCross(J,K),z=cartesianDot(o,o),w=o[0],t=z-w*w;if(!t){return !A&&q}var H=f*z/t,I=-f*w/t,G=cartesianCross(B,o),l=cartesianScale(B,H),L=cartesianScale(o,I);cartesianAddInPlace(l,L);var p=G,r=cartesianDot(l,p),x=cartesianDot(p,p),D=r*r-x*(cartesianDot(l,l)-1);if(D<0){return}var E=n(D),c=cartesianScale(p,(-r-E)/x);cartesianAddInPlace(c,l);c=spherical(c);if(!A){return c}var e=q[0],m=y[0],i=q[1],k=y[1],s;if(m<e){s=e,e=m,m=s}var u=m-e,v=h(u-g)<d,F=v||u<d;if(!v&&k<i){s=i,i=k,k=s}if(F?v?i+k>0^c[1]<(h(c[0]-e)<d?i:k):i<=c[1]&&c[1]<=k:u>g^(e<=c[0]&&c[0]<=m)){var C=cartesianScale(p,(-r+E)/x);cartesianAddInPlace(C,l);return [c,spherical(C)]}}function code(f,h){var d=e?b:g-b,c=0;if(f<-d){c|=1}else if(f>d){c|=2}if(h<-d){c|=4}else if(h>d){c|=8}return c}return fv(visible,clipLine,interpolate,e?[0,-b]:[-g,b-g])};var io=function(b){return {stream:transformer(b)}};function transformer(b){return function(e){var c=new TransformStream();for(var d in b)c[d]=b[d];c.stream=e;return c}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(b,c){this.stream.point(b,c)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fitExtent(c,d,i){var h=d[1][0]-d[0][0],g=d[1][1]-d[0][1],e=c.clipExtent&&c.clipExtent();c.scale(150).translate([0,0]);if(e!=null){c.clipExtent(null)}M(i,c.stream(bp));var b=bp.result(),f=Math.min(h/(b[1][0]-b[0][0]),g/(b[1][1]-b[0][1])),j=+d[0][0]+(h-f*(b[1][0]+b[0][0]))/2,k=+d[0][1]+(g-f*(b[1][1]+b[0][1]))/2;if(e!=null){c.clipExtent(e)}return c.scale(f*150).translate([j,k])}function fitSize(b,d,c){return fitExtent(b,[[0,0],d],c)}var eB=16;var gI=c(30*e);var eE=function(b,c){return +c?resample$1(b,c):resampleNone(b)};function resampleNone(b){return transformer({point:function(c,d){c=b(c,d);this.stream.point(c[0],c[1])}})}function resample$1(b,c){function resampleLineTo(A,B,m,s,v,x,G,H,o,u,w,y,r,q){var i=G-A,j=H-B,z=i*i+j*j;if(z>4*c&&r--){var f=s+u,g=v+w,e=x+y,C=n(f*f+g*g+e*e),J=asin(e/=C),p=h(h(e)-1)<d||h(m-o)<d?(m+o)/2:t(g,f),I=b(p,J),k=I[0],l=I[1],D=k-A,E=l-B,F=j*D-i*E;if(F*F/z>c||h((i*D+j*E)/z-0.5)>0.3||s*u+v*w+x*y<gI){resampleLineTo(A,B,m,s,v,x,k,l,p,f/=C,g/=C,e,r,q);q.point(k,l);resampleLineTo(k,l,p,f,g,e,G,H,o,u,w,y,r,q)}}}return function(e){var l,p,q,m,n,o,k,f,g,h,i,j;var d={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){e.polygonStart();d.lineStart=ringStart},polygonEnd:function(){e.polygonEnd();d.lineStart=lineStart}};function point(d,f){d=b(d,f);e.point(d[0],d[1])}function lineStart(){f=NaN;d.point=linePoint;e.lineStart()}function linePoint(d,m){var l=cartesian([d,m]),n=b(d,m);resampleLineTo(f,g,k,h,i,j,f=n[0],g=n[1],k=d,h=l[0],i=l[1],j=l[2],eB,e);e.point(f,g)}function lineEnd(){d.point=point;e.lineEnd()}function ringStart(){lineStart();d.point=ringPoint;d.lineEnd=ringEnd}function ringPoint(k,r){linePoint(l=k,r),p=f,q=g,m=h,n=i,o=j;d.point=linePoint}function ringEnd(){resampleLineTo(f,g,k,h,i,j,p,q,l,m,n,o,eB,e);d.lineEnd=lineEnd;lineEnd()}return d}}var gl=transformer({point:function(b,c){this.stream.point(b*e,c*e)}});function projection(b){return projectionMutator(function(){return b})()}function projectionMutator(C){var c,b=150,w=480,x=250,f,g,q=0,s=0,l=0,o=0,m=0,B,i,r=null,A=dI,h=null,u,t,v,z=ak,p=0.5,y=eE(projectTransform,p),d,k;function projection(c){c=i(c[0]*e,c[1]*e);return [c[0]*b+f,g-c[1]*b]}function invert(c){c=i.invert((c[0]-f)/b,(g-c[1])/b);return c&&[c[0]*j,c[1]*j]}function projectTransform(d,e){return d=c(d,e),[d[0]*b+f,g-d[1]*b]}projection.stream=function(b){return d&&k===b?d:d=gl(A(B,y(z(k=b))))};projection.clipAngle=function(b){return arguments.length?(A=+b?hG(r=b*e,6*e):(r=null,dI),reset()):r*j};projection.clipExtent=function(b){return arguments.length?(z=b==null?(h=u=t=v=null,ak):clipExtent(h=+b[0][0],u=+b[0][1],t=+b[1][0],v=+b[1][1]),reset()):h==null?null:[[h,u],[t,v]]};projection.scale=function(c){return arguments.length?(b=+c,recenter()):b};projection.translate=function(b){return arguments.length?(w=+b[0],x=+b[1],recenter()):[w,x]};projection.center=function(b){return arguments.length?(q=b[0]%360*e,s=b[1]%360*e,recenter()):[q*j,s*j]};projection.rotate=function(b){return arguments.length?(l=b[0]%360*e,o=b[1]%360*e,m=b.length>2?b[2]%360*e:0,recenter()):[l*j,o*j,m*j]};projection.precision=function(b){return arguments.length?(y=eE(projectTransform,p=b*b),reset()):n(p)};projection.fitExtent=function(b,c){return fitExtent(projection,b,c)};projection.fitSize=function(c,b){return fitSize(projection,c,b)};function recenter(){i=eS(B=rotateRadians(l,o,m),c);var d=c(q,s);f=w-d[0]*b;g=x+d[1]*b;return reset()}function reset(){d=k=null;return projection}return function(){c=C.apply(this,arguments);projection.invert=c.invert&&invert;return recenter()}}function conicProjection(h){var b=0,c=g/3,d=projectionMutator(h),f=d(b,c);f.parallels=function(f){return arguments.length?d(b=f[0]*e,c=f[1]*e):[b*j,c*j]};return f}function cylindricalEqualAreaRaw(e){var d=c(e);function forward(c,f){return [c*d,b(f)/d]}forward.invert=function(b,c){return [b/d,asin(c*d)]};return forward}function conicEqualAreaRaw(j,k){var f=b(j),e=(f+b(k))/2;if(h(e)<d){return cylindricalEqualAreaRaw(j)}var g=1+f*(2*e-f),i=n(g)/e;function project(f,h){var d=n(g-2*e*b(h))/e;return [d*b(f*=e),i-d*c(f)]}project.invert=function(c,d){var b=i-d;return [t(c,h(b))/e*bg(b),asin((g-(c*c+b*b)*e*e)/(2*e))]};return project}var bq=function(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])};var e7=function(){return bq().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-0.6,38.7])};function multiplex(b){var c=b.length;return {point:function(e,f){var d=-1;while(++d<c)b[d].point(e,f)},sphere:function(){var d=-1;while(++d<c)b[d].sphere()},lineStart:function(){var d=-1;while(++d<c)b[d].lineStart()},lineEnd:function(){var d=-1;while(++d<c)b[d].lineEnd()},polygonStart:function(){var d=-1;while(++d<c)b[d].polygonStart()},polygonEnd:function(){var d=-1;while(++d<c)b[d].polygonEnd()}}}var h1=function(){var g,h,b=e7(),j,c=bq().rotate([154,0]).center([-2,58.5]).parallels([55,65]),k,e=bq().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,f,i={point:function(b,c){f=[b,c]}};function albersUsa(d){var b=d[0],c=d[1];return f=null,(j.point(b,c),f)||(k.point(b,c),f)||(l.point(b,c),f)}albersUsa.invert=function(g){var h=b.scale(),i=b.translate(),d=(g[0]-i[0])/h,f=(g[1]-i[1])/h;return (f>=0.12&&f<0.234&&d>=-0.425&&d<-0.214?c:f>=0.166&&f<0.234&&d>=-0.214&&d<-0.115?e:b).invert(g)};albersUsa.stream=function(d){return g&&h===d?g:g=multiplex([b.stream(h=d),c.stream(d),e.stream(d)])};albersUsa.precision=function(d){if(!arguments.length){return b.precision()}b.precision(d),c.precision(d),e.precision(d);return reset()};albersUsa.scale=function(d){if(!arguments.length){return b.scale()}b.scale(d),c.scale(d*0.35),e.scale(d);return albersUsa.translate(b.translate())};albersUsa.translate=function(m){if(!arguments.length){return b.translate()}var f=b.scale(),g=+m[0],h=+m[1];j=b.translate(m).clipExtent([[g-0.455*f,h-0.238*f],[g+0.455*f,h+0.238*f]]).stream(i);k=c.translate([g-0.307*f,h+0.201*f]).clipExtent([[g-0.425*f+d,h+0.12*f+d],[g-0.214*f-d,h+0.234*f-d]]).stream(i);l=e.translate([g-0.205*f,h+0.212*f]).clipExtent([[g-0.214*f+d,h+0.166*f+d],[g-0.115*f-d,h+0.234*f-d]]).stream(i);return reset()};albersUsa.fitExtent=function(b,c){return fitExtent(albersUsa,b,c)};albersUsa.fitSize=function(c,b){return fitSize(albersUsa,c,b)};function reset(){g=h=null;return albersUsa}return albersUsa.scale(1070)};function azimuthalRaw(d){return function(g,h){var i=c(g),e=c(h),f=d(i*e);return [f*e*b(g),f*b(h)]}}function azimuthalInvert(d){return function(f,g){var e=n(f*f+g*g),i=d(e),h=b(i),j=c(i);return [t(f*h,e*j),asin(e&&g*h/e)]}}var ci=azimuthalRaw(function(b){return n(2/(1+b))});ci.invert=azimuthalInvert(function(b){return 2*asin(b/2)});var f3=function(){return projection(ci).scale(124.75).clipAngle(180-0.001)};var ch=azimuthalRaw(function(c){return (c=acos(c))&&c/b(c)});ch.invert=azimuthalInvert(function(b){return b});var fX=function(){return projection(ch).scale(79.4188).clipAngle(180-0.001)};function mercatorRaw(b,c){return [b,b1(du((m+c)/2))]}mercatorRaw.invert=function(b,c){return [b,2*aM(fE(c))-m]};var iG=function(){return mercatorProjection(mercatorRaw).scale(961/A)};function mercatorProjection(j){var b=projection(j),k=b.center,h=b.scale,i=b.translate,l=b.clipExtent,c=null,e,d,f;b.scale=function(b){return arguments.length?(h(b),reclip()):h()};b.translate=function(b){return arguments.length?(i(b),reclip()):i()};b.center=function(b){return arguments.length?(k(b),reclip()):k()};b.clipExtent=function(b){return arguments.length?((b==null?c=e=d=f=null:(c=+b[0][0],e=+b[0][1],d=+b[1][0],f=+b[1][1])),reclip()):c==null?null:[[c,e],[d,f]]};function reclip(){var i=g*h(),k=b(eF(b.rotate()).invert([0,0]));return l(c==null?[[k[0]-i,k[1]-i],[k[0]+i,k[1]+i]]:j===mercatorRaw?[[Math.max(k[0]-i,c),e],[Math.min(k[0]+i,d),f]]:[[c,Math.max(k[1]-i,e)],[d,Math.min(k[1]+i,f)]])}return reclip()}function tany(b){return du((m+b)/2)}function conicConformalRaw(f,i){var j=c(f),e=f===i?b(f):b1(j/c(i))/b1(tany(i)/tany(f)),g=j*dr(tany(f),e)/e;if(!e){return mercatorRaw}function project(k,h){if(g>0){if(h<-m+d){h=-m+d}}else {if(h>m-d){h=m-d}}var j=g/dr(tany(h),e);return [j*b(e*k),g-j*c(e*k)]}project.invert=function(c,j){var b=g-j,d=bg(e)*n(c*c+b*b);return [t(c,h(b))/e*bg(b),2*aM(dr(g/d,1/e))-m]};return project}var gH=function(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])};function equirectangularRaw(b,c){return [b,c]}equirectangularRaw.invert=equirectangularRaw;var gq=function(){return projection(equirectangularRaw).scale(152.63)};function conicEquidistantRaw(e,i){var j=c(e),f=e===i?b(e):(j-c(i))/(i-e),g=j/f+e;if(h(f)<d){return equirectangularRaw}function project(j,k){var d=g-k,h=f*j;return [d*b(h),g-d*c(h)]}project.invert=function(c,d){var b=g-d;return [t(c,h(b))/f*bg(b),g-bg(f)*n(c*c+b*b)]};return project}var gc=function(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])};function gnomonicRaw(f,g){var d=c(g),e=c(f)*d;return [d*b(f)/e,b(g)/e]}gnomonicRaw.invert=azimuthalInvert(aM);var iC=function(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)};function scaleTranslate(b,c,d,e){return b===1&&c===1&&d===0&&e===0?ak:transformer({point:function(f,g){this.stream.point(f*b+d,g*c+e)}})}var hM=function(){var b=1,f=0,g=0,d=1,e=1,c=ak,j=null,m,l,n,o=ak,i,k,h;function reset(){i=k=null;return h}return h={stream:function(b){return i&&k===b?i:i=c(o(k=b))},clipExtent:function(b){return arguments.length?(o=b==null?(j=m=l=n=null,ak):clipExtent(j=+b[0][0],m=+b[0][1],l=+b[1][0],n=+b[1][1]),reset()):j==null?null:[[j,m],[l,n]]},scale:function(h){return arguments.length?(c=scaleTranslate((b=+h)*d,b*e,f,g),reset()):b},translate:function(h){return arguments.length?(c=scaleTranslate(b*d,b*e,f=+h[0],g=+h[1]),reset()):[f,g]},reflectX:function(h){return arguments.length?(c=scaleTranslate(b*(d=h?-1:1),b*e,f,g),reset()):d<0},reflectY:function(h){return arguments.length?(c=scaleTranslate(b*d,b*(e=h?-1:1),f,g),reset()):e<0},fitExtent:function(b,c){return fitExtent(h,b,c)},fitSize:function(c,b){return fitSize(h,c,b)}}};function orthographicRaw(e,d){return [c(d)*b(e),b(d)]}orthographicRaw.invert=azimuthalInvert(asin);var hh=function(){return projection(orthographicRaw).scale(249.5).clipAngle(90+d)};function stereographicRaw(f,g){var d=c(g),e=1+c(f)*d;return [d*b(f)/e,b(g)/e]}stereographicRaw.invert=azimuthalInvert(function(b){return 2*aM(b)});var g4=function(){return projection(stereographicRaw).scale(250).clipAngle(142)};function transverseMercatorRaw(b,c){return [b1(du((m+c)/2)),-b]}transverseMercatorRaw.invert=function(b,c){return [-c,2*aM(fE(b))-m]};var f6=function(){var b=mercatorProjection(transverseMercatorRaw),d=b.center,c=b.rotate;b.center=function(b){return arguments.length?d([-b[1],b[0]]):(b=d(),[b[1],-b[0]])};b.rotate=function(b){return arguments.length?c([b[0],b[1],b.length>2?b[2]+90:90]):(b=c(),[b[0],b[1],b[2]-90])};return c([0,0,90]).scale(159.155)};function defaultSeparation(b,c){return b.parent===c.parent?1:2}function meanX(b){return b.reduce(meanXReduce,0)/b.length}function meanXReduce(c,b){return c+b.x}function maxY(b){return 1+b.reduce(maxYReduce,0)}function maxYReduce(c,b){return Math.max(c,b.y)}function leafLeft(b){var c;while(c=b.children)b=c[0];return b}function leafRight(c){var b;while(b=c.children)c=b[b.length-1];return c}var iU=function(){var d=defaultSeparation,b=1,c=1,e=!1;function cluster(f){var g,l=0;f.eachAfter(function(b){var c=b.children;if(c){b.x=meanX(c);b.y=maxY(c)}else {b.x=g?l+=d(b,g):0;b.y=0;g=b}});var i=leafLeft(f),h=leafRight(f),j=i.x-d(i,h)/2,k=h.x+d(h,i)/2;return f.eachAfter(e?function(d){d.x=(d.x-f.x)*b;d.y=(f.y-d.y)*c}:function(d){d.x=(d.x-j)/(k-j)*b;d.y=(1-(f.y?d.y/f.y:1))*c})}cluster.separation=function(b){return arguments.length?(d=b,cluster):d};cluster.size=function(d){return arguments.length?(e=!1,b=+d[0],c=+d[1],cluster):(e?null:[b,c])};cluster.nodeSize=function(d){return arguments.length?(e=!0,b=+d[0],c=+d[1],cluster):(e?[b,c]:null)};return cluster};function count(e){var c=0,b=e.children,d=b&&b.length;if(!d){c=1}else {while(--d>=0)c+=b[d].value}e.value=c}var hP=function(){return this.eachAfter(count)};var ia=function(h){var d=this,f,c=[d],b,e,g;do{f=c.reverse(),c=[];while(d=f.pop()){h(d),b=d.children;if(b){for(e=0,g=b.length;e<g;++e){c.push(b[e])}}}}while(c.length);return this};var gr=function(f){var c=this,e=[c],b,d;while(c=e.pop()){f(c),b=c.children;if(b){for(d=b.length-1;d>=0;--d){e.push(b[d])}}}return this};var gL=function(h){var b=this,e=[b],f=[],c,d,g;while(b=e.pop()){f.push(b),c=b.children;if(c){for(d=0,g=c.length;d<g;++d){e.push(c[d])}}}while(b=f.pop()){h(b)}return this};var iH=function(b){return this.eachAfter(function(d){var e=+b(d.data)||0,c=d.children,f=c&&c.length;while(--f>=0)e+=c[f].value;d.value=e})};var ic=function(b){return this.eachBefore(function(c){if(c.children){c.children.sort(b)}})};var ib=function(c){var b=this,e=leastCommonAncestor(b,c),d=[b];while(b!==e){b=b.parent;d.push(b)}var f=d.length;while(c!==e){d.splice(f,0,c);c=c.parent}return d};function leastCommonAncestor(b,c){if(b===c){return b}var d=b.ancestors(),e=c.ancestors(),f=null;b=d.pop();c=e.pop();while(b===c){f=b;b=d.pop();c=e.pop()}return f}var gK=function(){var b=this,c=[b];while(b=b.parent){c.push(b)}return c};var gf=function(){var b=[];this.each(function(c){b.push(c)});return b};var hw=function(){var b=[];this.eachBefore(function(c){if(!c.children){b.push(c)}});return b};var hQ=function(){var c=this,b=[];c.each(function(d){if(d!==c){b.push({source:d.parent,target:d})}});return b};function hierarchy(g,d){var h=new Node(g),k=+g.value&&(h.value=g.value),b,j=[h],f,e,c,i;if(d==null){d=defaultChildren}while(b=j.pop()){if(k){b.value=+b.data.value}if((e=d(b.data))&&(i=e.length)){b.children=new Array(i);for(c=i-1;c>=0;--c){j.push(f=b.children[c]=new Node(e[c]));f.parent=b;f.depth=b.depth+1}}}return h.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function defaultChildren(b){return b.children}function copyData(b){b.data=b.data.data}function computeHeight(b){var c=0;do b.height=c;while((b=b.parent)&&(b.height<++c))}function Node(b){this.data=b;this.depth=this.height=0;this.parent=null}Node.prototype=hierarchy.prototype={constructor:Node,count:hP,each:ia,eachAfter:gL,eachBefore:gr,sum:iH,sort:ic,path:ib,ancestors:gK,descendants:gf,leaves:hw,links:hQ,copy:node_copy};function Node$2(b){this._=b;this.next=null}var ik=function(b){var g,e=(b=b.slice()).length,d=null,c=d;while(e){var f=new Node$2(b[e-1]);if(c){c=c.next=f}else {c=d=f}b[g]=b[--e]}return {head:d,tail:c}};var eY=function(b){return encloseN(ik(b),[])};function encloses(b,c){var e=c.x-b.x,f=c.y-b.y,d=b.r-c.r;return d*d+1.0E-6>e*e+f*f}function encloseN(b,c){var e,f=null,d=b.head,g,h;switch(c.length){case 1:e=enclose1(c[0]);break;case 2:e=enclose2(c[0],c[1]);break;case 3:e=enclose3(c[0],c[1],c[2]);break;}while(d){h=d._,g=d.next;if(!e||!encloses(e,h)){if(f){b.tail=f,f.next=null}else {b.head=b.tail=null}c.push(h);e=encloseN(b,c);c.pop();if(b.head){d.next=b.head,b.head=d}else {d.next=null,b.head=b.tail=d}f=b.tail,f.next=g}else {f=d}d=g}b.tail=f;return e}function enclose1(b){return {x:b.x,y:b.y,r:b.r}}function enclose2(d,e){var j=d.x,l=d.y,h=d.r,k=e.x,m=e.y,i=e.r,b=k-j,c=m-l,g=i-h,f=Math.sqrt(b*b+c*c);return {x:(j+k+b/f*g)/2,y:(l+m+c/f*g)/2,r:(f+h+i)/2}}function enclose3(u,v,w){var c=u.x,d=u.y,b=u.r,p=v.x,r=v.y,n=v.r,q=w.x,s=w.y,o=w.r,j=2*(c-p),l=2*(d-r),y=2*(n-b),A=c*c+d*d-b*b-p*p-r*r+n*n,k=2*(c-q),m=2*(d-s),z=2*(o-b),B=c*c+d*d-b*b-q*q-s*s+o*o,e=k*l-j*m,f=(l*B-m*A)/e-c,g=(m*y-l*z)/e,h=(k*A-j*B)/e-d,i=(j*z-k*y)/e,C=g*g+i*i-1,t=2*(f*g+h*i+b),D=f*f+h*h-b*b,x=(-t-Math.sqrt(t*t-4*C*D))/(2*C);return {x:f+g*x+c,y:h+i*x+d,r:x}}function place(j,k,c){var h=j.x,i=j.y,d=k.r+c.r,b=j.r+c.r,f=k.x-h,g=k.y-i,e=f*f+g*g;if(e){var l=0.5+((b*=b)-(d*=d))/(2*e),m=Math.sqrt(Math.max(0,2*d*(b+e)-(b-=e)*b-d*d))/(2*e);c.x=h+l*f+m*g;c.y=i+l*g-m*f}else {c.x=h+b;c.y=i}}function intersects(b,c){var e=c.x-b.x,f=c.y-b.y,d=b.r+c.r;return d*d-1.0E-6>e*e+f*f}function distance2(d,h,i){var b=d._,c=d.next._,e=b.r+c.r,f=(b.x*c.r+c.x*b.r)/e-h,g=(b.y*c.r+c.y*b.r)/e-i;return f*f+g*g}function Node$1(b){this._=b;this.next=null;this.previous=null}function packEnclose(i){if(!(k=i.length)){return 0}var b,d,c,k;b=i[0],b.x=0,b.y=0;if(!(k>1)){return b.r}d=i[1],b.x=-d.r,d.x=b.r,d.y=0;if(!(k>2)){return b.r+d.r}place(d,b,c=i[2]);var j=b.r*b.r,l=d.r*d.r,f=c.r*c.r,m=j+l+f,r=j*b.x+l*d.x+f*c.x,s=j*b.y+l*d.y+f*c.y,p,q,e,g,h,n,o;b=new Node$1(b),d=new Node$1(d),c=new Node$1(c);b.next=c.previous=d;d.next=b.previous=c;c.next=d.previous=b;t: for(e=3;e<k;++e){place(b._,d._,c=i[e]),c=new Node$1(c);g=d.next,h=b.previous,n=d._.r,o=b._.r;do{if(n<=o){if(intersects(g._,c._)){d=g,b.next=d,d.previous=b,--e;continue t}n+=g._.r,g=g.next}else {if(intersects(h._,c._)){b=h,b.next=d,d.previous=b,--e;continue t}o+=h._.r,h=h.previous}}while(g!==h.next);c.previous=b,c.next=d,b.next=d.previous=d=c;m+=f=c._.r*c._.r;r+=f*c._.x;s+=f*c._.y;j=distance2(b,p=r/m,q=s/m);while((c=c.next)!==d){if((f=distance2(c,p,q))<j){b=c,j=f}}d=b.next}b=[d._],c=d;while((c=c.next)!==d)b.push(c._);c=eY(b);for(e=0;e<k;++e)b=i[e],b.x-=c.x,b.y-=c.y;return c.r}var iM=function(b){packEnclose(b);return b};function optional(b){return b==null?null:required(b)}function required(b){if(typeof b!=="function"){throw new Error()}return b}function constantZero(){return 0}var az=function(b){return function(){return b}};function defaultRadius$1(b){return Math.sqrt(b.value)}var i1=function(){var e=null,b=1,c=1,d=constantZero;function pack(f){f.x=b/2,f.y=c/2;if(e){f.eachBefore(radiusLeaf(e)).eachAfter(packChildren(d,0.5)).eachBefore(translateChild(1))}else {f.eachBefore(radiusLeaf(defaultRadius$1)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(d,f.r/Math.min(b,c))).eachBefore(translateChild(Math.min(b,c)/(2*f.r)))}return f}pack.radius=function(b){return arguments.length?(e=optional(b),pack):e};pack.size=function(d){return arguments.length?(b=+d[0],c=+d[1],pack):[b,c]};pack.padding=function(b){return arguments.length?(d=typeof b==="function"?b:az(+b),pack):d};return pack};function radiusLeaf(b){return function(c){if(!c.children){c.r=Math.max(0,+b(c)||0)}}}function packChildren(b,c){return function(g){if(e=g.children){var e,d,i=e.length,f=b(g)*c||0,h;if(f){for(d=0;d<i;++d)e[d].r+=f}h=packEnclose(e);if(f){for(d=0;d<i;++d)e[d].r-=f}g.r=h+f}}}function translateChild(b){return function(c){var d=c.parent;c.r*=b;if(d){c.x=d.x+b*c.x;c.y=d.y+b*c.y}}}var eu=function(b){b.x0=Math.round(b.x0);b.y0=Math.round(b.y0);b.x1=Math.round(b.x1);b.y1=Math.round(b.y1)};var aZ=function(c,d,h,g,i){var e=c.children,b,f=-1,k=e.length,j=c.value&&(g-d)/c.value;while(++f<k){b=e[f],b.y0=h,b.y1=i;b.x0=d,b.x1=d+=b.value*j}};var id=function(){var e=1,c=1,b=0,d=!1;function partition(f){var g=f.height+1;f.x0=f.y0=b;f.x1=e;f.y1=c/g;f.eachBefore(positionNode(c,g));if(d){f.eachBefore(eu)}return f}function positionNode(c,d){return function(e){if(e.children){aZ(e,e.x0,c*(e.depth+1)/d,e.x1,c*(e.depth+2)/d)}var f=e.x0,h=e.y0,g=e.x1-b,i=e.y1-b;if(g<f){f=g=(f+g)/2}if(i<h){h=i=(h+i)/2}e.x0=f;e.y0=h;e.x1=g;e.y1=i}}partition.round=function(b){return arguments.length?(d=!!b,partition):d};partition.size=function(b){return arguments.length?(e=+b[0],c=+b[1],partition):[e,c]};partition.padding=function(c){return arguments.length?(b=+c,partition):b};return partition};var d6="$";var ja={depth:-1};var el={};function defaultId(b){return b.id}function defaultParentId(b){return b.parentId}var iN=function(){var c=defaultId,b=defaultParentId;function stratify(i){var m,d,j=i.length,h,g,f,n=new Array(j),e,l,k={};for(d=0;d<j;++d){m=i[d],f=n[d]=new Node(m);if((e=c(m,d,i))!=null&&(e+="")){l=d6+(f.id=e);k[l]=l in k?el:f}}for(d=0;d<j;++d){f=n[d],e=b(i[d],d,i);if(e==null||!(e+="")){if(h){throw new Error("multiple roots")}h=f}else {g=k[d6+e];if(!g){throw new Error("missing: "+e)}if(g===el){throw new Error("ambiguous: "+e)}if(g.children){g.children.push(f)}else {g.children=[f]}f.parent=g}}if(!h){throw new Error("no root")}h.parent=ja;h.eachBefore(function(b){b.depth=b.parent.depth+1;--j}).eachBefore(computeHeight);h.parent=null;if(j>0){throw new Error("cycle")}return h}stratify.id=function(b){return arguments.length?(c=required(b),stratify):c};stratify.parentId=function(c){return arguments.length?(b=required(c),stratify):b};return stratify};function defaultSeparation$1(b,c){return b.parent===c.parent?1:2}function nextLeft(c){var b=c.children;return b?b[0]:c.t}function nextRight(c){var b=c.children;return b?b[b.length-1]:c.t}function moveSubtree(e,b,c){var d=c/(b.i-e.i);b.c-=d;b.s+=c;e.c+=d;b.z+=c;b.m+=c}function executeShifts(g){var c=0,f=0,d=g.children,e=d.length,b;while(--e>=0){b=d[e];b.z+=c;b.m+=c;c+=b.s+(f+=b.c)}}function nextAncestor(b,d,c){return b.a.parent===d.parent?b.a:c}function TreeNode(b,c){this._=b;this.parent=null;this.children=null;this.A=null;this.a=this;this.z=0;this.m=0;this.c=0;this.s=0;this.t=null;this.i=c}TreeNode.prototype=Object.create(Node.prototype);function treeRoot(i){var d=new TreeNode(i,0),c,g=[d],f,e,b,h;while(c=g.pop()){if(e=c._.children){c.children=new Array(h=e.length);for(b=h-1;b>=0;--b){g.push(f=c.children[b]=new TreeNode(e[b],b));f.parent=c}}}(d.parent=new TreeNode(null,0)).children=[d];return d}var kg=function(){var b=defaultSeparation$1,c=1,d=1,e=null;function tree(f){var i=treeRoot(f);i.eachAfter(firstWalk),i.parent.m=-i.z;i.eachBefore(secondWalk);if(e){f.eachBefore(sizeNode)}else {var h=f,g=f,j=f;f.eachBefore(function(b){if(b.x<h.x){h=b}if(b.x>g.x){g=b}if(b.depth>j.depth){j=b}});var l=h===g?1:b(h,g)/2,k=l-h.x,m=c/(g.x+l+k),n=d/(j.depth||1);f.eachBefore(function(b){b.x=(b.x+k)*m;b.y=b.depth*n})}return f}function firstWalk(c){var e=c.children,g=c.parent.children,d=c.i?g[c.i-1]:null;if(e){executeShifts(c);var f=(e[0].z+e[e.length-1].z)/2;if(d){c.z=d.z+b(c._,d._);c.m=c.z-f}else {c.z=f}}else if(d){c.z=d.z+b(c._,d._)}c.parent.A=apportion(c,d,c.parent.A||g[0])}function secondWalk(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function apportion(g,n,j){if(n){var d=g,e=g,c=n,f=d.parent.children[0],i=d.m,l=e.m,k=c.m,m=f.m,h;while(c=nextRight(c),d=nextLeft(d),c&&d){f=nextLeft(f);e=nextRight(e);e.a=g;h=c.z+k-d.z-i+b(c._,d._);if(h>0){moveSubtree(nextAncestor(c,g,j),g,h);i+=h;l+=h}k+=c.m;i+=d.m;m+=f.m;l+=e.m}if(c&&!nextRight(e)){e.t=c;e.m+=k-l}if(d&&!nextLeft(f)){f.t=d;f.m+=i-m;j=g}}return j}function sizeNode(b){b.x*=c;b.y=b.depth*d}tree.separation=function(c){return arguments.length?(b=c,tree):b};tree.size=function(b){return arguments.length?(e=!1,c=+b[0],d=+b[1],tree):(e?null:[c,d])};tree.nodeSize=function(b){return arguments.length?(e=!0,c=+b[0],d=+b[1],tree):(e?[c,d]:null)};return tree};var bt=function(c,g,d,h,i){var e=c.children,b,f=-1,k=e.length,j=c.value&&(i-d)/c.value;while(++f<k){b=e[f],b.x0=g,b.x1=h;b.y0=d,b.y1=d+=b.value*j}};var fG=(1+Math.sqrt(5))/2;function squarifyRatio(x,v,m,n,s,t){var w=[],k=v.children,l,d,r=0,c=0,u=k.length,i,j,e=v.value,b,h,g,p,o,q,f;while(r<u){i=s-m,j=t-n;do b=k[c++].value;while(!b&&c<u);h=g=b;q=Math.max(j/i,i/j)/(e*x);f=b*b*q;o=Math.max(g/f,f/h);for(;c<u;++c){b+=d=k[c].value;if(d<h){h=d}if(d>g){g=d}f=b*b*q;p=Math.max(g/f,f/h);if(p>o){b-=d;break}o=p}w.push(l={value:b,dice:i<j,children:k.slice(r,c)});if(l.dice){aZ(l,m,n,s,e?n+=j*b/e:t)}else {bt(l,m,n,e?m+=i*b/e:s,t)}e-=b,r=c}return w}var eI=((function custom(b){function squarify(c,d,f,e,g){squarifyRatio(b,c,d,f,e,g)}squarify.ratio=function(c){return custom((c=+c)>1?c:1)};return squarify}))(fG);var i2=function(){var i=eI,h=!1,j=1,k=1,e=[0],c=constantZero,g=constantZero,d=constantZero,b=constantZero,f=constantZero;function treemap(b){b.x0=b.y0=0;b.x1=j;b.y1=k;b.eachBefore(positionNode);e=[0];if(h){b.eachBefore(eu)}return b}function positionNode(h){var n=e[h.depth],j=h.x0+n,l=h.y0+n,k=h.x1-n,m=h.y1-n;if(k<j){j=k=(j+k)/2}if(m<l){l=m=(l+m)/2}h.x0=j;h.y0=l;h.x1=k;h.y1=m;if(h.children){n=e[h.depth+1]=c(h)/2;j+=f(h)-n;l+=g(h)-n;k-=d(h)-n;m-=b(h)-n;if(k<j){j=k=(j+k)/2}if(m<l){l=m=(l+m)/2}i(h,j,l,k,m)}}treemap.round=function(b){return arguments.length?(h=!!b,treemap):h};treemap.size=function(b){return arguments.length?(j=+b[0],k=+b[1],treemap):[j,k]};treemap.tile=function(b){return arguments.length?(i=required(b),treemap):i};treemap.padding=function(b){return arguments.length?treemap.paddingInner(b).paddingOuter(b):treemap.paddingInner()};treemap.paddingInner=function(b){return arguments.length?(c=typeof b==="function"?b:az(+b),treemap):c};treemap.paddingOuter=function(b){return arguments.length?treemap.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):treemap.paddingTop()};treemap.paddingTop=function(b){return arguments.length?(g=typeof b==="function"?b:az(+b),treemap):g};treemap.paddingRight=function(b){return arguments.length?(d=typeof b==="function"?b:az(+b),treemap):d};treemap.paddingBottom=function(c){return arguments.length?(b=typeof c==="function"?c:az(+c),treemap):b};treemap.paddingLeft=function(b){return arguments.length?(f=typeof b==="function"?b:az(+b),treemap):f};return treemap};var jr=function(f,h,j,i,k){var d=f.children,c,e=d.length,g,b=new Array(e+1);for(b[0]=g=c=0;c<e;++c){b[c+1]=g+=d[c].value}partition(0,e,f.value,h,j,i,k);function partition(e,s,q,g,m,l,n){if(e>=s-1){var r=d[e];r.x0=g,r.y0=m;r.x1=l,r.y1=n;return}var w=b[e],t=(q/2)+w,c=e+1,v=s-1;while(c<v){var u=c+v>>>1;if(b[u]<t){c=u+1}else {v=u}}if((t-b[c-1])<(b[c]-t)&&e+1<c){--c}var o=b[c]-w,p=q-o;if((l-g)>(n-m)){var x=(g*p+l*o)/q;partition(e,c,o,g,m,x,n);partition(c,s,p,x,m,l,n)}else {var y=(m*p+n*o)/q;partition(e,c,o,g,m,l,y);partition(c,s,p,g,y,l,n)}}};var il=function(b,c,e,d,f){(b.depth&1?bt:aZ)(b,c,e,d,f)};var hS=((function custom(b){function resquarify(g,e,f,k,l){if((d=g._squarify)&&(d.ratio===b)){var d,c,i,h,m=-1,n,o=d.length,j=g.value;while(++m<o){c=d[m],i=c.children;for(h=c.value=0,n=i.length;h<n;++h)c.value+=i[h].value;if(c.dice){aZ(c,e,f,k,f+=(l-f)*c.value/j)}else {bt(c,e,f,e+=(k-e)*c.value/j,l)}j-=c.value}}else {g._squarify=d=squarifyRatio(b,g,e,f,k,l);d.ratio=b}}resquarify.ratio=function(c){return custom((c=+c)>1?c:1)};return resquarify}))(fG);var jp=function(c){var f=-1,g=c.length,d,b=c[g-1],e=0;while(++f<g){d=b;b=c[f];e+=d[1]*b[0]-d[0]*b[1]}return e/2};var hF=function(e){var g=-1,h=e.length,i=0,j=0,c,b=e[h-1],f,d=0;while(++g<h){c=b;b=e[g];d+=f=c[0]*b[1]-b[0]*c[1];i+=(c[0]+b[0])*f;j+=(c[1]+b[1])*f}return d*=3,[i/d,j/d]};var iW=function(b,c,d){return (c[0]-b[0])*(d[1]-b[1])-(c[1]-b[1])*(d[0]-b[0])};function lexicographicOrder(b,c){return b[0]-c[0]||b[1]-c[1]}function computeUpperHullIndexes(d){var f=d.length,c=[0,1],b=2;for(var e=2;e<f;++e){while(b>1&&iW(d[c[b-2]],d[c[b-1]],d[e])<=0)--b;c[b++]=e}return c.slice(0,b)}var j5=function(f){if((g=f.length)<3){return null}var b,g,c=new Array(g),i=new Array(g);for(b=0;b<g;++b)c[b]=[+f[b][0],+f[b][1],b];c.sort(lexicographicOrder);for(b=0;b<g;++b)i[b]=[c[b][0],-c[b][1]];var e=computeUpperHullIndexes(c),d=computeUpperHullIndexes(i);var k=d[0]===e[0],j=d[d.length-1]===e[e.length-1],h=[];for(b=e.length-1;b>=0;--b)h.push(f[c[e[b]][2]]);for(b=+k;b<d.length-j;++b)h.push(f[c[d[b]][2]]);return h};var hI=function(e,j){var l=e.length,c=e[l-1],m=j[0],i=j[1],k=c[0],g=c[1],d,b,f=!1;for(var h=0;h<l;++h){c=e[h],d=c[0],b=c[1];if(((b>i)!==(g>i))&&(m<(k-d)*(i-b)/(g-b)+d)){f=!f}k=d,g=b}return f};var iE=function(e){var i=-1,j=e.length,b=e[j-1],c,d,f=b[0],g=b[1],h=0;while(++i<j){c=f;d=g;b=e[i];f=b[0];g=b[1];c-=f;d-=g;h+=Math.sqrt(c*c+d*d)}return h};var je=[].slice;var i7={};function Queue(b){if(!(b>=1)){throw new Error()}this._size=b;this._call=this._error=null;this._tasks=[];this._data=[];this._waiting=this._active=this._ended=this._start=0}Queue.prototype=queue.prototype={constructor:Queue,defer:function(b){if(typeof b!=="function"||this._call){throw new Error()}if(this._error!=null){return this}var c=je.call(arguments,1);c.push(b);++this._waiting,this._tasks.push(c);poke$1(this);return this},abort:function(){if(this._error==null){abort(this,new Error("abort"))}return this},await:function(b){if(typeof b!=="function"||this._call){throw new Error()}this._call=function(d,c){b.apply(null,[d].concat(c))};maybeNotify(this);return this},awaitAll:function(b){if(typeof b!=="function"||this._call){throw new Error()}this._call=b;maybeNotify(this);return this}};function poke$1(b){if(!b._start){try{start$1(b)}catch(kL){if(b._tasks[b._ended+b._active-1]){abort(b,kL)}else if(!b._data){throw kL}}}}function start$1(b){while(b._start=b._waiting&&b._active<b._size){var d=b._ended+b._active,c=b._tasks[d],e=c.length-1,f=c[e];c[e]=end(b,d);--b._waiting,++b._active;c=f.apply(null,c);if(!b._tasks[d]){continue}b._tasks[d]=c||i7}}function end(b,c){return function(d,e){if(!b._tasks[c]){return}--b._active,++b._ended;b._tasks[c]=null;if(b._error!=null){return}if(d!=null){abort(b,d)}else {b._data[c]=e;if(b._waiting){poke$1(b)}else {maybeNotify(b)}}}}function abort(b,e){var c=b._tasks.length,d;b._error=e;b._data=undefined;b._waiting=NaN;while(--c>=0){if(d=b._tasks[c]){b._tasks[c]=null;if(d.abort){try{d.abort()}catch(kL){}}}}b._active=NaN;maybeNotify(b)}function maybeNotify(b){if(!b._active&&b._call){var c=b._data;b._data=undefined;b._call(b._error,c)}}function queue(b){return new Queue(arguments.length?+b:Infinity)}var ji=function(b,c){b=b==null?0:+b;c=c==null?1:+c;if(arguments.length===1){c=b,b=0}else {c-=b}return function(){return Math.random()*c+b}};var fc=function(e,d){var b,c;e=e==null?0:+e;d=d==null?1:+d;return function(){var f;if(b!=null){f=b,b=null}else {do{b=Math.random()*2-1;f=Math.random()*2-1;c=b*b+f*f}while(!c||c>1)}return e+d*f*Math.sqrt(-2*Math.log(c)/c)}};var h9=function(){var b=fc.apply(this,arguments);return function(){return Math.exp(b())}};var eq=function(b){return function(){for(var c=0,d=0;d<b;++d)c+=Math.random();return c}};var jM=function(b){var c=eq(b);return function(){return c()/b}};var gZ=function(b){return function(){return -Math.log(1-Math.random())/b}};var cV=function(m,h){var c,d=dispatch("beforesend","progress","load","error"),e,f=map$1(),b=new XMLHttpRequest(),l=null,j=null,k,g,i=0;if(typeof XDomainRequest!=="undefined"&&!("withCredentials" in b)&&/^(http(s)?:)?\/\//.test(m)){b=new XDomainRequest()}"onload" in b?b.onload=b.onerror=b.ontimeout=respond:b.onreadystatechange=function(c){b.readyState>3&&respond(c)};function respond(g){var e=b.status,f;if(!e&&hasResponse(b)||e>=200&&e<300||e===304){if(k){try{f=k.call(c,b)}catch(kL){d.call("error",c,kL);return}}else {f=b}d.call("load",c,f)}else {d.call("error",c,g)}}b.onprogress=function(b){d.call("progress",c,b)};c={header:function(b,d){b=(b+"").toLowerCase();if(arguments.length<2){return f.get(b)}if(d==null){f.remove(b)}else {f.set(b,d+"")}return c},mimeType:function(b){if(!arguments.length){return e}e=b==null?null:b+"";return c},responseType:function(b){if(!arguments.length){return g}g=b;return c},timeout:function(b){if(!arguments.length){return i}i=+b;return c},user:function(b){return arguments.length<1?l:(l=b==null?null:b+"",c)},password:function(b){return arguments.length<1?j:(j=b==null?null:b+"",c)},response:function(b){k=b;return c},get:function(d,b){return c.send("GET",d,b)},post:function(d,b){return c.send("POST",d,b)},send:function(o,n,k){b.open(o,m,!0,l,j);if(e!=null&&!f.has("accept")){f.set("accept",e+",*/*")}if(b.setRequestHeader){f.each(function(c,d){b.setRequestHeader(d,c)})}if(e!=null&&b.overrideMimeType){b.overrideMimeType(e)}if(g!=null){b.responseType=g}if(i>0){b.timeout=i}if(k==null&&typeof n==="function"){k=n,n=null}if(k!=null&&k.length===1){k=fixCallback(k)}if(k!=null){c.on("error",k).on("load",function(b){k(null,b)})}d.call("beforesend",c,b);b.send(n==null?null:n);return c},abort:function(){b.abort();return c},on:function(){var b=d.on.apply(d,arguments);return b===d?c:b}};if(h!=null){if(typeof h!=="function"){throw new Error("invalid callback: "+h)}return c.get(h)}return c};function fixCallback(b){return function(c,d){b(c==null?d:null)}}function hasResponse(b){var c=b.responseType;return c&&c!=="text"?b.response:b.responseText}var bQ=function(b,c){return function(f,d){var e=cV(f).mimeType(b).response(c);if(d!=null){if(typeof d!=="function"){throw new Error("invalid callback: "+d)}return e.get(d)}return e}};var j4=bQ("text/html",function(b){return document.createRange().createContextualFragment(b.responseText)});var j6=bQ("application/json",function(b){return JSON.parse(b.responseText)});var ke=bQ("text/plain",function(b){return b.responseText});var kq=bQ("application/xml",function(c){var b=c.responseXML;if(!b){throw new Error("parse error")}return b});var fj=function(b,c){return function(g,d,f){if(arguments.length<3){f=d,d=null}var e=cV(g).mimeType(b);e.row=function(h){return arguments.length?e.response(responseOf(c,d=h)):d};e.row(d);return f?e.get(f):e}};function responseOf(b,c){return function(d){return b(d.responseText,c)}}var jQ=fj("text/csv",ey);var j$=fj("text/tab-separated-values",eL);var eQ=Array.prototype;var c3=eQ.map;var $=eQ.slice;var cO={name:"implicit"};function ordinal(b){var e=map$1(),d=[],c=cO;b=b==null?[]:$.call(b);function scale(h){var g=h+"",f=e.get(g);if(!f){if(c!==cO){return c}e.set(g,f=d.push(h))}return b[(f-1)%b.length]}scale.domain=function(f){if(!arguments.length){return d.slice()}d=[],e=map$1();var h=-1,i=f.length,g,c;while(++h<i)if(!e.has(c=(g=f[h])+"")){e.set(c,d.push(g))}return scale};scale.range=function(c){return arguments.length?(b=$.call(c),scale):b.slice()};scale.unknown=function(d){return arguments.length?(c=d,scale):c};scale.copy=function(){return ordinal().domain(d).range(b).unknown(c)};return scale}function band(){var b=ordinal().unknown(undefined),i=b.domain,k=b.range,d=[0,1],e,h,f=!1,c=0,g=0,j=0.5;delete b.unknown;function rescale(){var m=i().length,l=d[1]<d[0],b=d[l-0],o=d[1-l];e=(o-b)/Math.max(1,m-c+g*2);if(f){e=Math.floor(e)}b+=(o-b-e*(m-c))*j;h=e*(1-c);if(f){b=Math.round(b),h=Math.round(h)}var n=N(m).map(function(c){return b+e*c});return k(l?n.reverse():n)}b.domain=function(b){return arguments.length?(i(b),rescale()):i()};b.range=function(b){return arguments.length?(d=[+b[0],+b[1]],rescale()):d.slice()};b.rangeRound=function(b){return d=[+b[0],+b[1]],f=!0,rescale()};b.bandwidth=function(){return h};b.step=function(){return e};b.round=function(b){return arguments.length?(f=!!b,rescale()):f};b.padding=function(b){return arguments.length?(c=g=Math.max(0,Math.min(1,b)),rescale()):c};b.paddingInner=function(b){return arguments.length?(c=Math.max(0,Math.min(1,b)),rescale()):c};b.paddingOuter=function(b){return arguments.length?(g=Math.max(0,Math.min(1,b)),rescale()):g};b.align=function(b){return arguments.length?(j=Math.max(0,Math.min(1,b)),rescale()):j};b.copy=function(){return band().domain(i()).range(d).round(f).paddingInner(c).paddingOuter(g).align(j)};return rescale()}function pointish(b){var c=b.copy;b.padding=b.paddingOuter;delete b.paddingInner;delete b.paddingOuter;b.copy=function(){return pointish(c())};return b}function point$1(){return pointish(band().paddingInner(1))}var cv=function(b){return function(){return b}};var eC=function(b){return +b};var fC=[0,1];function deinterpolateLinear(b,c){return (c-=(b=+b))?function(d){return (d-b)/c}:cv(c)}function deinterpolateClamp(b){return function(c,d){var e=b(c=+c,d=+d);return function(f){return f<=c?0:f>=d?1:e(f)}}}function reinterpolateClamp(b){return function(c,d){var e=b(c=+c,d=+d);return function(f){return f<=0?c:f>=1?d:e(f)}}}function bimap(h,g,e,f){var b=h[0],d=h[1],c=g[0],i=g[1];if(d<b){b=e(d,b),c=f(i,c)}else {b=e(b,d),c=f(c,i)}return function(d){return c(b(d))}}function polymap(b,d,h,i){var e=Math.min(b.length,d.length)-1,f=new Array(e),g=new Array(e),c=-1;if(b[e]<b[0]){b=b.slice().reverse();d=d.slice().reverse()}while(++c<e){f[c]=h(b[c],b[c+1]);g[c]=i(d[c],d[c+1])}return function(j){var c=ai(b,j,1,e)-1;return g[c](f[c](j))}}function copy(b,c){return c.domain(b.domain()).range(b.range()).interpolate(b.interpolate()).clamp(b.clamp())}function continuous(i,j){var c=fC,b=fC,d=aS,e=!1,f,g,h;function rescale(){f=Math.min(c.length,b.length)>2?polymap:bimap;g=h=null;return scale}function scale(h){return (g||(g=f(c,b,e?deinterpolateClamp(i):i,d)))(+h)}scale.invert=function(d){return (h||(h=f(b,c,deinterpolateLinear,e?reinterpolateClamp(j):j)))(+d)};scale.domain=function(b){return arguments.length?(c=c3.call(b,eC),rescale()):c.slice()};scale.range=function(c){return arguments.length?(b=$.call(c),rescale()):b.slice()};scale.rangeRound=function(c){return b=$.call(c),d=dJ,rescale()};scale.clamp=function(b){return arguments.length?(e=!!b,rescale()):e};scale.interpolate=function(b){return arguments.length?(d=b,rescale()):d};return rescale()}var hW=function(d,h,b){var e=d[0],g=d[d.length-1],f=tickStep(e,g,h==null?10:h),c;b=formatSpecifier(b==null?",f":b);switch(b.type){case "s":{var i=Math.max(Math.abs(e),Math.abs(g));if(b.precision==null&&!isNaN(c=dO(f,i))){b.precision=c}return a.formatPrefix(b,i)};case "":case "e":case "g":case "p":case "r":{if(b.precision==null&&!isNaN(c=dS(f,Math.max(Math.abs(e),Math.abs(g))))){b.precision=c-(b.type==="e")}break};case "f":case "%":{if(b.precision==null&&!isNaN(c=dR(f))){b.precision=c-(b.type==="%")*2}break};}return a.format(b)};function linearish(b){var c=b.domain;b.ticks=function(e){var d=c();return bU(d[0],d[d.length-1],e==null?10:e)};b.tickFormat=function(e,d){return hW(c(),e,d)};b.nice=function(h){var e=c(),i=e.length-1,j=h==null?10:h,f=e[0],g=e[i],d=tickStep(f,g,j);if(d){d=tickStep(Math.floor(f/d)*d,Math.ceil(g/d)*d,j);e[0]=Math.floor(f/d)*d;e[i]=Math.ceil(g/d)*d;c(e)}return b};return b}function linear$2(){var b=continuous(deinterpolateLinear,B);b.copy=function(){return copy(b,linear$2())};return linearish(b)}function identity$6(){var b=[0,1];function scale(b){return +b}scale.invert=scale;scale.domain=scale.range=function(c){return arguments.length?(b=c3.call(c,eC),scale):b.slice()};scale.copy=function(){return identity$6().domain(b)};return linearish(scale)}var fx=function(b,h){b=b.slice();var c=0,d=b.length-1,e=b[c],f=b[d],g;if(f<e){g=c,c=d,d=g;g=e,e=f,f=g}b[c]=h.floor(e);b[d]=h.ceil(f);return b};function deinterpolate(c,b){return (b=Math.log(b/c))?function(d){return Math.log(d/c)/b}:cv(b)}function reinterpolate$1(b,c){return b<0?function(d){return -Math.pow(-c,d)*Math.pow(-b,1-d)}:function(d){return Math.pow(c,d)*Math.pow(b,1-d)}}function pow10(b){return isFinite(b)?+("1e"+b):b<0?0:b}function powp(b){return b===10?pow10:b===Math.E?Math.exp:function(c){return Math.pow(b,c)}}function logp(b){return b===Math.E?Math.log:b===10&&Math.log10||b===2&&Math.log2||(b=Math.log(b),function(c){return Math.log(c)/b})}function reflect(b){return function(c){return -b(-c)}}function log$1(){var c=continuous(deinterpolate,reinterpolate$1).domain([1,10]),f=c.domain,b=10,e=logp(10),d=powp(10);function rescale(){e=logp(b),d=powp(b);if(f()[0]<0){e=reflect(e),d=reflect(d)}return c}c.base=function(c){return arguments.length?(b=+c,rescale()):b};c.domain=function(b){return arguments.length?(f(b),rescale()):f()};c.ticks=function(o){var n=f(),j=n[0],k=n[n.length-1],q;if(q=k<j){c=j,j=k,k=c}var c=e(j),i=e(k),m,g,h,p=o==null?10:+o,l=[];if(!(b%1)&&i-c<p){c=Math.round(c)-1,i=Math.round(i)+1;if(j>0){for(;c<i;++c){for(g=1,m=d(c);g<b;++g){h=m*g;if(h<j){continue}if(h>k){break}l.push(h)}}}else {for(;c<i;++c){for(g=b-1,m=d(c);g>=1;--g){h=m*g;if(h<j){continue}if(h>k){break}l.push(h)}}}}else {l=bU(c,i,Math.min(i-c,p)).map(d)}return q?l.reverse():l};c.tickFormat=function(g,f){if(f==null){f=b===10?".0e":","}if(typeof f!=="function"){f=a.format(f)}if(g===Infinity){return f}if(g==null){g=10}var h=Math.max(1,b*g/c.ticks().length);return function(c){var i=c/d(Math.round(e(c)));if(i*b<b-0.5){i*=b}return i<=h?f(c):""}};c.nice=function(){return f(fx(f(),{floor:function(b){return d(Math.floor(e(b)))},ceil:function(b){return d(Math.ceil(e(b)))}}))};c.copy=function(){return copy(c,log$1().base(b))};return c}function raise$1(b,c){return b<0?-Math.pow(-b,c):Math.pow(b,c)}function pow$1(){var b=1,c=continuous(deinterpolate,reinterpolate),d=c.domain;function deinterpolate(d,c){return (c=raise$1(c,b)-(d=raise$1(d,b)))?function(e){return (raise$1(e,b)-d)/c}:cv(c)}function reinterpolate(c,d){d=raise$1(d,b)-(c=raise$1(c,b));return function(e){return raise$1(c+d*e,1/b)}}c.exponent=function(c){return arguments.length?(b=+c,d(d())):b};c.copy=function(){return copy(c,pow$1().exponent(b))};return linearish(c)}function sqrt$1(){return pow$1().exponent(0.5)}function quantile$$1(){var b=[],d=[],c=[];function rescale(){var e=0,f=Math.max(1,d.length);c=new Array(f-1);while(++e<f)c[e-1]=a0(b,e/f);return scale}function scale(b){if(!isNaN(b=+b)){return d[ai(c,b)]}}scale.invertExtent=function(f){var e=d.indexOf(f);return e<0?[NaN,NaN]:[e>0?c[e-1]:b[0],e<c.length?c[e]:b[b.length-1]]};scale.domain=function(e){if(!arguments.length){return b.slice()}b=[];for(var d=0,f=e.length,c;d<f;++d)if(c=e[d],c!=null&&!isNaN(c=+c)){b.push(c)}b.sort(al);return rescale()};scale.range=function(b){return arguments.length?(d=$.call(b),rescale()):d.slice()};scale.quantiles=function(){return c.slice()};scale.copy=function(){return quantile$$1().domain(b).range(d)};return scale}function quantize$1(){var e=0,f=1,b=1,c=[0.5],d=[0,1];function scale(e){if(e<=e){return d[ai(c,e,0,b)]}}function rescale(){var d=-1;c=new Array(b);while(++d<b)c[d]=((d+1)*f-(d-b)*e)/(b+1);return scale}scale.domain=function(b){return arguments.length?(e=+b[0],f=+b[1],rescale()):[e,f]};scale.range=function(c){return arguments.length?(b=(d=$.call(c)).length-1,rescale()):d.slice()};scale.invertExtent=function(h){var g=d.indexOf(h);return g<0?[NaN,NaN]:g<1?[e,c[0]]:g>=b?[c[b-1],f]:[c[g-1],c[g]]};scale.copy=function(){return quantize$1().domain([e,f]).range(d)};return linearish(scale)}function threshold$1(){var b=[0.5],c=[0,1],d=1;function scale(e){if(e<=e){return c[ai(b,e,0,d)]}}scale.domain=function(e){return arguments.length?(b=$.call(e),d=Math.min(b.length,c.length-1),scale):b.slice()};scale.range=function(e){return arguments.length?(c=$.call(e),d=Math.min(b.length,c.length-1),scale):c.slice()};scale.invertExtent=function(e){var d=c.indexOf(e);return [b[d-1],b[d]]};scale.copy=function(){return threshold$1().domain(b).range(c)};return scale}var dl=new Date();var dm=new Date();function newInterval(b,c,d,e){function interval(f){return b(f=new Date(+f)),f}interval.floor=interval;interval.ceil=function(f){return b(f=new Date(f-1)),c(f,1),b(f),f};interval.round=function(f){var g=interval(f),h=interval.ceil(f);return f-g<h-f?g:h};interval.offset=function(f,g){return c(f=new Date(+f),g==null?1:Math.floor(g)),f};interval.range=function(f,i,g){var h=[];f=interval.ceil(f);g=g==null?1:Math.floor(g);if(!(f<i)||!(g>0)){return h}do h.push(new Date(+f));while(c(f,g),b(f),f<i);return h};interval.filter=function(f){return newInterval(function(g){if(g>=g){while(b(g),!f(g))g.setTime(g-1)}},function(g,h){if(g>=g){while(--h>=0)while(c(g,1),!f(g)){}}})};if(d){interval.count=function(f,g){dl.setTime(+f),dm.setTime(+g);b(dl),b(dm);return Math.floor(d(dl,dm))};interval.every=function(f){f=Math.floor(f);return !isFinite(f)||!(f>0)?null:!(f>1)?interval:interval.filter(e?function(g){return e(g)%f===0}:function(g){return interval.count(0,g)%f===0})}}return interval}var aj=newInterval(function(){},function(b,c){b.setTime(+b+c)},function(b,c){return c-b});aj.every=function(b){b=Math.floor(b);if(!isFinite(b)||!(b>0)){return null}if(!(b>1)){return aj}return newInterval(function(c){c.setTime(Math.floor(c/b)*b)},function(c,d){c.setTime(+c+d*b)},function(c,d){return (d-c)/b})};var d$=aj.range;var bo=1000;var T=60000;var Y=3600000;var dU=86400000;var dP=604800000;var bb=newInterval(function(b){b.setTime(Math.floor(b/bo)*bo)},function(b,c){b.setTime(+b+c*bo)},function(b,c){return (c-b)/bo},function(b){return b.getUTCSeconds()});var e2=bb.range;var c_=newInterval(function(b){b.setTime(Math.floor(b/T)*T)},function(b,c){b.setTime(+b+c*T)},function(b,c){return (c-b)/T},function(b){return b.getMinutes()});var i4=c_.range;var dg=newInterval(function(c){var b=c.getTimezoneOffset()*T%Y;if(b<0){b+=Y}c.setTime(Math.floor((+c-b)/Y)*Y+b)},function(b,c){b.setTime(+b+c*Y)},function(b,c){return (c-b)/Y},function(b){return b.getHours()});var jS=dg.range;var b0=newInterval(function(b){b.setHours(0,0,0,0)},function(b,c){b.setDate(b.getDate()+c)},function(b,c){return (c-b-(c.getTimezoneOffset()-b.getTimezoneOffset())*T)/dU},function(b){return b.getDate()-1});var j2=b0.range;function weekday(b){return newInterval(function(c){c.setDate(c.getDate()-(c.getDay()+7-b)%7);c.setHours(0,0,0,0)},function(c,d){c.setDate(c.getDate()+d*7)},function(c,d){return (d-c-(d.getTimezoneOffset()-c.getTimezoneOffset())*T)/dP})}var bc=weekday(0);var c0=weekday(1);var e6=weekday(2);var ex=weekday(3);var eJ=weekday(4);var fa=weekday(5);var eG=weekday(6);var e5=bc.range;var i5=c0.range;var iP=e6.range;var h0=ex.range;var im=eJ.range;var iZ=fa.range;var ii=eG.range;var c6=newInterval(function(b){b.setDate(1);b.setHours(0,0,0,0)},function(b,c){b.setMonth(b.getMonth()+c)},function(b,c){return c.getMonth()-b.getMonth()+(c.getFullYear()-b.getFullYear())*12},function(b){return b.getMonth()});var jx=c6.range;var at=newInterval(function(b){b.setMonth(0,1);b.setHours(0,0,0,0)},function(b,c){b.setFullYear(b.getFullYear()+c)},function(b,c){return c.getFullYear()-b.getFullYear()},function(b){return b.getFullYear()});at.every=function(b){return !isFinite(b=Math.floor(b))||!(b>0)?null:newInterval(function(c){c.setFullYear(Math.floor(c.getFullYear()/b)*b);c.setMonth(0,1);c.setHours(0,0,0,0)},function(c,d){c.setFullYear(c.getFullYear()+d*b)})};var j_=at.range;var cJ=newInterval(function(b){b.setUTCSeconds(0,0)},function(b,c){b.setTime(+b+c*T)},function(b,c){return (c-b)/T},function(b){return b.getUTCMinutes()});var h$=cJ.range;var cY=newInterval(function(b){b.setUTCMinutes(0,0,0)},function(b,c){b.setTime(+b+c*Y)},function(b,c){return (c-b)/Y},function(b){return b.getUTCHours()});var iQ=cY.range;var bR=newInterval(function(b){b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCDate(b.getUTCDate()+c)},function(b,c){return (c-b)/dU},function(b){return b.getUTCDate()-1});var jj=bR.range;function utcWeekday(b){return newInterval(function(c){c.setUTCDate(c.getUTCDate()-(c.getUTCDay()+7-b)%7);c.setUTCHours(0,0,0,0)},function(c,d){c.setUTCDate(c.getUTCDate()+d*7)},function(c,d){return (d-c)/dP})}var a1=utcWeekday(0);var cK=utcWeekday(1);var ej=utcWeekday(2);var d_=utcWeekday(3);var d8=utcWeekday(4);var ew=utcWeekday(5);var d7=utcWeekday(6);var ei=a1.range;var h_=cK.range;var hz=ej.range;var g7=d_.range;var hp=d8.range;var hZ=ew.range;var ho=d7.range;var cP=newInterval(function(b){b.setUTCDate(1);b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCMonth(b.getUTCMonth()+c)},function(b,c){return c.getUTCMonth()-b.getUTCMonth()+(c.getUTCFullYear()-b.getUTCFullYear())*12},function(b){return b.getUTCMonth()});var iu=cP.range;var ap=newInterval(function(b){b.setUTCMonth(0,1);b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCFullYear(b.getUTCFullYear()+c)},function(b,c){return c.getUTCFullYear()-b.getUTCFullYear()},function(b){return b.getUTCFullYear()});ap.every=function(b){return !isFinite(b=Math.floor(b))||!(b>0)?null:newInterval(function(c){c.setUTCFullYear(Math.floor(c.getUTCFullYear()/b)*b);c.setUTCMonth(0,1);c.setUTCHours(0,0,0,0)},function(c,d){c.setUTCFullYear(c.getUTCFullYear()+d*b)})};var iR=ap.range;function localDate(b){if(0<=b.y&&b.y<100){var c=new Date(-1,b.m,b.d,b.H,b.M,b.S,b.L);c.setFullYear(b.y);return c}return new Date(b.y,b.m,b.d,b.H,b.M,b.S,b.L)}function utcDate(b){if(0<=b.y&&b.y<100){var c=new Date(Date.UTC(-1,b.m,b.d,b.H,b.M,b.S,b.L));c.setUTCFullYear(b.y);return c}return new Date(Date.UTC(b.y,b.m,b.d,b.H,b.M,b.S,b.L))}function newYear(b){return {y:b,m:0,d:1,H:0,M:0,S:0,L:0}}function formatLocale$1(b){var j=b.dateTime,k=b.date,l=b.time,h=b.periods,g=b.days,e=b.shortDays,i=b.months,f=b.shortMonths;var u=formatRe(h),q=formatLookup(h),t=formatRe(g),p=formatLookup(g),o=formatRe(e),m=formatLookup(e),v=formatRe(i),s=formatLookup(i),r=formatRe(f),n=formatLookup(f);var d={"a":formatShortWeekday,"A":formatWeekday,"b":formatShortMonth,"B":formatMonth,"c":null,"d":formatDayOfMonth,"e":formatDayOfMonth,"H":formatHour24,"I":formatHour12,"j":formatDayOfYear,"L":formatMilliseconds,"m":formatMonthNumber,"M":formatMinutes,"p":formatPeriod,"S":formatSeconds,"U":formatWeekNumberSunday,"w":formatWeekdayNumber,"W":formatWeekNumberMonday,"x":null,"X":null,"y":formatYear,"Y":formatFullYear,"Z":formatZone,"%":formatLiteralPercent};var c={"a":formatUTCShortWeekday,"A":formatUTCWeekday,"b":formatUTCShortMonth,"B":formatUTCMonth,"c":null,"d":formatUTCDayOfMonth,"e":formatUTCDayOfMonth,"H":formatUTCHour24,"I":formatUTCHour12,"j":formatUTCDayOfYear,"L":formatUTCMilliseconds,"m":formatUTCMonthNumber,"M":formatUTCMinutes,"p":formatUTCPeriod,"S":formatUTCSeconds,"U":formatUTCWeekNumberSunday,"w":formatUTCWeekdayNumber,"W":formatUTCWeekNumberMonday,"x":null,"X":null,"y":formatUTCYear,"Y":formatUTCFullYear,"Z":formatUTCZone,"%":formatLiteralPercent};var w={"a":parseShortWeekday,"A":parseWeekday,"b":parseShortMonth,"B":parseMonth,"c":parseLocaleDateTime,"d":parseDayOfMonth,"e":parseDayOfMonth,"H":parseHour24,"I":parseHour24,"j":parseDayOfYear,"L":parseMilliseconds,"m":parseMonthNumber,"M":parseMinutes,"p":parsePeriod,"S":parseSeconds,"U":parseWeekNumberSunday,"w":parseWeekdayNumber,"W":parseWeekNumberMonday,"x":parseLocaleDate,"X":parseLocaleTime,"y":parseYear,"Y":parseFullYear,"Z":parseZone,"%":parseLiteralPercent};d.x=newFormat(k,d);d.X=newFormat(l,d);d.c=newFormat(j,d);c.x=newFormat(k,c);c.X=newFormat(l,c);c.c=newFormat(j,c);function newFormat(c,d){return function(h){var g=[],e=-1,j=0,l=c.length,f,i,k;if(!(h instanceof Date)){h=new Date(+h)}while(++e<l){if(c.charCodeAt(e)===37){g.push(c.slice(j,e));if((i=fy[f=c.charAt(++e)])!=null){f=c.charAt(++e)}else {i=f==="e"?" ":"0"}if(k=d[f]){f=k(h,i)}g.push(f);j=e+1}}g.push(c.slice(j,e));return g.join("")}}function newParse(d,c){return function(g){var e=newYear(1900),h=parseSpecifier(e,d,g+="",0);if(h!=g.length){return null}if("p" in e){e.H=e.H%12+e.p*12}if("W" in e||"U" in e){if(!("w" in e)){e.w="W" in e?1:0}var f="Z" in e?utcDate(newYear(e.y)).getUTCDay():c(newYear(e.y)).getDay();e.m=0;e.d="W" in e?(e.w+6)%7+e.W*7-(f+5)%7:e.w+e.U*7-(f+6)%7}if("Z" in e){e.H+=e.Z/100|0;e.M+=e.Z%100;return utcDate(e)}return c(e)}}function parseSpecifier(i,e,g,d){var f=0,k=e.length,j=g.length,c,h;while(f<k){if(d>=j){return -1}c=e.charCodeAt(f++);if(c===37){c=e.charAt(f++);h=w[c in fy?e.charAt(f++):c];if(!h||((d=h(i,g,d))<0)){return -1}}else if(c!=g.charCodeAt(d++)){return -1}}return d}function parsePeriod(f,e,d){var c=u.exec(e.slice(d));return c?(f.p=q[c[0].toLowerCase()],d+c[0].length):-1}function parseShortWeekday(f,e,d){var c=o.exec(e.slice(d));return c?(f.w=m[c[0].toLowerCase()],d+c[0].length):-1}function parseWeekday(f,e,d){var c=t.exec(e.slice(d));return c?(f.w=p[c[0].toLowerCase()],d+c[0].length):-1}function parseShortMonth(f,e,d){var c=r.exec(e.slice(d));return c?(f.m=n[c[0].toLowerCase()],d+c[0].length):-1}function parseMonth(f,e,d){var c=v.exec(e.slice(d));return c?(f.m=s[c[0].toLowerCase()],d+c[0].length):-1}function parseLocaleDateTime(d,c,e){return parseSpecifier(d,j,c,e)}function parseLocaleDate(d,c,e){return parseSpecifier(d,k,c,e)}function parseLocaleTime(d,c,e){return parseSpecifier(d,l,c,e)}function formatShortWeekday(c){return e[c.getDay()]}function formatWeekday(c){return g[c.getDay()]}function formatShortMonth(c){return f[c.getMonth()]}function formatMonth(c){return i[c.getMonth()]}function formatPeriod(c){return h[+(c.getHours()>=12)]}function formatUTCShortWeekday(c){return e[c.getUTCDay()]}function formatUTCWeekday(c){return g[c.getUTCDay()]}function formatUTCShortMonth(c){return f[c.getUTCMonth()]}function formatUTCMonth(c){return i[c.getUTCMonth()]}function formatUTCPeriod(c){return h[+(c.getUTCHours()>=12)]}return {format:function(c){var e=newFormat(c+="",d);e.toString=function(){return c};return e},parse:function(c){var d=newParse(c+="",localDate);d.toString=function(){return c};return d},utcFormat:function(d){var e=newFormat(d+="",c);e.toString=function(){return d};return e},utcParse:function(c){var d=newParse(c,utcDate);d.toString=function(){return c};return d}}}var fy={"-":"","_":" ","0":"0"};var G=/^\s*\d+/;var ie=/^%/;var ih=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function pad(c,g,e){var f=c<0?"-":"",b=(f?-c:c)+"",d=b.length;return f+(d<e?new Array(e-d+1).join(g)+b:b)}function requote(b){return b.replace(ih,"\\$&")}function formatRe(b){return new RegExp("^(?:"+b.map(requote).join("|")+")","i")}function formatLookup(c){var d={},b=-1,e=c.length;while(++b<e)d[c[b].toLowerCase()]=b;return d}function parseWeekdayNumber(e,d,b){var c=G.exec(d.slice(b,b+1));return c?(e.w=+c[0],b+c[0].length):-1}function parseWeekNumberSunday(e,d,c){var b=G.exec(d.slice(c));return b?(e.U=+b[0],c+b[0].length):-1}function parseWeekNumberMonday(e,d,c){var b=G.exec(d.slice(c));return b?(e.W=+b[0],c+b[0].length):-1}function parseFullYear(e,d,b){var c=G.exec(d.slice(b,b+4));return c?(e.y=+c[0],b+c[0].length):-1}function parseYear(e,d,c){var b=G.exec(d.slice(c,c+2));return b?(e.y=+b[0]+(+b[0]>68?1900:2000),c+b[0].length):-1}function parseZone(e,d,c){var b=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(d.slice(c,c+6));return b?(e.Z=b[1]?0:-(b[2]+(b[3]||"00")),c+b[0].length):-1}function parseMonthNumber(e,d,b){var c=G.exec(d.slice(b,b+2));return c?(e.m=c[0]-1,b+c[0].length):-1}function parseDayOfMonth(e,d,b){var c=G.exec(d.slice(b,b+2));return c?(e.d=+c[0],b+c[0].length):-1}function parseDayOfYear(d,e,b){var c=G.exec(e.slice(b,b+3));return c?(d.m=0,d.d=+c[0],b+c[0].length):-1}function parseHour24(e,d,b){var c=G.exec(d.slice(b,b+2));return c?(e.H=+c[0],b+c[0].length):-1}function parseMinutes(e,d,b){var c=G.exec(d.slice(b,b+2));return c?(e.M=+c[0],b+c[0].length):-1}function parseSeconds(e,d,b){var c=G.exec(d.slice(b,b+2));return c?(e.S=+c[0],b+c[0].length):-1}function parseMilliseconds(e,d,b){var c=G.exec(d.slice(b,b+3));return c?(e.L=+c[0],b+c[0].length):-1}function parseLiteralPercent(e,d,b){var c=ie.exec(d.slice(b,b+1));return c?b+c[0].length:-1}function formatDayOfMonth(b,c){return pad(b.getDate(),c,2)}function formatHour24(b,c){return pad(b.getHours(),c,2)}function formatHour12(b,c){return pad(b.getHours()%12||12,c,2)}function formatDayOfYear(b,c){return pad(1+b0.count(at(b),b),c,3)}function formatMilliseconds(b,c){return pad(b.getMilliseconds(),c,3)}function formatMonthNumber(b,c){return pad(b.getMonth()+1,c,2)}function formatMinutes(b,c){return pad(b.getMinutes(),c,2)}function formatSeconds(b,c){return pad(b.getSeconds(),c,2)}function formatWeekNumberSunday(b,c){return pad(bc.count(at(b),b),c,2)}function formatWeekdayNumber(b){return b.getDay()}function formatWeekNumberMonday(b,c){return pad(c0.count(at(b),b),c,2)}function formatYear(b,c){return pad(b.getFullYear()%100,c,2)}function formatFullYear(b,c){return pad(b.getFullYear()%10000,c,4)}function formatZone(c){var b=c.getTimezoneOffset();return (b>0?"-":(b*=-1,"+"))+pad(b/60|0,"0",2)+pad(b%60,"0",2)}function formatUTCDayOfMonth(b,c){return pad(b.getUTCDate(),c,2)}function formatUTCHour24(b,c){return pad(b.getUTCHours(),c,2)}function formatUTCHour12(b,c){return pad(b.getUTCHours()%12||12,c,2)}function formatUTCDayOfYear(b,c){return pad(1+bR.count(ap(b),b),c,3)}function formatUTCMilliseconds(b,c){return pad(b.getUTCMilliseconds(),c,3)}function formatUTCMonthNumber(b,c){return pad(b.getUTCMonth()+1,c,2)}function formatUTCMinutes(b,c){return pad(b.getUTCMinutes(),c,2)}function formatUTCSeconds(b,c){return pad(b.getUTCSeconds(),c,2)}function formatUTCWeekNumberSunday(b,c){return pad(a1.count(ap(b),b),c,2)}function formatUTCWeekdayNumber(b){return b.getUTCDay()}function formatUTCWeekNumberMonday(b,c){return pad(cK.count(ap(b),b),c,2)}function formatUTCYear(b,c){return pad(b.getUTCFullYear()%100,c,2)}function formatUTCFullYear(b,c){return pad(b.getUTCFullYear()%10000,c,4)}function formatUTCZone(){return "+0000"}function formatLiteralPercent(){return "%"}var aC;defaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale$1(b){aC=formatLocale$1(b);a.timeFormat=aC.format;a.timeParse=aC.parse;a.utcFormat=aC.utcFormat;a.utcParse=aC.utcParse;return aC}var dZ="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(b){return b.toISOString()}var h6=Date.prototype.toISOString?formatIsoNative:a.utcFormat(dZ);function parseIsoNative(c){var b=new Date(c);return isNaN(b)?null:b}var iJ=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:a.utcParse(dZ);var aU=1000;var aT=aU*60;var aX=aT*60;var aY=aX*24;var hd=aY*7;var dV=aY*30;var cm=aY*365;function date$1(b){return new Date(b)}function number$2(b){return b instanceof Date?+b:+new Date(+b)}function calendar(j,i,l,k,f,d,e,m,c){var b=continuous(deinterpolateLinear,B),v=b.invert,h=b.domain;var n=c(".%L"),p=c(":%S"),o=c("%I:%M"),r=c("%I %p"),u=c("%a %d"),s=c("%b %d"),q=c("%B"),t=c("%Y");var g=[[e,1,aU],[e,5,5*aU],[e,15,15*aU],[e,30,30*aU],[d,1,aT],[d,5,5*aT],[d,15,15*aT],[d,30,30*aT],[f,1,aX],[f,3,3*aX],[f,6,6*aX],[f,12,12*aX],[k,1,aY],[k,2,2*aY],[l,1,hd],[i,1,dV],[i,3,3*dV],[j,1,cm]];function tickFormat(b){return (e(b)<b?n:d(b)<b?p:f(b)<b?o:k(b)<b?r:i(b)<b?(l(b)<b?u:s):j(b)<b?q:t)(b)}function tickInterval(b,p,q,n){if(b==null){b=10}if(typeof b==="number"){var o=Math.abs(q-p)/b,h=cL(function(g){return g[2]}).right(g,o);if(h===g.length){n=tickStep(p/cm,q/cm,b);b=j}else if(h){h=g[o/g[h-1][2]<g[h][2]/o?h-1:h];n=h[1];b=h[0]}else {n=tickStep(p,q,b);b=m}}return n==null?b:b.every(n)}b.invert=function(b){return new Date(v(b))};b.domain=function(b){return arguments.length?h(c3.call(b,number$2)):h().map(date$1)};b.ticks=function(q,r){var o=h(),g=o[0],n=o[o.length-1],p=n<g,b;if(p){b=g,g=n,n=b}b=tickInterval(q,g,n,r);b=b?b.range(g,n+1):[];return p?b.reverse():b};b.tickFormat=function(g,b){return b==null?tickFormat:c(b)};b.nice=function(n,o){var g=h();return (n=tickInterval(n,g[0],g[g.length-1],o))?h(fx(g,n)):b};b.copy=function(){return copy(b,calendar(j,i,l,k,f,d,e,m,c))};return b}var kf=function(){return calendar(at,c6,bc,b0,dg,c_,bb,aj,a.timeFormat).domain([new Date(2000,0,1),new Date(2000,0,2)])};var jk=function(){return calendar(ap,cP,a1,bR,cY,cJ,bb,aj,a.utcFormat).domain([Date.UTC(2000,0,1),Date.UTC(2000,0,2)])};var _=function(b){return b.match(/.{6}/g).map(function(c){return "#"+c})};var hC=_("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var hr=_("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");var hs=_("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");var hD=_("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var hu=br(cubehelix(300,0.5,0),cubehelix(-240,0.5,1));var kh=br(cubehelix(-100,0.75,0.35),cubehelix(80,1.5,0.8));var j1=br(cubehelix(260,0.75,0.35),cubehelix(80,1.5,0.8));var bO=cubehelix();var ig=function(b){if(b<0||b>1){b-=Math.floor(b)}var c=Math.abs(b-0.5);bO.h=360*b-100;bO.s=1.5-1.5*c;bO.l=0.8-0.9*c;return bO+""};function ramp(b){var c=b.length;return function(d){return b[Math.max(0,Math.min(c-1,Math.floor(d*c)))]}}var jm=ramp(_("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var jU=ramp(_("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var i3=ramp(_("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));var jz=ramp(_("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function sequential(c){var b=0,e=1,d=!1;function scale(g){var f=(g-b)/(e-b);return c(d?Math.max(0,Math.min(1,f)):f)}scale.domain=function(d){return arguments.length?(b=+d[0],e=+d[1],scale):[b,e]};scale.clamp=function(b){return arguments.length?(d=!!b,scale):d};scale.interpolator=function(b){return arguments.length?(c=b,scale):c};scale.copy=function(){return sequential(c).domain([b,e]).clamp(d)};return linearish(scale)}var f=function(b){return function constant(){return b}};var fh=Math.abs;var p=Math.atan2;var ar=Math.cos;var jV=Math.max;var c5=Math.min;var P=Math.sin;var aI=Math.sqrt;var o=1.0E-12;var ah=Math.PI;var bH=ah/2;var ag=2*ah;function acos$1(b){return b>1?0:b<-1?ah:Math.acos(b)}function asin$1(b){return b>=1?bH:b<=-1?-bH:Math.asin(b)}function arcInnerRadius(b){return b.innerRadius}function arcOuterRadius(b){return b.outerRadius}function arcStartAngle(b){return b.startAngle}function arcEndAngle(b){return b.endAngle}function arcPadAngle(b){return b&&b.padAngle}function intersect(b,c,k,m,h,i,l,n){var d=k-b,f=m-c,e=l-h,g=n-i,j=(e*(c-i)-g*(b-h))/(g*d-e*f);return [b+j*d,c+j*f]}function cornerTangents(C,E,D,F,r,s,G){var j=C-D,m=E-F,B=(G?s:-s)/aI(j*j+m*m),p=B*m,q=-B*j,l=C+p,o=E+q,k=D+p,n=F+q,z=(l+k)/2,A=(o+n)/2,c=k-l,b=n-o,e=c*c+b*b,i=r-s,d=l*n-k*o,h=(b<0?-1:1)*aI(jV(0,i*i*e-d*d)),f=(d*b-c*h)/e,g=(-d*c-b*h)/e,t=(d*b+c*h)/e,u=(-d*c+b*h)/e,v=f-z,x=g-A,w=t-z,y=u-A;if(v*v+x*x>w*w+y*y){f=t,g=u}return {cx:f,cy:g,x01:-p,y01:-q,x11:f*(r/i-1),y11:g*(r/i-1)}}var kj=function(){var c=arcInnerRadius,d=arcOuterRadius,i=f(0),g=null,e=arcStartAngle,h=arcEndAngle,j=arcPadAngle,b=null;function arc(){var K,X,l=+c.apply(this,arguments),m=+d.apply(this,arguments),q=e.apply(this,arguments)-bH,r=h.apply(this,arguments)-bH,H=fh(r-q),n=r>q;if(!b){b=K=path()}if(m<l){X=m,m=l,l=X}if(!(m>o)){b.moveTo(0,0)}else if(H>ag-o){b.moveTo(m*ar(q),m*P(q));b.arc(0,0,m,q,r,!n);if(l>o){b.moveTo(l*ar(r),l*P(r));b.arc(0,0,l,r,q,n)}}else {var z=q,B=r,y=q,A=r,E=H,L=H,O=j.apply(this,arguments)/2,U=(O>o)&&(g?+g.apply(this,arguments):aI(l*l+m*m)),v=c5(fh(m-l)/2,+i.apply(this,arguments)),s=v,t=v,f,k;if(U>o){var I=asin$1(U/l*P(O)),J=asin$1(U/m*P(O));if((E-=I*2)>o){I*=(n?1:-1),y+=I,A-=I}else {E=0,y=A=(q+r)/2}if((L-=J*2)>o){J*=(n?1:-1),z+=J,B-=J}else {L=0,z=B=(q+r)/2}}var w=m*ar(z),x=m*P(z),C=l*ar(A),D=l*P(A);if(v>o){var F=m*ar(B),G=m*P(B),M=l*ar(y),N=l*P(y);if(H<ah){var u=E>o?intersect(w,x,M,N,F,G,C,D):[C,D],Q=w-u[0],R=x-u[1],S=F-u[0],T=G-u[1],V=1/P(acos$1((Q*S+R*T)/(aI(Q*Q+R*R)*aI(S*S+T*T)))/2),W=aI(u[0]*u[0]+u[1]*u[1]);s=c5(v,(l-W)/(V-1));t=c5(v,(m-W)/(V+1))}}if(!(L>o)){b.moveTo(w,x)}else if(t>o){f=cornerTangents(M,N,w,x,m,t,n);k=cornerTangents(F,G,C,D,m,t,n);b.moveTo(f.cx+f.x01,f.cy+f.y01);if(t<v){b.arc(f.cx,f.cy,t,p(f.y01,f.x01),p(k.y01,k.x01),!n)}else {b.arc(f.cx,f.cy,t,p(f.y01,f.x01),p(f.y11,f.x11),!n);b.arc(0,0,m,p(f.cy+f.y11,f.cx+f.x11),p(k.cy+k.y11,k.cx+k.x11),!n);b.arc(k.cx,k.cy,t,p(k.y11,k.x11),p(k.y01,k.x01),!n)}}else {b.moveTo(w,x),b.arc(0,0,m,z,B,!n)}if(!(l>o)||!(E>o)){b.lineTo(C,D)}else if(s>o){f=cornerTangents(C,D,F,G,l,-s,n);k=cornerTangents(w,x,M,N,l,-s,n);b.lineTo(f.cx+f.x01,f.cy+f.y01);if(s<v){b.arc(f.cx,f.cy,s,p(f.y01,f.x01),p(k.y01,k.x01),!n)}else {b.arc(f.cx,f.cy,s,p(f.y01,f.x01),p(f.y11,f.x11),!n);b.arc(0,0,l,p(f.cy+f.y11,f.cx+f.x11),p(k.cy+k.y11,k.cx+k.x11),n);b.arc(k.cx,k.cy,s,p(k.y11,k.x11),p(k.y01,k.x01),!n)}}else {b.arc(0,0,l,A,y,n)}}b.closePath();if(K){return b=null,K+""||null}}arc.centroid=function(){var f=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+e.apply(this,arguments)+ +h.apply(this,arguments))/2-ah/2;return [ar(b)*f,P(b)*f]};arc.innerRadius=function(b){return arguments.length?(c=typeof b==="function"?b:f(+b),arc):c};arc.outerRadius=function(b){return arguments.length?(d=typeof b==="function"?b:f(+b),arc):d};arc.cornerRadius=function(b){return arguments.length?(i=typeof b==="function"?b:f(+b),arc):i};arc.padRadius=function(b){return arguments.length?(g=b==null?null:typeof b==="function"?b:f(+b),arc):g};arc.startAngle=function(b){return arguments.length?(e=typeof b==="function"?b:f(+b),arc):e};arc.endAngle=function(b){return arguments.length?(h=typeof b==="function"?b:f(+b),arc):h};arc.padAngle=function(b){return arguments.length?(j=typeof b==="function"?b:f(+b),arc):j};arc.context=function(c){return arguments.length?((b=c==null?null:c),arc):b};return arc};function Linear(b){this._context=b}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||(this._line!==0&&this._point===1)){this._context.closePath()}this._line=1-this._line},point:function(b,c){b=+b,c=+c;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,c):this._context.moveTo(b,c);break;case 1:this._point=2;default:this._context.lineTo(b,c);break;}}};var bv=function(b){return new Linear(b)};function x$3(b){return b[0]}function y$3(b){return b[1]}var dh=function(){var g=x$3,h=y$3,e=f(!0),c=null,d=bv,b=null;function line(i){var f,m=i.length,l,j=!1,k;if(c==null){b=d(k=path())}for(f=0;f<=m;++f){if(!(f<m&&e(l=i[f],f,i))===j){if(j=!j){b.lineStart()}else {b.lineEnd()}}if(j){b.point(+g(l,f,i),+h(l,f,i))}}if(k){return b=null,k+""||null}}line.x=function(b){return arguments.length?(g=typeof b==="function"?b:f(+b),line):g};line.y=function(b){return arguments.length?(h=typeof b==="function"?b:f(+b),line):h};line.defined=function(b){return arguments.length?(e=typeof b==="function"?b:f(!!b),line):e};line.curve=function(e){return arguments.length?(d=e,c!=null&&(b=d(c)),line):d};line.context=function(e){return arguments.length?(e==null?c=b=null:b=d(c=e),line):c};return line};var e8=function(){var d=x$3,h=null,e=f(0),i=y$3,j=f(!0),c=null,g=bv,b=null;function area(k){var f,s,m,o=k.length,l,n=!1,p,q=new Array(o),r=new Array(o);if(c==null){b=g(p=path())}for(f=0;f<=o;++f){if(!(f<o&&j(l=k[f],f,k))===n){if(n=!n){s=f;b.areaStart();b.lineStart()}else {b.lineEnd();b.lineStart();for(m=f-1;m>=s;--m){b.point(q[m],r[m])}b.lineEnd();b.areaEnd()}}if(n){q[f]=+d(l,f,k),r[f]=+e(l,f,k);b.point(h?+h(l,f,k):q[f],i?+i(l,f,k):r[f])}}if(p){return b=null,p+""||null}}function arealine(){return dh().defined(j).curve(g).context(c)}area.x=function(b){return arguments.length?(d=typeof b==="function"?b:f(+b),h=null,area):d};area.x0=function(b){return arguments.length?(d=typeof b==="function"?b:f(+b),area):d};area.x1=function(b){return arguments.length?(h=b==null?null:typeof b==="function"?b:f(+b),area):h};area.y=function(b){return arguments.length?(e=typeof b==="function"?b:f(+b),i=null,area):e};area.y0=function(b){return arguments.length?(e=typeof b==="function"?b:f(+b),area):e};area.y1=function(b){return arguments.length?(i=b==null?null:typeof b==="function"?b:f(+b),area):i};area.lineX0=area.lineY0=function(){return arealine().x(d).y(e)};area.lineY1=function(){return arealine().x(d).y(i)};area.lineX1=function(){return arealine().x(h).y(e)};area.defined=function(b){return arguments.length?(j=typeof b==="function"?b:f(!!b),area):j};area.curve=function(d){return arguments.length?(g=d,c!=null&&(b=g(c)),area):g};area.context=function(d){return arguments.length?(d==null?c=b=null:b=g(c=d),area):c};return area};var hb=function(b,c){return c<b?-1:c>b?1:c>=b?0:NaN};var hN=function(b){return b};var kn=function(){var h=hN,b=hb,c=null,d=f(0),e=f(ag),g=f(0);function pie(j){var f,k=j.length,o,t,p=0,m=new Array(k),i=new Array(k),n=+d.apply(this,arguments),r=Math.min(ag,Math.max(-ag,e.apply(this,arguments)-n)),q,u=Math.min(Math.abs(r)/k,g.apply(this,arguments)),s=u*(r<0?-1:1),l;for(f=0;f<k;++f){if((l=i[m[f]=f]=+h(j[f],f,j))>0){p+=l}}if(b!=null){m.sort(function(c,d){return b(i[c],i[d])})}else if(c!=null){m.sort(function(b,d){return c(j[b],j[d])})}for(f=0,t=p?(r-k*s)/p:0;f<k;++f,n=q){o=m[f],l=i[o],q=n+(l>0?l*t:0)+s,i[o]={data:j[o],index:f,value:l,startAngle:n,endAngle:q,padAngle:u}}return i}pie.value=function(b){return arguments.length?(h=typeof b==="function"?b:f(+b),pie):h};pie.sortValues=function(d){return arguments.length?(b=d,c=null,pie):b};pie.sort=function(d){return arguments.length?(c=d,b=null,pie):c};pie.startAngle=function(b){return arguments.length?(d=typeof b==="function"?b:f(+b),pie):d};pie.endAngle=function(b){return arguments.length?(e=typeof b==="function"?b:f(+b),pie):e};pie.padAngle=function(b){return arguments.length?(g=typeof b==="function"?b:f(+b),pie):g};return pie};var dH=curveRadial(bv);function Radial(b){this._curve=b}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(b,c){this._curve.point(c*Math.sin(b),c*-Math.cos(b))}};function curveRadial(b){function radial(c){return new Radial(b(c))}radial._curve=b;return radial}function radialLine(b){var c=b.curve;b.angle=b.x,delete b.x;b.radius=b.y,delete b.y;b.curve=function(d){return arguments.length?c(curveRadial(d)):c()._curve};return b}var hi=function(){return radialLine(dh().curve(dH))};var hR=function(){var b=e8().curve(dH),c=b.curve,d=b.lineX0,e=b.lineX1,f=b.lineY0,g=b.lineY1;b.angle=b.x,delete b.x;b.startAngle=b.x0,delete b.x0;b.endAngle=b.x1,delete b.x1;b.radius=b.y,delete b.y;b.innerRadius=b.y0,delete b.y0;b.outerRadius=b.y1,delete b.y1;b.lineStartAngle=function(){return radialLine(d())},delete b.lineX0;b.lineEndAngle=function(){return radialLine(e())},delete b.lineX1;b.lineInnerRadius=function(){return radialLine(f())},delete b.lineY0;b.lineOuterRadius=function(){return radialLine(g())},delete b.lineY1;b.curve=function(b){return arguments.length?c(curveRadial(b)):c()._curve};return b};var cM={draw:function(b,d){var c=Math.sqrt(d/ah);b.moveTo(c,0);b.arc(0,0,c,0,ag)}};var eT={draw:function(c,d){var b=Math.sqrt(d/5)/2;c.moveTo(-3*b,-b);c.lineTo(-b,-b);c.lineTo(-b,-3*b);c.lineTo(b,-3*b);c.lineTo(b,-b);c.lineTo(3*b,-b);c.lineTo(3*b,b);c.lineTo(b,b);c.lineTo(b,3*b);c.lineTo(-b,3*b);c.lineTo(-b,b);c.lineTo(-3*b,b);c.closePath()}};var fp=Math.sqrt(1/3);var jg=fp*2;var eX={draw:function(b,e){var c=Math.sqrt(e/jg),d=c*fp;b.moveTo(0,-c);b.lineTo(d,0);b.lineTo(0,c);b.lineTo(-d,0);b.closePath()}};var kF=0.8908130915292852;var fQ=Math.sin(ah/10)/Math.sin(7*ah/10);var kG=Math.sin(ag/10)*fQ;var kH=-Math.cos(ag/10)*fQ;var fB={draw:function(b,j){var c=Math.sqrt(j*kF),g=kG*c,h=kH*c;b.moveTo(0,-c);b.lineTo(g,h);for(var e=1;e<5;++e){var i=ag*e/5,d=Math.cos(i),f=Math.sin(i);b.lineTo(f*c,-d*c);b.lineTo(d*g-f*h,f*g+d*h)}b.closePath()}};var ff={draw:function(d,e){var b=Math.sqrt(e),c=-b/2;d.rect(c,c,b,b)}};var c8=Math.sqrt(3);var eK={draw:function(c,d){var b=-Math.sqrt(d/(c8*3));c.moveTo(0,b*2);c.lineTo(-c8*b,-b);c.lineTo(c8*b,-b);c.closePath()}};var J=-0.5;var K=Math.sqrt(3)/2;var dB=1/Math.sqrt(12);var kK=(dB/2+1)*3;var fI={draw:function(b,j){var i=Math.sqrt(j/kK),c=i/2,g=i*dB,d=c,e=i*dB+i,f=-d,h=e;b.moveTo(c,g);b.lineTo(d,e);b.lineTo(f,h);b.lineTo(J*c-K*g,K*c+J*g);b.lineTo(J*d-K*e,K*d+J*e);b.lineTo(J*f-K*h,K*f+J*h);b.lineTo(J*c+K*g,J*g-K*c);b.lineTo(J*d+K*e,J*e-K*d);b.lineTo(J*f+K*h,J*h-K*f);b.closePath()}};var jf=[cM,eT,eX,ff,fB,eK,fI];var jH=function(){var d=f(cM),c=f(64),b=null;function symbol(){var e;if(!b){b=e=path()}d.apply(this,arguments).draw(b,+c.apply(this,arguments));if(e){return b=null,e+""||null}}symbol.type=function(b){return arguments.length?(d=typeof b==="function"?b:f(b),symbol):d};symbol.size=function(b){return arguments.length?(c=typeof b==="function"?b:f(+b),symbol):c};symbol.context=function(c){return arguments.length?(b=c==null?null:c,symbol):b};return symbol};var ab=function(){};function point$2(b,c,d){b._context.bezierCurveTo((2*b._x0+b._x1)/3,(2*b._y0+b._y1)/3,(b._x0+2*b._x1)/3,(b._y0+2*b._y1)/3,(b._x0+4*b._x1+c)/6,(b._y0+4*b._y1+d)/6)}function Basis(b){this._context=b}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break;}if(this._line||(this._line!==0&&this._point===1)){this._context.closePath()}this._line=1-this._line},point:function(b,c){b=+b,c=+c;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,c):this._context.moveTo(b,c);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,b,c);break;}this._x0=this._x1,this._x1=b;this._y0=this._y1,this._y1=c}};var iT=function(b){return new Basis(b)};function BasisClosed(b){this._context=b}BasisClosed.prototype={areaStart:ab,areaEnd:ab,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2);this._context.closePath();break};case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break};case 3:{this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4);break};}},point:function(b,c){b=+b,c=+c;switch(this._point){case 0:this._point=1;this._x2=b,this._y2=c;break;case 1:this._point=2;this._x3=b,this._y3=c;break;case 2:this._point=3;this._x4=b,this._y4=c;this._context.moveTo((this._x0+4*this._x1+b)/6,(this._y0+4*this._y1+c)/6);break;default:point$2(this,b,c);break;}this._x0=this._x1,this._x1=b;this._y0=this._y1,this._y1=c}};var gX=function(b){return new BasisClosed(b)};function BasisOpen(b){this._context=b}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){if(this._line||(this._line!==0&&this._point===3)){this._context.closePath()}this._line=1-this._line},point:function(b,c){b=+b,c=+c;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var d=(this._x0+4*this._x1+b)/6,e=(this._y0+4*this._y1+c)/6;this._line?this._context.lineTo(d,e):this._context.moveTo(d,e);break;case 3:this._point=4;default:point$2(this,b,c);break;}this._x0=this._x1,this._x1=b;this._y0=this._y1,this._y1=c}};var h2=function(b){return new BasisOpen(b)};function Bundle(b,c){this._basis=new Basis(b);this._beta=c}Bundle.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var d=this._x,f=this._y,b=d.length-1;if(b>0){var g=d[0],h=f[0],i=d[b]-g,j=f[b]-h,c=-1,e;while(++c<=b){e=c/b;this._basis.point(this._beta*d[c]+(1-this._beta)*(g+e*i),this._beta*f[c]+(1-this._beta)*(h+e*j))}}this._x=this._y=null;this._basis.lineEnd()},point:function(b,c){this._x.push(+b);this._y.push(+c)}};var jt=((function custom(b){function bundle(c){return b===1?new Basis(c):new Bundle(c,b)}bundle.beta=function(c){return custom(+c)};return bundle}))(0.85);function point$3(b,c,d){b._context.bezierCurveTo(b._x1+b._k*(b._x2-b._x0),b._y1+b._k*(b._y2-b._y0),b._x2+b._k*(b._x1-c),b._y2+b._k*(b._y1-d),b._x2,b._y2)}function Cardinal(b,c){this._context=b;this._k=(1-c)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1);break;}if(this._line||(this._line!==0&&this._point===1)){this._context.closePath()}this._line=1-this._line},point:function(b,c){b=+b,c=+c;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,c):this._context.moveTo(b,c);break;case 1:this._point=2;this._x1=b,this._y1=c;break;case 2:this._point=3;default:point$3(this,b,c);break;}this._x0=this._x1,this._x1=this._x2,this._x2=b;this._y0=this._y1,this._y1=this._y2,this._y2=c}};var iv=((function custom(b){function cardinal(c){return new Cardinal(c,b)}cardinal.tension=function(c){return custom(+c)};return cardinal}))(0);function CardinalClosed(b,c){this._context=b;this._k=(1-c)/6}CardinalClosed.prototype={areaStart:ab,areaEnd:ab,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break};case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break};case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break};}},point:function(b,c){b=+b,c=+c;switch(this._point){case 0:this._point=1;this._x3=b,this._y3=c;break;case 1:this._point=2;this._context.moveTo(this._x4=b,this._y4=c);break;case 2:this._point=3;this._x5=b,this._y5=c;break;default:point$3(this,b,c);break;}this._x0=this._x1,this._x1=this._x2,this._x2=b;this._y0=this._y1,this._y1=this._y2,this._y2=c}};var gF=((function custom(b){function cardinal(c){return new CardinalClosed(c,b)}cardinal.tension=function(c){return custom(+c)};return cardinal}))(0);function CardinalOpen(b,c){this._context=b;this._k=(1-c)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){if(this._line||(this._line!==0&&this._point===3)){this._context.closePath()}this._line=1-this._line},point:function(b,c){b=+b,c=+c;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,b,c);break;}this._x0=this._x1,this._x1=this._x2,this._x2=b;this._y0=this._y1,this._y1=this._y2,this._y2=c}};var g9=((function custom(b){function cardinal(c){return new CardinalOpen(c,b)}cardinal.tension=function(c){return custom(+c)};return cardinal}))(0);function point$4(b,k,l){var c=b._x1,e=b._y1,d=b._x2,f=b._y2;if(b._l01_a>o){var g=2*b._l01_2a+3*b._l01_a*b._l12_a+b._l12_2a,j=3*b._l01_a*(b._l01_a+b._l12_a);c=(c*g-b._x0*b._l12_2a+b._x2*b._l01_2a)/j;e=(e*g-b._y0*b._l12_2a+b._y2*b._l01_2a)/j}if(b._l23_a>o){var h=2*b._l23_2a+3*b._l23_a*b._l12_a+b._l12_2a,i=3*b._l23_a*(b._l23_a+b._l12_a);d=(d*h+b._x1*b._l23_2a-k*b._l12_2a)/i;f=(f*h+b._y1*b._l23_2a-l*b._l12_2a)/i}b._context.bezierCurveTo(c,e,d,f,b._x2,b._y2)}function CatmullRom(b,c){this._context=b;this._alpha=c}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break;}if(this._line||(this._line!==0&&this._point===1)){this._context.closePath()}this._line=1-this._line},point:function(b,c){b=+b,c=+c;if(this._point){var d=this._x2-b,e=this._y2-c;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(d*d+e*e,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,c):this._context.moveTo(b,c);break;case 1:this._point=2;break;case 2:this._point=3;default:point$4(this,b,c);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=b;this._y0=this._y1,this._y1=this._y2,this._y2=c}};var hE=((function custom(b){function catmullRom(c){return b?new CatmullRom(c,b):new Cardinal(c,0)}catmullRom.alpha=function(c){return custom(+c)};return catmullRom}))(0.5);function CatmullRomClosed(b,c){this._context=b;this._alpha=c}CatmullRomClosed.prototype={areaStart:ab,areaEnd:ab,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break};case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break};case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break};}},point:function(b,c){b=+b,c=+c;if(this._point){var d=this._x2-b,e=this._y2-c;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(d*d+e*e,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=b,this._y3=c;break;case 1:this._point=2;this._context.moveTo(this._x4=b,this._y4=c);break;case 2:this._point=3;this._x5=b,this._y5=c;break;default:point$4(this,b,c);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=b;this._y0=this._y1,this._y1=this._y2,this._y2=c}};var gb=((function custom(b){function catmullRom(c){return b?new CatmullRomClosed(c,b):new CardinalClosed(c,0)}catmullRom.alpha=function(c){return custom(+c)};return catmullRom}))(0.5);function CatmullRomOpen(b,c){this._context=b;this._alpha=c}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){if(this._line||(this._line!==0&&this._point===3)){this._context.closePath()}this._line=1-this._line},point:function(b,c){b=+b,c=+c;if(this._point){var d=this._x2-b,e=this._y2-c;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(d*d+e*e,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$4(this,b,c);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=b;this._y0=this._y1,this._y1=this._y2,this._y2=c}};var gG=((function custom(b){function catmullRom(c){return b?new CatmullRomOpen(c,b):new CardinalOpen(c,0)}catmullRom.alpha=function(c){return custom(+c)};return catmullRom}))(0.5);function LinearClosed(b){this._context=b}LinearClosed.prototype={areaStart:ab,areaEnd:ab,lineStart:function(){this._point=0},lineEnd:function(){if(this._point){this._context.closePath()}},point:function(b,c){b=+b,c=+c;if(this._point){this._context.lineTo(b,c)}else {this._point=1,this._context.moveTo(b,c)}}};var hg=function(b){return new LinearClosed(b)};function sign$1(b){return b<0?-1:1}function slope3(b,g,h){var c=b._x1-b._x0,d=g-b._x1,e=(b._y1-b._y0)/(c||d<0&&-0),f=(h-b._y1)/(d||c<0&&-0),i=(e*d+f*c)/(c+d);return (sign$1(e)+sign$1(f))*Math.min(Math.abs(e),Math.abs(f),0.5*Math.abs(i))||0}function slope2(b,d){var c=b._x1-b._x0;return c?(3*(b._y1-b._y0)/c-d)/2:d}function point$5(b,g,h){var e=b._x0,i=b._y0,d=b._x1,f=b._y1,c=(d-e)/3;b._context.bezierCurveTo(e+c,i+c*g,d-c,f-c*h,d,f)}function MonotoneX(b){this._context=b}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$5(this,this._t0,slope2(this,this._t0));break;}if(this._line||(this._line!==0&&this._point===1)){this._context.closePath()}this._line=1-this._line},point:function(b,c){var d=NaN;b=+b,c=+c;if(b===this._x1&&c===this._y1){return}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,c):this._context.moveTo(b,c);break;case 1:this._point=2;break;case 2:this._point=3;point$5(this,slope2(this,d=slope3(this,b,c)),d);break;default:point$5(this,this._t0,d=slope3(this,b,c));break;}this._x0=this._x1,this._x1=b;this._y0=this._y1,this._y1=c;this._t0=d}};function MonotoneY(b){this._context=new ReflectContext(b)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(b,c){MonotoneX.prototype.point.call(this,c,b)};function ReflectContext(b){this._context=b}ReflectContext.prototype={moveTo:function(b,c){this._context.moveTo(c,b)},closePath:function(){this._context.closePath()},lineTo:function(b,c){this._context.lineTo(c,b)},bezierCurveTo:function(b,d,c,e,f,g){this._context.bezierCurveTo(d,b,e,c,g,f)}};function monotoneX(b){return new MonotoneX(b)}function monotoneY(b){return new MonotoneY(b)}function Natural(b){this._context=b}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var b=this._x,d=this._y,f=b.length;if(f){this._line?this._context.lineTo(b[0],d[0]):this._context.moveTo(b[0],d[0]);if(f===2){this._context.lineTo(b[1],d[1])}else {var g=controlPoints(b),h=controlPoints(d);for(var c=0,e=1;e<f;++c,++e){this._context.bezierCurveTo(g[0][c],h[0][c],g[1][c],h[1][c],b[e],d[e])}}}if(this._line||(this._line!==0&&f===1)){this._context.closePath()}this._line=1-this._line;this._x=this._y=null},point:function(b,c){this._x.push(+b);this._y.push(+c)}};function controlPoints(f){var b,c=f.length-1,h,d=new Array(c),e=new Array(c),g=new Array(c);d[0]=0,e[0]=2,g[0]=f[0]+2*f[1];for(b=1;b<c-1;++b)d[b]=1,e[b]=4,g[b]=4*f[b]+2*f[b+1];d[c-1]=2,e[c-1]=7,g[c-1]=8*f[c-1]+f[c];for(b=1;b<c;++b)h=d[b]/e[b-1],e[b]-=h,g[b]-=h*g[b-1];d[c-1]=g[c-1]/e[c-1];for(b=c-2;b>=0;--b)d[b]=(g[b]-d[b+1])/e[b];e[c-1]=(f[c]+d[c-1])/2;for(b=0;b<c-1;++b)e[b]=2*f[b+1]-d[b+1];return [d,e]}var i6=function(b){return new Natural(b)};function Step(b,c){this._context=b;this._t=c}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){if(0<this._t&&this._t<1&&this._point===2){this._context.lineTo(this._x,this._y)}if(this._line||(this._line!==0&&this._point===1)){this._context.closePath()}if(this._line>=0){this._t=1-this._t,this._line=1-this._line}},point:function(c,b){c=+c,b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(c,b):this._context.moveTo(c,b);break;case 1:this._point=2;default:{if(this._t<=0){this._context.lineTo(this._x,b);this._context.lineTo(c,b)}else {var d=this._x*(1-this._t)+c*this._t;this._context.lineTo(d,this._y);this._context.lineTo(d,b)}break};}this._x=c,this._y=b}};var kd=function(b){return new Step(b,0.5)};function stepBefore(b){return new Step(b,0)}function stepAfter(b){return new Step(b,1)}var e3=Array.prototype.slice;var aG=function(e,g){if(!((h=e.length)>1)){return}for(var f=1,d,c=e[g[0]],h,i=c.length;f<h;++f){d=c,c=e[g[f]];for(var b=0;b<i;++b){c[b][1]+=c[b][0]=isNaN(d[b][1])?d[b][0]:d[b][1]}}};var aH=function(d){var b=d.length,c=new Array(b);while(--b>=0)c[b]=b;return c};function stackValue(c,b){return c[b]}var jZ=function(){var e=f([]),c=aH,b=aG,d=stackValue;function stack(i){var n=e.apply(this,arguments),f,p=i.length,k=n.length,h=new Array(k),j;for(f=0;f<k;++f){for(var m=n[f],o=h[f]=new Array(p),g=0,l;g<p;++g){o[g]=l=[0,+d(i[g],m,g,i)];l.data=i[g]}o.key=m}for(f=0,j=c(h);f<k;++f){h[j[f]].index=f}b(h,j);return h}stack.keys=function(b){return arguments.length?(e=typeof b==="function"?b:f(e3.call(b)),stack):e};stack.value=function(b){return arguments.length?(d=typeof b==="function"?b:f(+b),stack):d};stack.order=function(b){return arguments.length?(c=b==null?aH:typeof b==="function"?b:f(e3.call(b)),stack):c};stack.offset=function(c){return arguments.length?(b=c==null?aG:c,stack):b};return stack};var jv=function(c,g){if(!((f=c.length)>0)){return}for(var b,f,d=0,h=c[0].length,e;d<h;++d){for(e=b=0;b<f;++b)e+=c[b][d][1]||0;if(e){for(b=0;b<f;++b)c[b][d][1]/=e}}aG(c,g)};var hT=function(c,f){if(!((g=c.length)>0)){return}for(var b=0,d=c[f[0]],g,i=d.length;b<i;++b){for(var e=0,h=0;e<g;++e)h+=c[e][b][1]||0;d[b][1]+=d[b][0]=-h/2}aG(c,f)};var jL=function(c,e){if(!((p=c.length)>0)||!((o=(d=c[e[0]]).length)>0)){return}for(var j=0,b=1,d,o,p;b<o;++b){for(var f=0,h=0,k=0;f<p;++f){var m=c[e[f]],g=m[b][1]||0,q=m[b-1][1]||0,l=(g-q)/2;for(var i=0;i<f;++i){var n=c[e[i]],r=n[b][1]||0,s=n[b-1][1]||0;l+=r-s}h+=g,k+=l*g}d[b-1][1]+=d[b-1][0]=j;if(h){j-=k/h}}d[b-1][1]+=d[b-1][0]=j;aG(c,e)};var d0=function(b){var c=b.map(sum$2);return aH(b).sort(function(d,e){return c[d]-c[e]})};function sum$2(b){var d=0,c=-1,f=b.length,e;while(++c<f)if(e=+b[c][1]){d+=e}return d}var hc=function(b){return d0(b).reverse()};var h8=function(e){var k=e.length,d,b,c=e.map(sum$2),j=aH(e).sort(function(b,d){return c[d]-c[b]}),i=0,g=0,h=[],f=[];for(d=0;d<k;++d){b=j[d];if(i<g){i+=c[b];h.push(b)}else {g+=c[b];f.push(b)}}return f.reverse().concat(h)};var jb=function(b){return aH(b).reverse()};var d3=function(b){return function(){return b}};function x$4(b){return b[0]}function y$4(b){return b[1]}function RedBlackTree(){this._=null}function RedBlackNode(b){b.U=b.C=b.L=b.R=b.P=b.N=null}RedBlackTree.prototype={constructor:RedBlackTree,insert:function(b,d){var c,e,f;if(b){d.P=b;d.N=b.N;if(b.N){b.N.P=d}b.N=d;if(b.R){b=b.R;while(b.L)b=b.L;b.L=d}else {b.R=d}c=b}else if(this._){b=RedBlackFirst(this._);d.P=null;d.N=b;b.P=b.L=d;c=b}else {d.P=d.N=null;this._=d;c=null}d.L=d.R=null;d.U=c;d.C=!0;b=d;while(c&&c.C){e=c.U;if(c===e.L){f=e.R;if(f&&f.C){c.C=f.C=!1;e.C=!0;b=e}else {if(b===c.R){RedBlackRotateLeft(this,c);b=c;c=b.U}c.C=!1;e.C=!0;RedBlackRotateRight(this,e)}}else {f=e.L;if(f&&f.C){c.C=f.C=!1;e.C=!0;b=e}else {if(b===c.L){RedBlackRotateRight(this,c);b=c;c=b.U}c.C=!1;e.C=!0;RedBlackRotateLeft(this,e)}}c=b.U}this._.C=!1},remove:function(c){if(c.N){c.N.P=c.P}if(c.P){c.P.N=c.N}c.N=c.P=null;var d=c.U,b,g=c.L,f=c.R,e,h;if(!g){e=f}else if(!f){e=g}else {e=RedBlackFirst(f)}if(d){if(d.L===c){d.L=e}else {d.R=e}}else {this._=e}if(g&&f){h=e.C;e.C=c.C;e.L=g;g.U=e;if(e!==f){d=e.U;e.U=c.U;c=e.R;d.L=c;e.R=f;f.U=e}else {e.U=d;d=e;c=e.R}}else {h=c.C;c=e}if(c){c.U=d}if(h){return}if(c&&c.C){c.C=!1;return}do{if(c===this._){break}if(c===d.L){b=d.R;if(b.C){b.C=!1;d.C=!0;RedBlackRotateLeft(this,d);b=d.R}if((b.L&&b.L.C)||(b.R&&b.R.C)){if(!b.R||!b.R.C){b.L.C=!1;b.C=!0;RedBlackRotateRight(this,b);b=d.R}b.C=d.C;d.C=b.R.C=!1;RedBlackRotateLeft(this,d);c=this._;break}}else {b=d.L;if(b.C){b.C=!1;d.C=!0;RedBlackRotateRight(this,d);b=d.L}if((b.L&&b.L.C)||(b.R&&b.R.C)){if(!b.L||!b.L.C){b.R.C=!1;b.C=!0;RedBlackRotateLeft(this,b);b=d.L}b.C=d.C;d.C=b.L.C=!1;RedBlackRotateRight(this,d);c=this._;break}}b.C=!0;c=d;d=d.U}while(!c.C);if(c){c.C=!1}}};function RedBlackRotateLeft(f,e){var b=e,c=e.R,d=b.U;if(d){if(d.L===b){d.L=c}else {d.R=c}}else {f._=c}c.U=d;b.U=c;b.R=c.L;if(b.R){b.R.U=b}c.L=b}function RedBlackRotateRight(f,e){var b=e,c=e.L,d=b.U;if(d){if(d.L===b){d.L=c}else {d.R=c}}else {f._=c}c.U=d;b.U=c;b.L=c.R;if(b.L){b.L.U=b}c.R=b}function RedBlackFirst(b){while(b.L)b=b.L;return b}function createEdge(d,c,f,g){var b=[null,null],e=q.push(b)-1;b.left=d;b.right=c;if(f){setEdgeEnd(b,d,c,f)}if(g){setEdgeEnd(b,c,d,g)}D[d.index].halfedges.push(e);D[c.index].halfedges.push(e);return b}function createBorderEdge(c,d,e){var b=[d,e];b.left=c;return b}function setEdgeEnd(b,e,d,c){if(!b[0]&&!b[1]){b[0]=c;b.left=e;b.right=d}else if(b.left===d){b[1]=c}else {b[0]=c}}function clipEdge(i,n,p,o,q){var j=i[0],k=i[1],g=j[0],h=j[1],l=k[0],m=k[1],c=0,d=1,e=l-g,f=m-h,b;b=n-g;if(!e&&b>0){return}b/=e;if(e<0){if(b<c){return}if(b<d){d=b}}else if(e>0){if(b>d){return}if(b>c){c=b}}b=o-g;if(!e&&b<0){return}b/=e;if(e<0){if(b>d){return}if(b>c){c=b}}else if(e>0){if(b<c){return}if(b<d){d=b}}b=p-h;if(!f&&b>0){return}b/=f;if(f<0){if(b<c){return}if(b<d){d=b}}else if(f>0){if(b>d){return}if(b>c){c=b}}b=q-h;if(!f&&b<0){return}b/=f;if(f<0){if(b>d){return}if(b>c){c=b}}else if(f>0){if(b<c){return}if(b<d){d=b}}if(!(c>0)&&!(d<1)){return !0}if(c>0){i[0]=[g+c*e,h+c*f]}if(d<1){i[1]=[g+d*e,h+d*f]}return !0}function connectEdge(i,j,f,k,g){var e=i[1];if(e){return !0}var b=i[0],q=i.left,p=i.right,l=q[0],m=q[1],n=p[0],o=p[1],h=(l+n)/2,r=(m+o)/2,c,d;if(o===m){if(h<j||h>=k){return}if(l>n){if(!b){b=[h,f]}else if(b[1]>=g){return}e=[h,g]}else {if(!b){b=[h,g]}else if(b[1]<f){return}e=[h,f]}}else {c=(l-n)/(o-m);d=r-c*h;if(c<-1||c>1){if(l>n){if(!b){b=[(f-d)/c,f]}else if(b[1]>=g){return}e=[(g-d)/c,g]}else {if(!b){b=[(g-d)/c,g]}else if(b[1]<f){return}e=[(f-d)/c,f]}}else {if(m<o){if(!b){b=[j,c*j+d]}else if(b[0]>=k){return}e=[k,c*k+d]}else {if(!b){b=[k,c*k+d]}else if(b[0]<j){return}e=[j,c*j+d]}}}i[0]=b;i[1]=e;return !0}function clipEdges(d,f,e,g){var c=q.length,b;while(c--){if(!connectEdge(b=q[c],d,f,e,g)||!clipEdge(b,d,f,e,g)||!(Math.abs(b[0][0]-b[1][0])>i||Math.abs(b[0][1]-b[1][1])>i)){delete q[c]}}}function createCell(b){return D[b.index]={site:b,halfedges:[]}}function cellHalfedgeAngle(f,d){var e=f.site,b=d.left,c=d.right;if(e===c){c=b,b=e}if(c){return Math.atan2(c[1]-b[1],c[0]-b[0])}if(e===b){b=d[1],c=d[0]}else {b=d[0],c=d[1]}return Math.atan2(b[0]-c[0],c[1]-b[1])}function cellHalfedgeStart(c,b){return b[+(b.left!==c.site)]}function cellHalfedgeEnd(c,b){return b[+(b.left===c.site)]}function sortCellHalfedges(){for(var h=0,i=D.length,g,e,b,c;h<i;++h){if((g=D[h])&&(c=(e=g.halfedges).length)){var f=new Array(c),d=new Array(c);for(b=0;b<c;++b)f[b]=b,d[b]=cellHalfedgeAngle(g,q[e[b]]);f.sort(function(b,c){return d[c]-d[b]});for(b=0;b<c;++b)d[b]=e[f[b]];for(b=0;b<c;++b)e[b]=d[b]}}}function clipCells(g,h,k,l){var t=D.length,b,c,e,d,f,r,u,m,n,s,o,p,j=!0;for(b=0;b<t;++b){if(c=D[b]){e=c.site;f=c.halfedges;d=f.length;while(d--){if(!q[f[d]]){f.splice(d,1)}}d=0,r=f.length;while(d<r){s=cellHalfedgeEnd(c,q[f[d]]),o=s[0],p=s[1];u=cellHalfedgeStart(c,q[f[++d%r]]),m=u[0],n=u[1];if(Math.abs(o-m)>i||Math.abs(p-n)>i){f.splice(d,0,q.push(createBorderEdge(e,s,Math.abs(o-g)<i&&l-p>i?[g,Math.abs(m-g)<i?n:l]:Math.abs(p-l)<i&&k-o>i?[Math.abs(n-l)<i?m:k,l]:Math.abs(o-k)<i&&p-h>i?[k,Math.abs(m-k)<i?n:h]:Math.abs(p-h)<i&&o-g>i?[Math.abs(n-h)<i?m:g,h]:null))-1);++r}}if(r){j=!1}}}if(j){var w,x,v,C=Infinity;for(b=0,j=null;b<t;++b){if(c=D[b]){e=c.site;w=e[0]-g;x=e[1]-h;v=w*w+x*x;if(v<C){C=v,j=c}}}if(j){var y=[g,h],z=[g,l],B=[k,l],A=[k,h];j.halfedges.push(q.push(createBorderEdge(e=j.site,y,z))-1,q.push(createBorderEdge(e,z,B))-1,q.push(createBorderEdge(e,B,A))-1,q.push(createBorderEdge(e,A,y))-1)}}for(b=0;b<t;++b){if(c=D[b]){if(!c.halfedges.length){delete D[b]}}}}var d9=[];var co;function Circle(){RedBlackNode(this);this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(d){var r=d.P,s=d.N;if(!r||!s){return}var k=r.site,j=d.site,l=s.site;if(k===l){return}var m=j[0],n=j[1],f=k[0]-m,g=k[1]-n,h=l[0]-m,i=l[1]-n;var o=2*(f*i-g*h);if(o>=-hL){return}var t=f*f+g*g,u=h*h+i*i,p=(i*t-g*u)/o,q=(f*u-h*t)/o;var c=d9.pop()||new Circle();c.arc=d;c.site=j;c.x=p+m;c.y=(c.cy=q+n)+Math.sqrt(p*p+q*q);d.circle=c;var e=null,b=a6._;while(b){if(c.y<b.y||(c.y===b.y&&c.x<=b.x)){if(b.L){b=b.L}else {e=b.P;break}}else {if(b.R){b=b.R}else {e=b;break}}}a6.insert(e,c);if(!e){co=c}}function detachCircle(c){var b=c.circle;if(b){if(!b.P){co=b.N}a6.remove(b);d9.push(b);RedBlackNode(b);c.circle=null}}var en=[];function Beach(){RedBlackNode(this);this.edge=this.site=this.circle=null}function createBeach(c){var b=en.pop()||new Beach();b.site=c;return b}function detachBeach(b){detachCircle(b);aD.remove(b);en.push(b);RedBlackNode(b)}function removeBeach(e){var l=e.circle,j=l.x,k=l.cy,m=[j,k],g=e.P,h=e.N,d=[e];detachBeach(e);var c=g;while(c.circle&&Math.abs(j-c.circle.x)<i&&Math.abs(k-c.circle.cy)<i){g=c.P;d.unshift(c);detachBeach(c);c=g}d.unshift(c);detachCircle(c);var b=h;while(b.circle&&Math.abs(j-b.circle.x)<i&&Math.abs(k-b.circle.cy)<i){h=b.N;d.push(b);detachBeach(b);b=h}d.push(b);detachCircle(b);var n=d.length,f;for(f=1;f<n;++f){b=d[f];c=d[f-1];setEdgeEnd(b.edge,c.site,b.site,m)}c=d[0];b=d[n-1];b.edge=createEdge(c.site,b.site,null,m);attachCircle(c);attachCircle(b)}function addBeach(e){var w=e[0],s=e[1],b,c,o,p,d=aD._;while(d){o=leftBreakPoint(d,s)-w;if(o>i){d=d.L}else {p=w-rightBreakPoint(d,s);if(p>i){if(!d.R){b=d;break}d=d.R}else {if(o>-i){b=d.P;c=d}else if(p>-i){b=d;c=d.N}else {b=c=d}break}}}createCell(e);var f=createBeach(e);aD.insert(b,f);if(!b&&!c){return}if(b===c){detachCircle(b);c=createBeach(b.site);aD.insert(f,c);f.edge=c.edge=createEdge(b.site,f.site);attachCircle(b);attachCircle(c);return}if(!c){f.edge=createEdge(b.site,f.site);return}detachCircle(b);detachCircle(c);var g=b.site,q=g[0],r=g[1],j=e[0]-q,k=e[1]-r,h=c.site,l=h[0]-q,m=h[1]-r,v=2*(j*m-k*l),t=j*j+k*k,u=l*l+m*m,n=[(m*t-k*u)/v+q,(j*u-l*t)/v+r];setEdgeEnd(c.edge,g,h,n);f.edge=createEdge(g,e,null,n);c.edge=createEdge(e,h,null,n);attachCircle(b);attachCircle(c)}function leftBreakPoint(n,j){var c=n.site,d=c[0],l=c[1],g=l-j;if(!g){return d}var m=n.P;if(!m){return -Infinity}c=m.site;var e=c[0],k=c[1],b=k-j;if(!b){return e}var h=e-d,f=1/g-1/b,i=h/b;if(f){return (-i+Math.sqrt(i*i-2*f*(h*h/(-2*b)-k+b/2+l-g/2)))/f+d}return (d+e)/2}function rightBreakPoint(e,b){var c=e.N;if(c){return leftBreakPoint(c,b)}var d=e.site;return d[1]===b?d[0]:Infinity}var i=1.0E-6;var hL=1.0E-12;var aD;var D;var a6;var q;function triangleArea(b,c,d){return (b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1])}function lexicographic(b,c){return c[1]-b[1]||c[0]-b[0]}function Diagram(e,d){var b=e.sort(lexicographic).pop(),j,k,c;q=[];D=new Array(e.length);aD=new RedBlackTree();a6=new RedBlackTree();while(!0){c=co;if(b&&(!c||b[1]<c.y||(b[1]===c.y&&b[0]<c.x))){if(b[0]!==j||b[1]!==k){addBeach(b);j=b[0],k=b[1]}b=e.pop()}else if(c){removeBeach(c.arc)}else {break}}sortCellHalfedges();if(d){var f=+d[0][0],h=+d[0][1],g=+d[1][0],i=+d[1][1];clipEdges(f,h,g,i);clipCells(f,h,g,i)}this.edges=q;this.cells=D;aD=a6=q=D=null}Diagram.prototype={constructor:Diagram,polygons:function(){var b=this.edges;return this.cells.map(function(c){var d=c.halfedges.map(function(d){return cellHalfedgeStart(c,b[d])});d.data=c.site.data;return d})},triangles:function(){var b=[],c=this.edges;this.cells.forEach(function(j,k){if(!(i=(h=j.halfedges).length)){return}var g=j.site,h,l=-1,i,f,d=c[h[i-1]],e=d.left===g?d.right:d.left;while(++l<i){f=e;d=c[h[l]];e=d.left===g?d.right:d.left;if(f&&e&&k<f.index&&k<e.index&&triangleArea(g,f,e)<0){b.push([g.data,f.data,e.data])}}});return b},links:function(){return this.edges.filter(function(b){return b.right}).map(function(b){return {source:b.left.data,target:b.right.data}})},find:function(j,k,e){var c=this,i,d=c._found||0,l=c.cells.length,b;while(!(b=c.cells[d]))if(++d>=l){return null}var g=j-b.site[0],h=k-b.site[1],f=g*g+h*h;do{b=c.cells[i=d],d=null;b.halfedges.forEach(function(n){var h=c.edges[n],g=h.left;if((g===b.site||!g)&&!(g=h.right)){return}var l=j-g[0],m=k-g[1],i=l*l+m*m;if(i<f){f=i,d=g.index}})}while(d!==null);c._found=i;return e==null||f<=e*e?b.site:null}};var jn=function(){var c=x$4,d=y$4,b=null;function voronoi(e){return new Diagram(e.map(function(b,f){var g=[Math.round(c(b,f,e)/i)*i,Math.round(d(b,f,e)/i)*i];g.index=f;g.data=b;return g}),b)}voronoi.polygons=function(b){return voronoi(b).polygons()};voronoi.links=function(b){return voronoi(b).links()};voronoi.triangles=function(b){return voronoi(b).triangles()};voronoi.x=function(b){return arguments.length?(c=typeof b==="function"?b:d3(+b),voronoi):c};voronoi.y=function(b){return arguments.length?(d=typeof b==="function"?b:d3(+b),voronoi):d};voronoi.extent=function(c){return arguments.length?(b=c==null?null:[[+c[0][0],+c[0][1]],[+c[1][0],+c[1][1]]],voronoi):b&&[[b[0][0],b[0][1]],[b[1][0],b[1][1]]]};voronoi.size=function(c){return arguments.length?(b=c==null?null:[[0,0],[+c[0],+c[1]]],voronoi):b&&[b[1][0]-b[0][0],b[1][1]-b[0][1]]};return voronoi};var d4=function(b){return function(){return b}};function ZoomEvent(c,d,b){this.target=c;this.type=d;this.transform=b}function Transform(b,c,d){this.k=b;this.x=c;this.y=d}Transform.prototype={constructor:Transform,scale:function(b){return b===1?this:new Transform(this.k*b,this.x,this.y)},translate:function(b,c){return b===0&c===0?this:new Transform(this.k,this.x+this.k*b,this.y+this.k*c)},apply:function(b){return [b[0]*this.k+this.x,b[1]*this.k+this.y]},applyX:function(b){return b*this.k+this.x},applyY:function(b){return b*this.k+this.y},invert:function(b){return [(b[0]-this.x)/this.k,(b[1]-this.y)/this.k]},invertX:function(b){return (b-this.x)/this.k},invertY:function(b){return (b-this.y)/this.k},rescaleX:function(b){return b.copy().domain(b.range().map(this.invertX,this).map(b.invert,b))},rescaleY:function(b){return b.copy().domain(b.range().map(this.invertY,this).map(b.invert,b))},toString:function(){return "translate("+this.x+","+this.y+") scale("+this.k+")"}};var cx=new Transform(1,0,0);transform$1.prototype=Transform.prototype;function transform$1(b){return b.__zoom||cx}function nopropagation$2(){a.event.stopImmediatePropagation()}var a_=function(){a.event.preventDefault();a.event.stopImmediatePropagation()};function defaultFilter$2(){return !a.event.button}function defaultExtent$1(){var b=this,d,c;if(b instanceof SVGElement){b=b.ownerSVGElement||b;d=b.width.baseVal.value;c=b.height.baseVal.value}else {d=b.clientWidth;c=b.clientHeight}return [[0,0],[d,c]]}function defaultTransform(){return this.__zoom||cx}var ki=function(){var d=defaultFilter$2,c=defaultExtent$1,j=0,e=Infinity,k=-e,l=e,n=k,o=l,h=250,m=dM,i=[],g=dispatch("start","zoom","end"),b,f,p=500,q=150;function zoom(b){b.on("wheel.zoom",wheeled).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",defaultTransform)}zoom.transform=function(b,c){var d=b.selection?b.selection():b;d.property("__zoom",defaultTransform);if(b!==d){schedule(b,c)}else {d.interrupt().each(function(){gesture(this,arguments).start().zoom(null,typeof c==="function"?c.apply(this,arguments):c).end()})}};zoom.scaleBy=function(c,b){zoom.scaleTo(c,function(){var d=this.__zoom.k,e=typeof b==="function"?b.apply(this,arguments):b;return d*e})};zoom.scaleTo=function(d,b){zoom.transform(d,function(){var g=c.apply(this,arguments),f=this.__zoom,e=centroid(g),i=f.invert(e),h=typeof b==="function"?b.apply(this,arguments):b;return constrain(translate(scale(f,h),e,i),g)})};zoom.translateBy=function(e,b,d){zoom.transform(e,function(){return constrain(this.__zoom.translate(typeof b==="function"?b.apply(this,arguments):b,typeof d==="function"?d.apply(this,arguments):d),c.apply(this,arguments))})};function scale(b,c){c=Math.max(j,Math.min(e,c));return c===b.k?b:new Transform(c,b.x,b.y)}function translate(b,c,d){var e=c[0]-d[0]*b.k,f=c[1]-d[1]*b.k;return e===b.x&&f===b.y?b:new Transform(b.k,e,f)}function constrain(b,c){var d=b.invertX(c[0][0])-k,e=b.invertX(c[1][0])-l,f=b.invertY(c[0][1])-n,g=b.invertY(c[1][1])-o;return b.translate(e>d?(d+e)/2:Math.min(0,d)||Math.max(0,e),g>f?(f+g)/2:Math.min(0,f)||Math.max(0,g))}function centroid(b){return [(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function schedule(d,b,e){d.on("start.zoom",function(){gesture(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){gesture(this,arguments).end()}).tween("zoom",function(){var g=this,i=arguments,n=gesture(g,i),f=c.apply(g,i),h=e||centroid(f),k=Math.max(f[1][0]-f[0][0],f[1][1]-f[0][1]),l=g.__zoom,j=typeof b==="function"?b.apply(g,i):b,o=m(l.invert(h).concat(k/l.k),j.invert(h).concat(k/j.k));return function(c){if(c===1){c=j}else {var g=o(c),f=k/g[2];c=new Transform(f,h[0]-g[0]*f,h[1]-g[1]*f)}n.zoom(null,c)}})}function gesture(c,e){for(var b=0,f=i.length,d;b<f;++b){if((d=i[b]).that===c){return d}}return new Gesture(c,e)}function Gesture(d,b){this.that=d;this.args=b;this.index=-1;this.active=0;this.extent=c.apply(d,b)}Gesture.prototype={start:function(){if(++this.active===1){this.index=i.push(this)-1;this.emit("start")}return this},zoom:function(c,b){if(this.mouse&&c!=="mouse"){this.mouse[1]=b.invert(this.mouse[0])}if(this.touch0&&c!=="touch"){this.touch0[1]=b.invert(this.touch0[0])}if(this.touch1&&c!=="touch"){this.touch1[1]=b.invert(this.touch1[0])}this.that.__zoom=b;this.emit("zoom");return this},end:function(){if(--this.active===0){i.splice(this.index,1);this.index=-1;this.emit("end")}return this},emit:function(b){customEvent(new ZoomEvent(zoom,b,this.that.__zoom),g.apply,g,[b,this.that,this.args])}};function wheeled(){if(!d.apply(this,arguments)){return}var b=gesture(this,arguments),f=this.__zoom,g=Math.max(j,Math.min(e,f.k*Math.pow(2,-a.event.deltaY*(a.event.deltaMode?120:1)/500))),c=af(this);if(b.wheel){if(b.mouse[0][0]!==c[0]||b.mouse[0][1]!==c[1]){b.mouse[1]=f.invert(b.mouse[0]=c)}clearTimeout(b.wheel)}else if(f.k===g){return}else {b.mouse=[c,f.invert(c)];an(this);b.start()}a_();b.wheel=setTimeout(wheelidled,q);b.zoom("mouse",constrain(translate(scale(f,g),b.mouse[0],b.mouse[1]),b.extent));function wheelidled(){b.wheel=null;b.end()}}function mousedowned(){if(f||!d.apply(this,arguments)){return}var b=gesture(this,arguments),e=C(a.event.view).on("mousemove.zoom",mousemoved,!0).on("mouseup.zoom",mouseupped,!0),c=af(this);bw(a.event.view);nopropagation$2();b.mouse=[c,this.__zoom.invert(c)];an(this);b.start();function mousemoved(){a_();b.moved=!0;b.zoom("mouse",constrain(translate(b.that.__zoom,b.mouse[0]=af(b.that),b.mouse[1]),b.extent))}function mouseupped(){e.on("mousemove.zoom mouseup.zoom",null);yesdrag(a.event.view,b.moved);a_();b.end()}}function dblclicked(){if(!d.apply(this,arguments)){return}var e=this.__zoom,b=af(this),i=e.invert(b),g=e.k*(a.event.shiftKey?0.5:2),f=constrain(translate(scale(e,g),b,i),c.apply(this,arguments));a_();if(h>0){C(this).transition().duration(h).call(schedule,f,b)}else {C(this).call(zoom.transform,f)}}function touchstarted(){if(!d.apply(this,arguments)){return}var e=gesture(this,arguments),g=a.event.changedTouches,i,j=g.length,f,h,c;nopropagation$2();for(f=0;f<j;++f){h=g[f],c=bV(this,g,h.identifier);c=[c,this.__zoom.invert(c),h.identifier];if(!e.touch0){e.touch0=c,i=!0}else if(!e.touch1){e.touch1=c}}if(b){b=clearTimeout(b);if(!e.touch1){e.end();c=C(this).on("dblclick.zoom");if(c){c.apply(this,arguments)}return}}if(i){b=setTimeout(function(){b=null},p);an(this);e.start()}}function touchmoved(){var c=gesture(this,arguments),m=a.event.changedTouches,o=m.length,l,d,e,n;a_();if(b){b=clearTimeout(b)}for(l=0;l<o;++l){d=m[l],e=bV(this,m,d.identifier);if(c.touch0&&c.touch0[2]===d.identifier){c.touch0[0]=e}else if(c.touch1&&c.touch1[2]===d.identifier){c.touch1[0]=e}}d=c.that.__zoom;if(c.touch1){var j=c.touch0[0],h=c.touch0[1],k=c.touch1[0],i=c.touch1[1],g=(g=k[0]-j[0])*g+(g=k[1]-j[1])*g,f=(f=i[0]-h[0])*f+(f=i[1]-h[1])*f;d=scale(d,Math.sqrt(g/f));e=[(j[0]+k[0])/2,(j[1]+k[1])/2];n=[(h[0]+i[0])/2,(h[1]+i[1])/2]}else if(c.touch0){e=c.touch0[0],n=c.touch0[1]}else {return}c.zoom("touch",constrain(translate(d,e,n),c.extent))}function touchended(){var b=gesture(this,arguments),e=a.event.changedTouches,g=e.length,c,d;nopropagation$2();if(f){clearTimeout(f)}f=setTimeout(function(){f=null},p);for(c=0;c<g;++c){d=e[c];if(b.touch0&&b.touch0[2]===d.identifier){delete b.touch0}else if(b.touch1&&b.touch1[2]===d.identifier){delete b.touch1}}if(b.touch1&&!b.touch0){b.touch0=b.touch1,delete b.touch1}if(b.touch0){b.touch0[1]=this.__zoom.invert(b.touch0[0])}else {b.end()}}zoom.filter=function(b){return arguments.length?(d=typeof b==="function"?b:d4(!!b),zoom):d};zoom.extent=function(b){return arguments.length?(c=typeof b==="function"?b:d4([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),zoom):c};zoom.scaleExtent=function(b){return arguments.length?(j=+b[0],e=+b[1],zoom):[j,e]};zoom.translateExtent=function(b){return arguments.length?(k=+b[0][0],l=+b[1][0],n=+b[0][1],o=+b[1][1],zoom):[[k,n],[l,o]]};zoom.duration=function(b){return arguments.length?(h=+b,zoom):h};zoom.interpolate=function(b){return arguments.length?(m=b,zoom):m};zoom.on=function(){var b=g.on.apply(g,arguments);return b===g?zoom:b};return zoom};a.version=jl;a.bisect=ai;a.bisectRight=ai;a.bisectLeft=hB;a.ascending=al;a.bisector=cL;a.cross=jP;a.descending=hJ;a.deviation=ep;a.extent=e9;a.histogram=h7;a.thresholdFreedmanDiaconis=ge;a.thresholdScott=jX;a.thresholdSturges=e4;a.max=km;a.mean=j9;a.median=jw;a.merge=c4;a.min=fF;a.pairs=jW;a.permute=i8;a.quantile=a0;a.range=N;a.scan=kc;a.shuffle=jc;a.sum=ko;a.ticks=bU;a.tickStep=tickStep;a.transpose=ev;a.variance=eM;a.zip=ks;a.axisTop=axisTop;a.axisRight=axisRight;a.axisBottom=axisBottom;a.axisLeft=axisLeft;a.brush=jN;a.brushX=brushX;a.brushY=brushY;a.brushSelection=brushSelection;a.chord=jO;a.ribbon=jD;a.nest=ka;a.set=set$2;a.map=map$1;a.keys=j7;a.values=jK;a.entries=iY;a.color=color;a.rgb=rgb;a.hsl=hsl;a.lab=lab;a.hcl=hcl;a.cubehelix=cubehelix;a.dispatch=dispatch;a.drag=j3;a.dragDisable=bw;a.dragEnable=yesdrag;a.dsvFormat=dq;a.csvParse=ey;a.csvParseRows=ha;a.csvFormat=h3;a.csvFormatRows=gY;a.tsvParse=eL;a.tsvParseRows=hn;a.tsvFormat=it;a.tsvFormatRows=g6;a.easeLinear=linear$1;a.easeQuad=quadInOut;a.easeQuadIn=quadIn;a.easeQuadOut=quadOut;a.easeQuadInOut=quadInOut;a.easeCubic=cubicInOut;a.easeCubicIn=cubicIn;a.easeCubicOut=cubicOut;a.easeCubicInOut=cubicInOut;a.easePoly=et;a.easePolyIn=jA;a.easePolyOut=i9;a.easePolyInOut=et;a.easeSin=sinInOut;a.easeSinIn=sinIn;a.easeSinOut=sinOut;a.easeSinInOut=sinInOut;a.easeExp=expInOut;a.easeExpIn=expIn;a.easeExpOut=expOut;a.easeExpInOut=expInOut;a.easeCircle=circleInOut;a.easeCircleIn=circleIn;a.easeCircleOut=circleOut;a.easeCircleInOut=circleInOut;a.easeBounce=bounceOut;a.easeBounceIn=bounceIn;a.easeBounceOut=bounceOut;a.easeBounceInOut=bounceInOut;a.easeBack=em;a.easeBackIn=jq;a.easeBackOut=iS;a.easeBackInOut=em;a.easeElastic=ec;a.easeElasticIn=h4;a.easeElasticOut=ec;a.easeElasticInOut=he;a.forceCenter=iw;a.forceCollide=iV;a.forceLink=j8;a.forceManyBody=iF;a.forceSimulation=hU;a.forceX=kp;a.forceY=kr;a.formatDefaultLocale=defaultLocale;a.formatLocale=dY;a.formatSpecifier=formatSpecifier;a.precisionFixed=dR;a.precisionPrefix=dO;a.precisionRound=dS;a.geoArea=j0;a.geoBounds=js;a.geoCentroid=ix;a.geoCircle=ju;a.geoClipExtent=iB;a.geoContains=iz;a.geoDistance=a3;a.geoGraticule=graticule;a.geoGraticule10=graticule10;a.geoInterpolate=g0;a.geoLength=eA;a.geoPath=i0;a.geoAlbers=e7;a.geoAlbersUsa=h1;a.geoAzimuthalEqualArea=f3;a.geoAzimuthalEqualAreaRaw=ci;a.geoAzimuthalEquidistant=fX;a.geoAzimuthalEquidistantRaw=ch;a.geoConicConformal=gH;a.geoConicConformalRaw=conicConformalRaw;a.geoConicEqualArea=bq;a.geoConicEqualAreaRaw=conicEqualAreaRaw;a.geoConicEquidistant=gc;a.geoConicEquidistantRaw=conicEquidistantRaw;a.geoEquirectangular=gq;a.geoEquirectangularRaw=equirectangularRaw;a.geoGnomonic=iC;a.geoGnomonicRaw=gnomonicRaw;a.geoIdentity=hM;a.geoProjection=projection;a.geoProjectionMutator=projectionMutator;a.geoMercator=iG;a.geoMercatorRaw=mercatorRaw;a.geoOrthographic=hh;a.geoOrthographicRaw=orthographicRaw;a.geoStereographic=g4;a.geoStereographicRaw=stereographicRaw;a.geoTransverseMercator=f6;a.geoTransverseMercatorRaw=transverseMercatorRaw;a.geoRotation=eF;a.geoStream=M;a.geoTransform=io;a.cluster=iU;a.hierarchy=hierarchy;a.pack=i1;a.packSiblings=iM;a.packEnclose=eY;a.partition=id;a.stratify=iN;a.tree=kg;a.treemap=i2;a.treemapBinary=jr;a.treemapDice=aZ;a.treemapSlice=bt;a.treemapSliceDice=il;a.treemapSquarify=eI;a.treemapResquarify=hS;a.interpolate=aS;a.interpolateArray=eP;a.interpolateBasis=eR;a.interpolateBasisClosed=d1;a.interpolateDate=fw;a.interpolateNumber=B;a.interpolateObject=fd;a.interpolateRound=dJ;a.interpolateString=cj;a.interpolateTransformCss=dC;a.interpolateTransformSvg=dD;a.interpolateZoom=dM;a.interpolateRgb=aV;a.interpolateRgbBasis=iL;a.interpolateRgbBasisClosed=gM;a.interpolateHsl=jT;a.interpolateHslLong=i_;a.interpolateLab=lab$1;a.interpolateHcl=jR;a.interpolateHclLong=i$;a.interpolateCubehelix=ht;a.interpolateCubehelixLong=br;a.quantize=iK;a.path=path;a.polygonArea=jp;a.polygonCentroid=hF;a.polygonHull=j5;a.polygonContains=hI;a.polygonLength=iE;a.quadtree=quadtree;a.queue=queue;a.randomUniform=ji;a.randomNormal=fc;a.randomLogNormal=h9;a.randomBates=jM;a.randomIrwinHall=eq;a.randomExponential=gZ;a.request=cV;a.html=j4;a.json=j6;a.text=ke;a.xml=kq;a.csv=jQ;a.tsv=j$;a.scaleBand=band;a.scalePoint=point$1;a.scaleIdentity=identity$6;a.scaleLinear=linear$2;a.scaleLog=log$1;a.scaleOrdinal=ordinal;a.scaleImplicit=cO;a.scalePow=pow$1;a.scaleSqrt=sqrt$1;a.scaleQuantile=quantile$$1;a.scaleQuantize=quantize$1;a.scaleThreshold=threshold$1;a.scaleTime=kf;a.scaleUtc=jk;a.schemeCategory10=hC;a.schemeCategory20b=hr;a.schemeCategory20c=hs;a.schemeCategory20=hD;a.interpolateCubehelixDefault=hu;a.interpolateRainbow=ig;a.interpolateWarm=kh;a.interpolateCool=j1;a.interpolateViridis=jm;a.interpolateMagma=jU;a.interpolateInferno=i3;a.interpolatePlasma=jz;a.scaleSequential=sequential;a.creator=cS;a.local=local$1;a.matcher=cG;a.mouse=af;a.namespace=a$;a.namespaces=cz;a.select=C;a.selectAll=ij;a.selection=selection;a.selector=bK;a.selectorAll=cq;a.touch=bV;a.touches=jh;a.window=aJ;a.customEvent=customEvent;a.arc=kj;a.area=e8;a.line=dh;a.pie=kn;a.radialArea=hR;a.radialLine=hi;a.symbol=jH;a.symbols=jf;a.symbolCircle=cM;a.symbolCross=eT;a.symbolDiamond=eX;a.symbolSquare=ff;a.symbolStar=fB;a.symbolTriangle=eK;a.symbolWye=fI;a.curveBasisClosed=gX;a.curveBasisOpen=h2;a.curveBasis=iT;a.curveBundle=jt;a.curveCardinalClosed=gF;a.curveCardinalOpen=g9;a.curveCardinal=iv;a.curveCatmullRomClosed=gb;a.curveCatmullRomOpen=gG;a.curveCatmullRom=hE;a.curveLinearClosed=hg;a.curveLinear=bv;a.curveMonotoneX=monotoneX;a.curveMonotoneY=monotoneY;a.curveNatural=i6;a.curveStep=kd;a.curveStepAfter=stepAfter;a.curveStepBefore=stepBefore;a.stack=jZ;a.stackOffsetExpand=jv;a.stackOffsetNone=aG;a.stackOffsetSilhouette=hT;a.stackOffsetWiggle=jL;a.stackOrderAscending=d0;a.stackOrderDescending=hc;a.stackOrderInsideOut=h8;a.stackOrderNone=aH;a.stackOrderReverse=jb;a.timeInterval=newInterval;a.timeMillisecond=aj;a.timeMilliseconds=d$;a.utcMillisecond=aj;a.utcMilliseconds=d$;a.timeSecond=bb;a.timeSeconds=e2;a.utcSecond=bb;a.utcSeconds=e2;a.timeMinute=c_;a.timeMinutes=i4;a.timeHour=dg;a.timeHours=jS;a.timeDay=b0;a.timeDays=j2;a.timeWeek=bc;a.timeWeeks=e5;a.timeSunday=bc;a.timeSundays=e5;a.timeMonday=c0;a.timeMondays=i5;a.timeTuesday=e6;a.timeTuesdays=iP;a.timeWednesday=ex;a.timeWednesdays=h0;a.timeThursday=eJ;a.timeThursdays=im;a.timeFriday=fa;a.timeFridays=iZ;a.timeSaturday=eG;a.timeSaturdays=ii;a.timeMonth=c6;a.timeMonths=jx;a.timeYear=at;a.timeYears=j_;a.utcMinute=cJ;a.utcMinutes=h$;a.utcHour=cY;a.utcHours=iQ;a.utcDay=bR;a.utcDays=jj;a.utcWeek=a1;a.utcWeeks=ei;a.utcSunday=a1;a.utcSundays=ei;a.utcMonday=cK;a.utcMondays=h_;a.utcTuesday=ej;a.utcTuesdays=hz;a.utcWednesday=d_;a.utcWednesdays=g7;a.utcThursday=d8;a.utcThursdays=hp;a.utcFriday=ew;a.utcFridays=hZ;a.utcSaturday=d7;a.utcSaturdays=ho;a.utcMonth=cP;a.utcMonths=iu;a.utcYear=ap;a.utcYears=iR;a.timeFormatDefaultLocale=defaultLocale$1;a.timeFormatLocale=formatLocale$1;a.isoFormat=h6;a.isoParse=iJ;a.now=now;a.timer=timer;a.timerFlush=timerFlush;a.timeout=cI;a.interval=hO;a.transition=transition;a.active=jo;a.interrupt=an;a.voronoi=jn;a.zoom=ki;a.zoomTransform=transform$1;a.zoomIdentity=cx;Object.defineProperty(a,'__esModule',{value:!0})})));Ext.define('Ext.d3.ComponentBase',{extend:'Ext.Component',onElementResize:function(c,b,a){this.handleResize({width:b,height:a})}});Ext.namespace('Ext.d3.lib').d3=!0;Ext.define('Ext.d3.Component',{extend:'Ext.d3.ComponentBase',requires:['Ext.d3.lib.d3'],isD3:!0,config:{store:null,componentCls:'',interactions:[],transitions:{none:{name:undefined,duration:0,ease:Ext.identityFn}},touchAction:{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1}},baseCls:Ext.baseCSSPrefix+'d3',defaultBindProperty:'store',isInitializing:!0,refreshDelay:100,resizeDelay:250,resizeTimerId:0,size:null,d3Components:null,constructor:function(b){var a=this;a.d3Components={};a.callParent(arguments);a.isInitializing=!1;a.on('resize','onElementResize',a)},destroy:function(){var a=this;if(a.resizeTimerId){clearTimeout(a.resizeTimerId)}a.un('resize','onElementResize',a);a.setInteractions();a.callParent()},updateComponentCls:function(a,b){var c=this.baseCls,d=this.element;if(a&&Ext.isString(a)){d.addCls(a,c);if(b){d.removeCls(b,c)}}},register:function(a){var b=this.d3Components,c=a.getId();b[c]=a},unregister:function(a){var b=this.d3Components,c=a.getId();delete b[c]},applyInteractions:function(e,d){if(!d){d=[];d.map={}}var h=this,c=[],f=d.map,b,i,a,g;c.map={};e=Ext.Array.from(e,!0);for(b=0,i=e.length;b<i;b++){a=e[b];if(!a){continue}if(a.isInteraction){g=a.getId()}else {g=a.id;a.element=h.element}a=Ext.factory(a,null,f[g],'d3.interaction');if(a){a.setComponent(h);h.addInteraction(a);c.push(a);c.map[a.getId()]=a}}for(b in f){if(!c.map[b]){a=f[b];a.destroy()}}return c},applyTransitions:function(d){var c,a,b,e={};for(c in d){a=d[c];e[c]=a=Ext.apply({},a||d.none);b=a.ease;if(typeof b==='string'){a.ease=d3['ease'+b.charAt(0).toUpperCase()+b.substr(1)]}if(!('name' in a)){a.name=this.getId()+'-'+c}}return e},createTransition:function(c,b){var a=this.getTransitions()[c];if(!b){b=d3}return b.transition(a.name).ease(a.ease).duration(a.duration)},panZoom:null,onPanZoom:Ext.emptyFn,getContentRect:Ext.emptyFn,getViewportRect:Ext.emptyFn,addInteraction:function(b){var a=this;if(b.isPanZoom){b.setContentRect(a.getContentRect.bind(a));b.setViewportRect(a.getViewportRect.bind(a));a.panZoom=b;b.on('panzoom',a.onPanZoom,a)}b.on('destroy',a.onInteractionDestroy,a)},removeInteraction:function(a){if(a.isPanZoom){a.setContentRect(null);a.setViewportRect(null);this.panZoom=null;a.un('panzoom',this.onPanZoom,this)}},onInteractionDestroy:function(a){a.un('destroy',this.onInteractionDestroy,this);this.removeInteraction(a)},applyStore:function(a){return a&&Ext.StoreManager.lookup(a)},updateStore:function(a,b){var d=this,e={datachanged:'onDataChange',buffer:d.refreshDelay,scope:d,order:'after'},c;if(b){b.un(e);if(b.getAutoDestroy()){b.destroy()}}if(a){a.on(e);if(a.isTreeStore){c=a.getRoot();if(!c.isExpanded()){a.suspendEvent('datachanged');c.on({expand:function(){a.resumeEvent('datachanged');a.fireEvent('datachanged',a)},single:!0})}}}d.onDataChange(a)},onDataChange:function(b){var a=this;if(a.isInitializing){return}a.processDataChange(b)},onDataUpdate:function(f,e,c,b,d){var a=this;if(a.isInitializing){return}a.processDataUpdate(f,e,c,b,d)},onDataLoad:function(d,c,a,b){this.processDataLoad(d,c,a,b)},processDataChange:Ext.emptyFn,processDataUpdate:Ext.emptyFn,processDataLoad:Ext.emptyFn,maskEl:null,showMask:function(b){var a=this;if(a.maskEl){a.maskEl.dom.firstChild.textContent=b;a.maskEl.setStyle('display','flex')}else {a.maskEl=this.element.createChild({style:{position:'absolute',display:'flex',alignItems:'center',justifyContent:'center',left:0,top:0,bottom:0,right:0,background:'rgba(0,0,0,0.5)'},children:[{html:b,style:{background:'rgba(0,0,0,0.8)',color:'white',fontWeight:'bold',borderRadius:'10px',padding:'10px'}}]})}},hideMask:function(){this.maskEl&&this.maskEl.setStyle('display','none')},handleResize:function(b,d){var a=this,c=a.element;b=b||(c&&c.getSize());if(!(b&&b.width&&b.height)){return}clearTimeout(a.resizeTimerId);if(d){a.resizeTimerId=0}else {a.resizeTimerId=Ext.defer(a.handleResize,a.resizeDelay,a,[b,!0]);return}a.resizeHandler(b);if(a.panZoom&&a.panZoom.updateIndicator){a.panZoom.updateIndicator()}a.size=b},resizeHandler:Ext.emptyFn,toLocalXY:function(d,c){var a=d.getXY(),b=c?c.getXY():this.element.getXY();return [a[0]-b[0],a[1]-b[1]]}});Ext.define('Ext.d3.svg.Svg',{extend:'Ext.d3.Component',xtype:['d3-svg','d3'],isSvg:!0,config:{padding:{top:0,left:0,right:0,bottom:0},clipScene:!1},defaultCls:{wrapper:Ext.baseCSSPrefix+'d3-wrapper',scene:Ext.baseCSSPrefix+'d3-scene',hidden:Ext.baseCSSPrefix+'d3-hidden',invisible:Ext.baseCSSPrefix+'d3-invisible'},defs:null,wrapper:null,wrapperClipRect:null,wrapperClipId:'wrapper-clip',scene:null,sceneRect:null,svg:null,onClassExtended:function(a,b){Ext.applyIf(b.defaultCls,a.superclass.defaultCls)},applyPadding:function(a,c){var b;if(!Ext.isObject(a)){b=Ext.util.Format.parseBox(a)}else if(!c){b=a}else {b=Ext.apply(c,a)}return b},getSvg:function(){return this.svg||(this.svg=d3.select(this.element.dom).append('svg').attr('version','1.1'))},resizeHandler:function(d){var b=this,k=b.getSvg(),c=b.getPadding(),j=b.getInherited().rtl,i=b.getWrapper(),h=b.getWrapperClipRect(),g=b.getScene(),f=d&&d.width,e=d&&d.height,a;if(!(f&&e)){return}k.attr('width',f).attr('height',e);a=b.sceneRect||(b.sceneRect={});a.x=j?c.right:c.left;a.y=c.top;a.width=f-c.left-c.right;a.height=e-c.top-c.bottom;i.attr('transform','translate('+a.x+','+a.y+')');h.attr('width',a.width).attr('height',a.height);b.onSceneResize(g,a);b.fireEvent('sceneresize',b,g,a)},updatePadding:function(){var a=this;if(!a.isConfiguring){a.resizeHandler(a.getSize())}},getSceneRect:function(){return this.sceneRect},getContentRect:function(){return this.scene&&this.scene.node().getBBox()},getViewportRect:function(){return this.sceneRect},scaleRe:/scale\((.+),(.+)\)/i,alignContentTransitionName:null,alignMap:{'c':'cc','t':'ct','b':'cb','l':'lc','r':'rc','lc':'lc','cl':'lc','rc':'rc','cr':'rc','ct':'ct','tc':'ct','cb':'cb','bc':'cb','rt':'rt','tr':'rt','rb':'rb','br':'rb','lt':'lt','tl':'lt','lb':'lb','bl':'lb'},alignContent:function(q,c){var b=this,n='',i=1,j=1,e=b.getSceneRect(),a=b.getContentRect(),h=b.scene.interrupt(b.alignContentTransitionName),f,g,l,m,d,k,o,p;if(e&&a){m=h.attr('transform');if(m){d=m.match(b.scaleRe);if(d){n=d[0];i=d[1];j=d[2]}}k=b.alignMap[q];if(!k){Ext.raise('Invalid content align options.')}o=k[0];p=k[1];switch(o){case 'c':f=e.width/2-(a.x+a.width/2)*i;break;case 'l':f=-a.x*i;break;case 'r':f=e.width-(a.x+a.width)*i;break;}switch(p){case 'c':g=e.height/2-(a.y+a.height/2)*j;break;case 't':g=-a.y*j;break;case 'b':g=e.height-(a.y+a.height)*j;break;}}if(Ext.isNumber(f)&&Ext.isNumber(g)){l=[f,g];if(c){if(typeof c==='string'){c=b.createTransition(c)}b.alignContentTransitionName=c._name;h=h.transition(c)}h.attr('transform','translate('+l+')'+n);b.panZoom&&b.panZoom.setPanZoomSilently(l)}},onSceneResize:Ext.emptyFn,getScene:function(){var a=this,c=a.getWrapper(),b=a.scene;if(!b){a.scene=b=c.append('g').classed(a.defaultCls.scene,!0);a.setupScene(b);a.fireEvent('scenesetup',a,b)}return b},clearScene:function(){var c=this,a=c.scene,b=c.defs;if(a){a=a.node();a.removeAttribute('transform');while(a.firstChild){a.removeChild(a.firstChild)}}if(b){b=b.node();while(b.firstChild){b.removeChild(b.firstChild)}}},showScene:function(){var a=this.scene;if(a){a.classed(this.defaultCls.invisible,!1)}},hideScene:function(){var a=this.scene;if(a){a.classed(this.defaultCls.invisible,!0)}},setupScene:Ext.emptyFn,onPanZoom:function(c,b,a){this.scene.attr('transform','translate('+a+')scale('+b+')')},removeInteraction:function(a){if(a.isPanZoom){this.scene.attr('transform',null)}this.callParent([a])},getWrapper:function(){var a=this,b=a.wrapper;if(!b){b=a.wrapper=a.getSvg().append('g').classed(a.defaultCls.wrapper,!0)}return b},getWrapperClipRect:function(){var a=this,b=a.wrapperClipRect;if(!b){b=a.wrapperClipRect=a.getDefs().append('clipPath').attr('id',a.wrapperClipId).append('rect').attr('fill','white')}return b},updateClipScene:function(a){this.getWrapper().attr('clip-path',a?'url(#'+this.wrapperClipId+')':'')},getDefs:function(){var a=this.defs;if(!a){a=this.defs=this.getSvg().append('defs')}return a},destroy:function(){this.getSvg().remove();this.callParent()}});Ext.define('Ext.d3.Helpers',{singleton:!0,makeScale:function(b){var c=b.type,d,a;d=c.charAt(0).toUpperCase()+c.substr(1);a=this.make('scale'+d,b);if('nice' in b&&a.nice){a.nice(this.eval(b.nice))}a._type=c;return a},makeAxis:function(c){var b=c.orient,d,a;d=b.charAt(0).toUpperCase()+b.substr(1);a=this.make('axis'+d,c);a._type=b;return a},make:function(b,a){return this.configure(d3[b](),a)},configure:function(b,e){var a,c,d;for(a in e){c=a.charAt(0)==='$';if(c){a=a.substr(1)}if(typeof b[a]==='function'){if(c){d=e['$'+a].map(function(a){if(typeof a==='string'&&!a.search('d3.')){a=(new Function('return '+a))()}return a});b[a].apply(b,d);c=!1}else {d=this.eval(e[a]);b[a](d)}}}return b},"eval":function(a){if(typeof a==='string'&&!a.search('d3.')){a=(new Function('return '+a))()}return a},isBBoxable:function(a){if(Ext.isFirefox){if(a){if(a instanceof Element){a=d3.select(a)}return document.contains(a.node())&&a.style('display')!=='none'&&a.attr('visibility')!=='hidden'}}return !0},getBBox:function(a){var b=a.style('display');if(b!=='none'){return a.node().getBBox()}},setDominantBaseline:function(b,a){b.setAttribute('dominant-baseline',a);this.fakeDominantBaseline(b,a);if(Ext.isSafari&&a==='text-after-edge'){b.setAttribute('baseline-shift','super')}},noDominantBaseline:function(){return Ext.isIE||Ext.isEdge},fakeDominantBaselineMap:{'alphabetic':'0em','ideographic':'-.24em','hanging':'.72em','mathematical':'.46em','middle':'.22em','central':'.33em','text-after-edge':'-.26em','text-before-edge':'.91em'},fakeDominantBaseline:function(c,b,d){var a;if(d||this.noDominantBaseline()){a=this.fakeDominantBaselineMap[b];if(a){c.setAttribute('dy',a)}}},fakeDominantBaselines:function(g){var h=this.fakeDominantBaselineMap,d,e,c,b,a,f;if(this.noDominantBaseline()){if(arguments.length>1){d=arguments[0];e=arguments[1];b=document.querySelectorAll(d);c=h[e];if(c){for(a=0,f=b.length;a<f;a++){b[a].setAttribute('dy',c)}}}else {for(d in g){e=g[d];c=h[e];if(c){b=document.querySelectorAll(d);for(a=0,f=b.length;a<f;a++){b[a].setAttribute('dy',c)}}}}}},unitMath:function(c,d,b){var a=parseFloat(c),e=c.substr(a.toString().length);switch(d){case '*':a*=b;break;case '+':a+=b;break;case '/':a/=b;break;case '-':a-=b;break;}return a.toString()+e},getLinkId:function(a){var b=a.search('#'),c=a.substr(b,a.length-b-1);return c},alignRect:function(g,h,a,b,f){var c,d,e;if(b&&a){switch(g){case 'center':c=b.width/2-(a.x+a.width/2);break;case 'left':c=-a.x;break;case 'right':c=b.width-(a.x+a.width);break;default:Ext.raise('Invalid value. Valid `x` values are: center, left, right.');}switch(h){case 'center':d=b.height/2-(a.y+a.height/2);break;case 'top':d=-a.y;break;case 'bottom':d=b.height-(a.y+a.height);break;default:Ext.raise('Invalid value. Valid `y` values are: center, top, bottom.');}}if(Ext.isNumber(c)&&Ext.isNumber(d)){c+=b.x;d+=b.y;e=[c,d];f.attr('transform','translate('+e+')')}},commasRe:/,+/g,getTransformComponent:function(d,i){var g=d.indexOf(i),c,f,a,b,e,h;if(g>=0){c=d.indexOf('(',g)+1;f=d.indexOf(')',c);if(c>=0&&f>=0){a=d.substr(c,f-c);a=a.replace(' ',',');a=a.replace(this.commasRe,',')}}if(a){b=a.split(',');if(b.length>1){e=parseFloat(b[0]);h=parseFloat(b[1]);return [e,h]}else {e=parseFloat(b[0]);return [e]}}},parseTransform:function(d){var a=this.getTransformComponent(d,'scale'),c=this.getTransformComponent(d,'rotate'),b=this.getTransformComponent(d,'translate');if(a){if(a.length<2){a.push(a[0])}}else {a=[0,0]}c=c?c[0]:0;if(b){if(b.length<2){b.push(0)}}else {b=[0,0]}return {scale:a,rotate:c,translate:b}}});Ext.define('Ext.d3.mixin.Detached',{extend:'Ext.Mixin',detached:null,constructor:function(a){this.detached=d3.select('body').append('svg').remove().attr('version','1.1')},getDetached:function(){return this.detached},isDetached:function(a){return a&&a.node().parentElement===this.detached.node()},attach:function(a,b){if(a instanceof d3.selection){a=a.node()}if(!(a instanceof SVGElement)){Ext.raise('The `parent` must either be a D3 selection or an SVG element.')}if(b instanceof d3.selection){a.appendChild(b.node())}else if(b instanceof SVGElement){a.appendChild(b)}else {Ext.raise('The `child` must either be a D3 selection or an SVG element.')}},detach:function(a){this.attach(this.detached,a)},destroy:function(){var a=this.detached.node();if(a&&a.parentNode){a.parentNode.removeChild(a)}this.callParent()}});Ext.define('Ext.d3.axis.Axis',{requires:['Ext.d3.Helpers'],mixins:{observable:'Ext.mixin.Observable',detached:'Ext.d3.mixin.Detached'},config:{axis:{orient:'top'},scale:{type:'linear'},title:null,parent:null,component:null},defaultCls:{self:Ext.baseCSSPrefix+'d3-axis',title:Ext.baseCSSPrefix+'d3-axis-title'},title:null,group:null,domain:null,constructor:function(b){var a=this,c;b=b||{};if('id' in b){c=b.id}else if('id' in a.config){c=a.config.id}else {c=a.getId()}a.setId(c);a.mixins.detached.constructor.call(a,b);a.group=a.getDetached().append('g').classed(a.defaultCls.self,!0).attr('id',a.getId());a.mixins.observable.constructor.call(a,b)},getGroup:function(){return this.group},getBox:function(){return this.group.node().getBBox()},applyScale:function(a,c){var b=this.getAxis();if(a){if(!Ext.isFunction(a)){a=Ext.d3.Helpers.makeScale(a)}if(b){b.scale(a)}}return a||c},applyAxis:function(a,c){var b=this.getScale();if(a){if(!Ext.isFunction(a)){a=Ext.d3.Helpers.makeAxis(a)}if(b){a.scale(b)}}return a||c},updateParent:function(b){var a=this;if(b){a.attach(b,a.group);a.render()}else {a.detach(a.group)}},updateTitle:function(b){var a=this;if(b){if(a.title){if(a.isDetached(a.title)){a.attach(a.group,a.title)}}else {a.title=a.group.append('text').classed(a.defaultCls.title,!0)}a.title.text(b.text||'');a.title.attr(b.attr);a.positionTitle(b)}else {if(a.title){a.detach(a.title)}}},getAxisLine:function(){var b=this,a=b.domain;if(!a){a=b.group.select('path.domain')}return a.empty()?null:(b.domain=a)},getTicksBBox:function(){var g=this,c=g.group,e,d,b,a,f;a=c.selectAll('.tick');if(a.size()){d=c.append('g');b=d.node();e=c.node();a.each(function(){b.appendChild(this)});f=b.getBBox();a.each(function(){e.appendChild(this)});d.remove()}return f},positionTitle:function(j){var i=this,a=i.title,s=i.getAxis(),r=i.getAxisLine(),o=s._type,n=o==='left'||o==='right',g=Ext.d3.Helpers,l='text-before-edge',m='text-after-edge',p,q,d,h,e,c,b,f=0,k=0;if(!(r&&a&&Ext.d3.Helpers.isBBoxable(i.getParent()))){return}j=j||i.getTitle();c=r.node().getBBox();b=i.getTicksBBox();p=j.alignment||'middle';q=j.position||'outside';e=q==='outside';d=j.padding||'0.5em';switch(p){case 'start':case 'left':h='start';if(n){k=c.y+c.height}else {f=c.x};break;case 'end':case 'right':h='end';if(n){k=c.y}else {f=c.x+c.width};break;case 'middle':case 'center':h='middle';if(n){k=c.y+c.height/2}else {f=c.x+c.width/2};break;}switch(o){case 'top':if(e){a.attr('y',b?b.y:0);d=g.unitMath(d,'*',-1)};g.setDominantBaseline(a.node(),e?m:l);a.attr('text-anchor',h).attr('x',f);break;case 'bottom':if(e){a.attr('y',b?b.y+b.height:0)}else {d=g.unitMath(d,'*',-1)};g.setDominantBaseline(a.node(),e?l:m);a.attr('text-anchor',h).attr('x',f);break;case 'left':if(e){f=b?b.x:0;d=g.unitMath(d,'*',-1)};g.setDominantBaseline(a.node(),e?m:l);a.attr('text-anchor',h).attr('transform','translate('+f+', '+k+')'+'rotate(-90)');break;case 'right':if(e){f=b?b.x+b.width:0}else {d=g.unitMath(d,'*',-1)};g.setDominantBaseline(a.node(),e?l:m);a.attr('text-anchor',h).attr('transform','translate('+f+', '+k+')'+'rotate(-90)');break;}a.attr('dy',d)},render:function(c){var a=this,b=a.getAxis(),e=b._type,d=a.getScale();if(!(d.domain().length&&d.range().length)){return}if(c){a.group.transition(c).call(b)}else {a.group.call(b)}a.group.attr('data-orient',e);a.positionTitle()},destroy:function(){this.mixins.detached.destroy.call(this)}});Ext.define('Ext.d3.axis.Data',{extend:'Ext.d3.axis.Axis',config:{field:null,step:null},applyAxis:function(a,c){var b=this.getComponent(),d=b.getInherited().rtl;if(a&&d){a=Ext.Object.chain(a);if(a.orient==='left'){a.orient='right'}else if(a.orient==='right'){a.orient='left'}}return this.callParent([a,c])}});Ext.define('Ext.d3.axis.Color',{requires:['Ext.d3.Helpers'],mixins:{observable:'Ext.mixin.Observable'},isColorAxis:!0,config:{scale:{merge:function(a,b){if(a&&a.type&&b&&b.type===a.type){a=Ext.Object.merge(b,a)}return a},$value:{type:'linear',range:['white','maroon']}},field:null,processor:null,minimum:null,maximum:null},constructor:function(a){this.mixins.observable.constructor.call(this,a)},applyScale:function(a,b){if(a){if(!Ext.isFunction(a)){this.isUserSetDomain=!!a.domain;a=Ext.d3.Helpers.makeScale(a)}}return a||b},updateScale:function(a){this.scale=a},updateField:function(a){this.field=a},updateProcessor:function(a){this.processor=a},getColor:function(a){var d=this.scale,c=this.field,e=this.processor,b;if(e){b=e(this,d,a,c)}else if(a&&a.data&&a.data.isModel&&c){b=d(a.data.data[c])}else {b=d(a)}return b},updateMinimum:function(){this.setDomain()},updateMaximum:function(){this.setDomain()},findDataDomain:function(b){var a=this.field,e=d3.min(b,function(c){return c.data[a]}),d=d3.max(b,function(c){return c.data[a]}),c;if(a){if(Ext.isNumber(e)&&Ext.isNumber(d)){c=[e,d]}else {c=b.map(function(c){return c.data[a]}).sort().filter(function(d,a,c){return !a||d!==c[a-1]})}}return c},setDomainFromData:function(a){if(!this.isUserSetDomain){this.setDomain(this.findDataDomain(a))}},setDomain:function(a){var c=this,b=c.getScale(),k=b.range(),e=k.length,i=c.getMinimum(),h=c.getMaximum(),j,f,g,d;if(b&&!c.isUserSetDomain){if(!a){a=b.domain()}a=a.slice();if(Ext.isNumber(i)){a[0]=i}if(Ext.isNumber(h)){a[a.length-1]=h}if(b.ticks&&a.length!==e){f=a[0];g=a[a.length-1];j=(g-f)/(e-1);a=[];for(d=0;d<e-1;d++){a.push(f+d*j)}a.push(g)}b.domain(a);c.fireEvent('scalechange',c,b)}}});Ext.define('Ext.d3.legend.Legend',{mixins:{observable:'Ext.mixin.Observable',detached:'Ext.d3.mixin.Detached'},config:{docked:'bottom',padding:30,hidden:!1,component:null},defaultCls:{self:Ext.baseCSSPrefix+'d3-legend',item:Ext.baseCSSPrefix+'d3-legend-item',label:Ext.baseCSSPrefix+'d3-legend-label',hidden:Ext.baseCSSPrefix+'d3-hidden'},constructor:function(b){var a=this;a.mixins.detached.constructor.call(a,b);a.group=a.getDetached().append('g').classed(a.defaultCls.self,!0);a.mixins.observable.constructor.call(a,b)},getGroup:function(){return this.group},applyDocked:function(a){var b=this.getComponent(),c=b.getInherited().rtl;if(c){if(a==='left'){a='right'}else if(a==='right'){a='left'}}return a},getBox:function(){var b=this,f=b.getHidden(),e=b.getDocked(),c=b.getPadding(),d=b.group.node().getBBox(),a=b.box||(b.box={});if(f){return {x:0,y:0,width:0,height:0}}a.x=d.x;a.y=d.y;a.width=d.width;a.height=d.height;switch(e){case 'right':a.x-=c;case 'left':a.width+=c;break;case 'bottom':a.y-=c;case 'top':a.height+=c;break;}return a},updateHidden:function(a){a?this.hide():this.show()},show:function(){var a=this;a.group.classed(a.defaultCls.hidden,!1);a.setHidden(!1);a.fireEvent('show',a)},hide:function(){var a=this;a.group.classed(a.defaultCls.hidden,!0);a.setHidden(!0);a.fireEvent('hide',a)},updateComponent:function(b,c){var a=this;if(c){a.detach(a.group)}if(b){a.attach(b.getScene(),a.group)}},destroy:function(){this.mixins.detached.destroy.call(this)}});Ext.define('Ext.d3.legend.Color',{extend:'Ext.d3.legend.Legend',requires:['Ext.d3.Helpers'],config:{axis:null,items:{count:5,slice:null,reverse:!1,size:{x:30,y:30}}},getScale:function(){return this.getAxis().getScale()},updateAxis:function(c,b){var a=this;if(b){b.un('scalechange',a.onScaleChange,a)}if(c){c.on('scalechange',a.onScaleChange,a)}},onScaleChange:function(b,a){this.renderItems()},updateItems:function(){if(!this.isConfiguring){this.renderItems()}},renderItems:function(){var b=this,e=b.getScale(),c=b.getItems(),f=b.getRenderedItems(),a,d;if(c.count>0&&e.ticks){a=e.ticks(c.count);if(c.slice){a=a.slice.apply(a,c.slice)}if(c.reverse){a=a.reverse()}}else {a=e.domain()}if(a){d=f.data(a);b.onAddItems(d.enter());b.onUpdateItems(d);b.onRemoveItems(d.exit())}},getRenderedItems:function(){return this.group.selectAll('.'+this.defaultCls.item)},onAddItems:function(a){var b=this;a=a.append('g').classed(b.defaultCls.item,!0);a.append('rect');a.append('text');b.onUpdateItems(a)},onUpdateItems:function(e){var d=this,a=d.getItems(),f=d.getDocked(),g=d.getScale(),b,c;b=e.select('rect').attr('width',a.size.x).attr('height',a.size.y).style('fill',g);c=e.select('text').each(function(){Ext.d3.Helpers.setDominantBaseline(this,'middle')}).attr('text-anchor','middle').text(String);switch(f){case 'left':case 'right':b.attr('transform',function(c,b){return 'translate(0,'+b*a.size.y+')'});c.attr('x',a.size.x+10).attr('y',function(c,b){return (b+0.5)*a.size.y}).attr('dx',10);break;case 'top':case 'bottom':b.attr('transform',function(c,b){return 'translate('+b*a.size.x+',0)'});c.attr('x',function(c,b){return (b+0.5)*a.size.x}).attr('y',a.size.y).attr('dy','1em');break;}},onRemoveItems:function(a){a.remove()}});Ext.define('Ext.d3.mixin.ToolTip',{extend:'Ext.Mixin',mixinConfig:{id:'d3tooltip',before:{destroy:'destroyTooltip'}},requires:['Ext.tip.ToolTip'],config:{tooltip:null},applyTooltip:function(a,b){Ext.destroy(b);if(a){a=new Ext.tip.ToolTip(Ext.merge({renderer:Ext.emptyFn,target:this.el,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,trackMouse:!0,showOnTap:!0},a));a.on('hovertarget','onTargetHover',this)}return a},onTargetHover:function(b,a){if(a.dom){Ext.callback(b.renderer,b.scope,[this,b,a.dom.__data__,a],0,this)}},destroyTooltip:function(){this.setTooltip(null)}});Ext.define('Ext.d3.HeatMap',{extend:'Ext.d3.svg.Svg',xtype:'d3-heatmap',requires:['Ext.d3.axis.Data','Ext.d3.axis.Color','Ext.d3.legend.Color','Ext.d3.Helpers'],mixins:['Ext.d3.mixin.ToolTip'],config:{componentCls:'heatmap',xAxis:{axis:{orient:'bottom'},scale:{type:'linear'}},yAxis:{axis:{orient:'left'},scale:{type:'linear'}},colorAxis:{},legend:!1,tiles:null,labels:!0,transitions:{layout:{duration:500,ease:'cubicInOut',delay:10}}},data:null,tiles:null,tilesGroup:null,tilesRect:null,legendRect:null,defaultCls:{tiles:Ext.baseCSSPrefix+'d3-tiles',tile:Ext.baseCSSPrefix+'d3-tile'},constructor:function(a){this.callParent([a]);this.mixins.d3tooltip.constructor.call(this,a)},applyTooltip:function(a,b){if(a){a.delegate='g.'+this.defaultCls.tile}return this.mixins.d3tooltip.applyTooltip.call(this,a,b)},updateTooltip:null,applyAxis:function(a,b){if(a){a=new Ext.d3.axis.Data(Ext.merge({parent:this.getScene(),component:this},a))}return a||b},updateAxis:function(c,b){var a=this;if(!a.isConfiguring){a.processData();a.renderScene()}},applyXAxis:function(b,a){return this.applyAxis(b,a)},updateXAxis:function(){this.updateAxis()},applyYAxis:function(b,a){return this.applyAxis(b,a)},updateYAxis:function(){this.updateAxis()},applyLegend:function(a,c){var b=this;if(a){a.axis=b.getColorAxis();a=new Ext.d3.legend.Color(Ext.merge({component:b},a))}return a||c},updateLegend:function(d,b){var a=this,c={show:'onLegendVisibility',hide:'onLegendVisibility',scope:a};if(b){b.un(c)}if(d){d.on(c)}if(!a.isConfiguring){a.performLayout()}},onLegendVisibility:function(){this.performLayout()},applyColorAxis:function(a,b){if(a){a=new Ext.d3.axis.Color(a)}return a||b},updateColorAxis:function(){var a=this;if(!a.isConfiguring){a.processData();a.renderScene()}},getStoreData:function(a){return a?a.getData().items:[]},processData:function(j){var a=this,b=a.data=a.getStoreData(j||a.getStore()),c=a.getXAxis(),d=a.getYAxis(),e=a.getColorAxis(),g=c.getScale(),i=d.getScale(),f=c.getField(),h=d.getField(),k=c.getStep(),l=d.getStep();a.setDomainFromData(b,f,g,k);a.setDomainFromData(b,h,i,l);e.setDomainFromData(b)},setDomainFromData:function(e,d,b,f){var a,c;if(b.bandwidth){c=e.map(function(a){return a.data[d]}).filter(function(a,g,c){return c.indexOf(a)===g});b.domain(c)}else {a=d3.extent(e,function(a){return a.data[d]});b.domain([+a[0],+a[1]+f])}},isDataProcessed:!1,processDataChange:function(b){var a=this;a.processData(b);a.isDataProcessed=!0;if(!a.isConfiguring){a.performLayout()}},onSceneResize:function(c,b){var a=this;a.callParent([c,b]);if(!a.isDataProcessed){a.processData()}a.isOldSize=!1;a.performLayout(b)},performLayout:function(e){var c=this;e=e||c.getSceneRect();if(!e){return}c.showScene();var f=c.getLegend(),i=c.getXAxis(),j=c.getYAxis(),l=i.getGroup(),m=j.getGroup(),n=i.getAxis(),o=j.getAxis(),p=i.getScale(),q=j.getScale(),r=c.getInherited().rtl,d,b,k,a,g,h;g={x:0,y:0,width:e.width,height:e.height};c.tilesRect=a=Ext.Object.chain(g);if(f){b=f.getBox();k=f.getDocked();c.legendRect=d=Ext.Object.chain(g);switch(k){case 'right':a.width-=b.width;d.width=b.width;d.x=e.width-b.width;break;case 'left':a.width-=b.width;d.width=b.width;a.x+=b.width;break;case 'bottom':a.height-=b.height;d.height=b.height;d.y=e.height-b.height;break;case 'top':a.height-=b.height;d.height=b.height;a.y+=b.height;break;}Ext.d3.Helpers.alignRect('center','center',b,d,f.getGroup())}h=[a.x,a.x+a.width];if(r){h.reverse()}p.range(h);q.range([a.y+a.height,a.y]);l.attr('transform','translate(0,'+(n._type==='top'?a.y:(a.y+a.height))+')');m.attr('transform','translate('+(o._type==='left'?a.x:(a.x+a.width))+',0)');c.renderScene()},setupScene:function(b){var a=this;a.callParent([b]);a.tilesGroup=b.append('g').classed(a.defaultCls.tiles,!0);a.hideScene()},getRenderedTiles:function(){return this.tilesGroup.selectAll('.'+this.defaultCls.tile)},renderScene:function(c){var a=this,e=a.getXAxis(),f=a.getYAxis(),h=e.getField(),i=f.getField(),g=a.hasFirstRender&&a.isOldSize?'layout':'none',b,d;c=c||a.data||a.getStoreData(a.getStore());b=a.getRenderedTiles().data(c,function(d){var a=d.data[h],b=d.data[i];if(a instanceof Date){a=+a}if(b instanceof Date){b=+b}return String(a)+'-'+String(b)});a.layoutTransition=a.createTransition(g).on('end',function(){a.layoutTransition=null});d=a.onAddTiles(b.enter());a.onUpdateTiles(b.merge(d));a.onRemoveTiles(b.exit());e.render();f.render();a.hasFirstRender=!0;a.isOldSize=!0},onAddTiles:function(f){var g=this,d=g.getTiles(),c=g.getLabels(),b,h,e,a;if(f.empty()){return f}b=f.append('g').classed(g.defaultCls.tile,!0);h=b.append('rect').attr('fill','white');if(d){for(a in d.attr){h.attr(a,d.attr[a])}b.classed(d.cls,!!d.cls);if(c){e=b.append('text').attr('opacity',0);for(a in c.attr){e.attr(a,c.attr[a])}e.classed(c.cls,!!c.cls);if(Ext.d3.Helpers.noDominantBaseline()){e.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,'central',!0)})}}}return b},onUpdateTiles:function(k){var a=this,q=a.getInherited().rtl,d=a.getXAxis(),f=a.getYAxis(),j=a.getColorAxis(),b=d.getScale(),c=f.getScale(),o=j.getScale(),r=d.getStep(),s=f.getStep(),e=b.bandwidth?b.bandwidth():b(r)-b(0),g=c.bandwidth?c.bandwidth():c(s)-c(0),m=d.getField(),n=f.getField(),h=j.getField(),p=a.hasFirstRender&&a.isOldSize&&a.getTransitions().layout.delay||0,l=function(b,a){return a*p},i=a.layoutTransition;k.select('rect').transition(i).delay(l).attr('x',function(c){var a=b(c.data[m]);if(q&&!b.bandwidth){a+=e}return a+0.5}).attr('y',function(b){var a=c(b.data[n]);if(!c.bandwidth){a+=g}return a+0.5}).attrTween('width',function(){var a=+this.getAttribute('width'),b=Math.abs(e);return function(c){return Math.max(a*(1-c)+b*c,0)}}).attrTween('height',function(){var a=+this.getAttribute('height'),b=Math.abs(g);return function(c){return Math.max(a*(1-c)+b*c,0)}}).style('fill',function(a){return o(a.data[h])});k.select('text').text(function(a){return a.data[h]}).transition(i).delay(l).attr('opacity',1).attr('x',function(a){return b(a.data[m])+e/2}).attr('y',function(a){return c(a.data[n])+g/2}).on('end',function(){this.removeAttribute('opacity')})},onRemoveTiles:function(a){a.remove()},destroy:function(){var a=this,d=a.getXAxis(),e=a.getYAxis(),b=a.getColorAxis(),c=a.getLegend();Ext.destroy(d,e,b,c);a.callParent()}});Ext.define('Ext.d3.canvas.HiDPI',{singleton:!0,relFontSizeRegEx:/(^[0-9])*(\d+(?:\.\d+)?)(px|%|em|pt)/,absFontSizeRegEx:/(xx-small)|(x-small)|(small)|(medium)|(large)|(x-large)|(xx-large)/,fillStroke:function(a,b,i){var d=a.font,j=d!==a.$oldFont,f=a.shadowOffsetX,g=a.shadowOffsetY,e=a.lineDashOffset,h=a.lineWidth,c;if(j){c=d.replace(this.relFontSizeRegEx,function(d,e,c){return parseFloat(c)*b});c=c.replace(this.absFontSizeRegEx,function(k,c,d,e,f,g,h,j){if(c){return 9*b+'px'}if(d){return 10*b+'px'}if(e){return 13*b+'px'}if(f){return 16*b+'px'}if(g){return 18*b+'px'}if(h){return 24*b+'px'}if(j){return 32*b+'px'}});a.font=c;a.$oldFont=d;a.$scaledFont=c}else {a.font=a.$scaledFont}a.shadowOffsetX=f*b;a.shadowOffsetY=g*b;a.lineDashOffset=e*b;a.lineWidth=h*b;if(arguments.length>3){a[i].apply(a,Array.prototype.slice.call(arguments,3))}else {a[i]()}a.font=d;a.shadowOffsetX=f;a.shadowOffsetY=g;a.lineDashOffset=e;a.lineWidth=h},getOverrides:function(){var b=this,a=b.getDevicePixelRatio();return this.overrides||(this.overrides={fill:function(){b.fillStroke(this,a,'$fill')},stroke:function(){b.fillStroke(this,a,'$stroke')},moveTo:function(b,c){this.$moveTo(b*a,c*a)},lineTo:function(b,c){this.$lineTo(b*a,c*a)},quadraticCurveTo:function(b,c,d,e){this.$quadraticCurveTo(b*a,c*a,d*a,e*a)},bezierCurveTo:function(b,c,d,e,f,g){this.$bezierCurveTo(b*a,c*a,d*a,e*a,f*a,g*a)},arcTo:function(c,e,d,f,b){this.$arcTo(c*a,e*a,d*a,f*a,b*a)},arc:function(f,g,e,c,d,b){this.$arc(f*a,g*a,e*a,c,d,b)},rect:function(d,e,c,b){this.$rect(d*a,e*a,c*a,b*a)},clearRect:function(d,e,c,b){this.$clearRect(d*a,e*a,c*a,b*a)},fillRect:function(e,f,d,c){b.fillStroke(this,a,'$fillRect',e*a,f*a,d*a,c*a)},strokeRect:function(e,f,d,c){b.fillStroke(this,a,'$strokeRect',e*a,f*a,d*a,c*a)},translate:function(b,c){this.$translate(b*a,c*a)},transform:function(d,f,e,g,b,c){this.$transform(d,f,e,g,b*a,c*a)},setTransform:function(d,f,e,g,b,c){this.$setTransform(d,f,e,g,b*a,c*a)},isPointInPath:function(b,c,e,f){var d=arguments.length;if(d>3){return this.$isPointInPath(b,c*a,e*a,f)}else if(d>2){return this.$isPointInPath(b*a,c*a,e)}else {return this.$isPointInPath(b*a,c*a)}},isPointInStroke:function(b,c,e){var d=arguments.length;if(d>2){return this.$isPointInStroke(b,c*a,e*a)}else {return this.$isPointInStroke(b*a,c*a)}},drawImage:function(b,c,d,f,e,j,k,i,h){var g=arguments.length;if(g>5){this.$drawImage(b,c,d,f,e,j*a,k*a,i*a,h*a)}else if(g>3){this.$drawImage(b,c*a,d*a,f*a,e*a)}else {this.$drawImage(b,c*a,d*a)}},putImageData:function(d,g,h,e,f,c,b){this.$putImageData(d,g*a,h*a,e,f,c,b)},setLineDash:function(b){if(!(b instanceof Array)){b=Array.prototype.slice.call(b)}this.$setLineDash(b.map(function(c){return c*a}))},fillText:function(c,d,e,b){this.$fillText(c,d*a,e*a,b*a)},strokeText:function(c,d,e,b){this.$strokeText(c,d*a,e*a,b*a)},measureText:function(c){var b=this.$measureText(c);b.width*=a;return b},createLinearGradient:function(b,d,c,e){return this.$createLinearGradient(b*a,d*a,c*a,e*a)},createRadialGradient:function(d,f,b,e,g,c){return this.$createRadialGradient(d*a,f*a,b*a,e*a,g*a,c*a)}})},getDevicePixelRatio:function(a){if(a){return a.$devicePixelRatio||1}return window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1},applyOverrides:function(a){var c=a.getContext('2d'),e=this.getDevicePixelRatio(),d=this.getOverrides(),b;if(!(a.$devicePixelRatio||e===1)){for(b in d){c['$'+b]=c[b]}Ext.apply(c,d);a.$devicePixelRatio=e}return a},setSize:function(a,d,b){var c=this.getDevicePixelRatio(a);a.width=Math.round(d*c);a.height=Math.round(b*c);a.style.width=Math.round(d)+'px';a.style.height=Math.round(b)+'px';return a}});Ext.define('Ext.d3.canvas.Canvas',{extend:'Ext.d3.Component',xtype:'d3-canvas',isCanvas:!0,config:{hdpi:!0},requires:['Ext.d3.canvas.HiDPI'],template:[{tag:'canvas',reference:'canvasElement',style:{position:'absolute'}}],canvas:null,context2D:null,renderScene:null,getCanvas:function(){var b=this,a=b.canvas;if(!a){a=b.canvasElement.dom;if(b.getHdpi()){a=Ext.d3.canvas.HiDPI.applyOverrides(a)}b.canvas=a;b.context2D=a.getContext('2d')}return a},resizeHandler:function(d){var b=this,c=b.canvas||b.getCanvas(),a=b.sceneRect||(b.sceneRect={});a.x=0;a.y=0;a.width=d.width;a.height=d.height;Ext.d3.canvas.HiDPI.setSize(c,a.width,a.height);b.onSceneResize(c,a);b.fireEvent('sceneresize',b,c,a)},onSceneResize:Ext.emptyFn,onPanZoom:function(f,d,c){var b=this,e=b.canvas,a=b.context2D;if(a&&b.renderScene){a.save();a.clearRect(0,0,e.width,e.height);a.setTransform(d[0],0,0,d[1],c[0],c[1]);b.renderScene(a);a.restore()}},getSceneRect:function(){return this.sceneRect}});Ext.define('Ext.d3.hierarchy.Hierarchy',{extend:'Ext.d3.svg.Svg',requires:['Ext.d3.axis.Color','Ext.plugin.MouseEnter'],mixins:['Ext.d3.mixin.ToolTip'],config:{hierarchyCls:'hierarchy',selection:null,colorAxis:{scale:{type:'ordinal',range:'d3.schemeCategory20c.slice(0, -4)'},field:'name'},nodeChildren:function(a){return a.isExpanded()?a.childNodes:null},nodeClass:undefined,nodeText:['name','text'],sorter:null,nodeTransform:function(a){a.attr('transform',function(b){return 'translate('+b.x+','+b.y+')'})},nodeValue:1,noParentValue:!1,nodeKey:function(a,b){return a.data.id},linkKey:function(a,b){return a.target.data.id},selectEventName:'click',expandEventName:'dblclick',rootVisible:!0,layout:undefined,noSizeLayout:!0,renderLinks:!1,transitions:{layout:{duration:500,ease:'cubicInOut'},select:{duration:150,ease:'cubicInOut',sourceScale:1,targetScale:1.07}}},publishes:'selection',root:null,nodes:null,links:null,defaultCls:{links:Ext.baseCSSPrefix+'d3-links',nodes:Ext.baseCSSPrefix+'d3-nodes',link:Ext.baseCSSPrefix+'d3-link',node:Ext.baseCSSPrefix+'d3-node',root:Ext.baseCSSPrefix+'d3-root',label:Ext.baseCSSPrefix+'d3-label',parent:Ext.baseCSSPrefix+'d3-parent',leaf:Ext.baseCSSPrefix+'d3-leaf',selected:Ext.baseCSSPrefix+'d3-selected',expanded:Ext.baseCSSPrefix+'d3-expanded'},nodeClassCfg:null,mouseEnterPlugin:null,constructor:function(b){var a=this;a.callParent([b]);a.mixins.d3tooltip.constructor.call(a,b)},applyTooltip:function(a,b){if(a){a.delegate='g.'+this.defaultCls.node}return this.mixins.d3tooltip.applyTooltip.call(this,a,b)},updateTooltip:null,defaultNodeClass:function(e){var c=this,b=c.defaultCls,a=c.nodeClassCfg,d;if(!a){c.nodeClassCfg=a={};a[b.parent]=function(a){return !a.data.isLeaf()};a[b.leaf]=function(a){return a.data.isLeaf()};a[b.expanded]=function(a){return a.data.isExpanded()};a[b.root]=function(a){return a===c.root}}for(d in a){e.classed(d,a[d])}},applyColorAxis:function(a,b){if(a&&!a.isColorAxis){a=new Ext.d3.axis.Color(a)}return a||b},applyNodeText:function(a){var b;if(typeof a==='function'){b=a}else if(typeof a==='string'){b=function(d,b){var c=b&&b.data&&b.data.data;return c&&c[a]||''}}else if(Array.isArray(a)){b=function(f,c){var e=c&&c.data&&c.data.data,d,b;if(e){for(b=0;b<a.length&&!d;b++){d=e[a[b]]}}return d||''}}return b},applyNodeClass:function(c,b){var a;if(Ext.isFunction(c)){a=c}else if(b){a=b}else {a=this.defaultNodeClass}if(a){a=a.bind(this)}return a},applyNodeTransform:function(a){if(a){a=a.bind(this)}return a},updateHierarchyCls:function(a,b){var c=this.baseCls,d=this.element;if(a&&Ext.isString(a)){d.addCls(a,c);if(b){d.removeCls(b,c)}}},applyStore:function(b,c){var a=b&&Ext.StoreManager.lookup(b,'tree');if(a&&!a.isTreeStore){Ext.raise('The store must be a Ext.data.TreeStore.')}return a},applyNodeValue:function(a){var d=this.getNoParentValue(),e=this.getNodeChildren(),b,c;if(typeof a==='string'){b=function(b){return b.data[a]}}else if(Ext.isNumber(a)){b=function(){return a}}else if(typeof a==='function'){b=a}if(b){if(d){c=function(c){return e(c)?0:b.call(this,c)}}else {c=b.bind(this)}}return c},updateNodeValue:function(){if(!this.isConfiguring){this.performLayout()}},updateNodeChildren:function(){if(!this.isConfiguring){this.performLayout()}},updateSorter:function(a){if(!this.isConfiguring){this.performLayout()}},findNode:function(b,a){a=a||this.getRenderedNodes();return a.filter(function(c){return b&&(c.data.id===b.data.id||c===b)})},nodeFromRecord:function(b){var a=b&&this.selectionFromRecord(b);return a&&!a.empty()?a.datum():null},selectionFromRecord:function(a){return this.scene.select('[data-id="'+a.id+'"]')},isRecordInStore:function(a){var b=this.getStore();return !!(a&&a.isModel&&b&&!b.isEmptyStore&&(a.store===b||b.getNodeById(a.id)===a||b.getRoot()===a))},applySelection:function(a){return this.isRecordInStore(a)?a:null},updateSelection:function(b,c){var a=this,e,d,f;if(!a.hasFirstRender){if(b){a.on({scenerender:a.updateSelection.bind(a,b,c),single:!0})}return}if(b){e=a.selectionFromRecord(b);f=!e.empty();if(f){a.onNodeSelect(b,e)}else {a[a.self.getConfigurator().configs.selection.names.internal]=null;Ext.log.warn('Selected record "'+b.id+'" does not have an associated element. E.g.:\n'+'- record was selected before it was rendered;\n'+'- record was selected in some other view, but is not supposed '+'to be rendered by this D3 component (see "nodeChildren" config).')}}if(c){d=a.selectionFromRecord(c);if(!d.empty()){a.onNodeDeselect(c,d)}}if(f){a.fireEvent('selectionchange',a,b,c)}},onNodeSelect:function(b,a){a.classed(this.defaultCls.selected,!0);this.fireEvent('select',this,b,a)},onNodeDeselect:function(b,a){a.classed(this.defaultCls.selected,!1);this.fireEvent('deselect',this,b,a)},onNodesAdd:function(a){var b=this;a.attr('class',b.defaultCls.node).each(function(b){this.setAttribute('data-id',b.data.id)})},addNodeListeners:function(){var b=this,e=Ext.Array.from(b.getSelectEventName()),d=Ext.Array.from(b.getExpandEventName()),a,c;for(a=0,c=e.length;a<c;a++){b.addNodeListener(e[a],b.onSelectEvent)}for(a=0,c=d.length;a<c;a++){b.addNodeListener(d[a],b.onExpandEvent)}},updateEventName:function(h,g,d){var f=this,e=Ext.Array.from(h),c=Ext.Array.from(g),a,b;for(a=0,b=c.length;a<b;a++){f.removeNodeListener(c[a],d)}for(a=0,b=e.length;a<b;a++){f.addNodeListener(e[a],d)}},updateSelectEventName:function(b,a){this.updateEventName(b,a,this.onSelectEvent)},updateExpandEventName:function(b,a){this.updateEventName(b,a,this.onExpandEvent)},addNodeListener:function(b,d){var a=this,c=a.el;if(b==='mouseenter'){a.mouseEnterPlugin=a.addPlugin({type:'mouseenter',element:c,delegate:'g.'+a.defaultCls.node,handler:d})}else if(b){c.on(b,d,a,{delegate:'g.'+a.defaultCls.node})}},removeNodeListener:function(b,d){var a=this,c=a.el;if(b==='mouseenter'){Ext.destroy(a.mouseEnterPlugin)}else if(b){c.un(b,d,a,{delegate:'g.'+a.defaultCls.node})}},onSelectEvent:function(d,c){var a=d3.select(c),b=a.node(),e=a.datum();this.handleSelectEvent(d,e,b)},handleSelectEvent:function(c,a,b){this.setSelection(a.data)},onExpandEvent:function(b){var a=d3.select(b.currentTarget),c=a.node(),d=a.datum();this.handleExpandEvent(b,d,c)},handleExpandEvent:function(d,b,c){var a=b.data;if(a.isExpanded()){a.collapse()}else {a.expand()}},setLayoutSize:function(b){var a=this.getLayout();a.size(b)},getLayoutSize:function(){var a=this.getLayout();return a.size&&a.size()},onSceneResize:function(b,a){this.callParent([b,a]);this.setLayoutSize([a.width,a.height]);this.performLayout()},hasFirstLayout:!1,hasFirstRender:!1,isLayoutTransitionSkipped:!1,oldLayoutSaving:!1,oldNodes:null,oldLinks:null,isLayoutBlocked:Ext.emptyFn,skipLayoutTransition:function(){this.isLayoutTransitionSkipped=!0},processDataChange:function(a){if(this.getNoSizeLayout()||this.size){this.performLayout()}},setupScene:function(b){var a=this;a.callParent([b]);a.linksGroup=b.append('g').classed(a.defaultCls.links,!0);a.nodesGroup=b.append('g').classed(a.defaultCls.nodes,!0)},performLayout:function(){var a=this,f=a.getStore(),b=f&&f.getRoot(),m=a.getRootVisible(),j=a.getLayout(),c,l,k,d,e,h,g,i;a.getScene();if(!b){a.getRenderedNodes().remove();a.getRenderedLinks().remove()}if(!b||f.isLoading()||a.isInitializing||a.isLayoutBlocked(j)){return}if(!m&&b.data.autoRoot&&b.childNodes.length===1){d=b.firstChild}else {d=b}e=a.getSorter();h=a.getRenderLinks();g=a.getNodeChildren();i=a.getNodeValue();a.oldLayoutSaving&&a.saveLayout(a.nodes,a.links);c=d3.hierarchy(d,g).sum(i);if(e){c=c.sort(e)}a.storeRoot=b;a.root=c=j(c);l=a.nodes=c.descendants();if(h){k=a.links=c.links()}a.hasFirstLayout=!0;a.renderScene(l,k)},saveLayout:function(b,g){var f=this,d={},a,e,c;f.oldNodes=d;if(b){for(a=0,e=b.length;a<e;a++){c=b[a];d[c.data.id]=c}}f.oldLinks=g},getOldNode:function(a){return a&&this.oldNodes&&this.oldNodes[a.data.id]},renderScene:function(c,b){var a=this,g=a.getNodeKey(),f=a.getLinkKey(),e,d;if(!a.hasFirstLayout){a.performLayout()}c=c||a.nodes;b=b||a.links;a.onBeforeRender(c,b);if(c){e=a.getRenderedNodes().data(c,g);a.renderNodes(e);if(b){d=a.getRenderedLinks().data(b,f);a.renderLinks(d)}}a.hideRoot();a.hasFirstRender=!0;a.onAfterRender(e,d);a.fireEvent('scenerender',a,e,d)},getRenderedNodes:function(){return this.nodesGroup.selectAll('.'+this.defaultCls.node)},getRenderedLinks:function(){return this.linksGroup.selectAll('.'+this.defaultCls.link)},hideRoot:function(){var a=this,b=a.getRootVisible();a.nodesGroup.select('.'+a.defaultCls.root).classed(a.defaultCls.invisible,!b)},renderLinks:function(a){this.updateLinks(a,this.addLinks(a.enter()));this.removeLinks(a.exit())},renderNodes:function(b){var a=this,d=a.getNodeClass(),c=b.enter().append('g');c.call(a.onNodesAdd.bind(a));a.addNodes(c);c.call(d);b.call(d);a.updateNodes(b,c);a.removeNodes(b.exit())},layoutTransition:null,onBeforeRender:function(){var a=this,b=a.hasFirstRender&&!a.isLayoutTransitionSkipped,c=a.createTransition(b?'layout':'none');a.isLayoutTransitionSkipped=!1;a.layoutTransition=c.on('end',function(){a.layoutTransition=null;if(!(a.destroyed||a.destroying)){a.onLayout()}})},onLayout:function(){var a=this;if(a.panZoom){a.panZoom.updateIndicator()}a.fireEvent('layout',a)},onAfterRender:Ext.emptyFn,updateLinks:Ext.emptyFn,addLinks:Ext.emptyFn,updateNodes:Ext.emptyFn,addNodes:Ext.emptyFn,removeLinks:function(a){a.remove()},removeNodes:function(a){a.remove()}});Ext.define('Ext.d3.hierarchy.Pack',{extend:'Ext.d3.hierarchy.Hierarchy',xtype:'d3-pack',requires:['Ext.d3.Helpers'],config:{componentCls:'pack',textPadding:[3,3],nodeValue:function(a){return a.childNodes.length+1},clipText:!0,noSizeLayout:!1},applyLayout:function(){return d3.pack()},onNodeSelect:function(b,a){this.callParent(arguments);a.select('circle').style('fill',null)},onNodeDeselect:function(d,c){var a=this,b=a.getColorAxis();a.callParent(arguments);c.select('circle').style('fill',function(a){return b.getColor(a)})},updateColorAxis:function(b){var a=this;if(!a.isConfiguring){a.getRenderedNodes().select('circle').style('fill',function(a){return b.getColor(a)})}},textVisibilityFn:function(b){var e=this,a=this.getTextPadding(),c=parseFloat(a[0])*2,d=parseFloat(a[1])*2;b.classed(e.defaultCls.invisible,function(e){var a=this.getBBox(),g=e.r-c,f=e.r-d;return (a.width>g||a.height>f)})},addNodes:function(c){var a=this,d=a.getNodeTransform(),e=a.getClipText(),b;c.call(a.onNodesAdd.bind(a)).call(d).append('circle');b=c.append('text').attr('class',a.defaultCls.label);if(e){b.call(a.textVisibilityFn.bind(a))}if(Ext.d3.Helpers.noDominantBaseline()){b.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,'central',!0)})}b.attr('opacity',0)},updateNodes:function(j,k){var a=this,g=a.getColorAxis(),e=a.getNodeTransform(),f=a.getSelection(),i=a.getNodeText(),h=a.getClipText(),c=j.merge(k),b=a.layoutTransition,d;c.transition(b).call(e);c.select('circle').transition(b).attr('r',function(a){return a.r}).style('fill',function(a){return a.data===f?null:g.getColor(a)});d=c.select('text').text(function(b){return i(a,b)});if(h){d.call(a.textVisibilityFn.bind(a))}d.transition(b).attr('opacity',1)},removeNodes:function(a){a.attr('opacity',1).transition(this.layoutTransition).attr('opacity',0).remove()}});Ext.define('Ext.d3.hierarchy.TreeMap',{extend:'Ext.d3.hierarchy.Hierarchy',xtype:'d3-treemap',requires:['Ext.d3.Helpers'],config:{componentCls:'treemap',tiling:null,parentTile:{padding:4,label:{offset:[5,2],clipSize:[110,40]}},leafTile:{padding:0},nodeTransform:function(a){a.attr('transform',function(b){return 'translate('+b.x0+','+b.y0+')'})},busyLayoutText:'Layout in progress...',noParentValue:!0,noSizeLayout:!1,scaleLabels:!1},labelQuantizer:null,constructor:function(a){this.labelQuantizer=this.createLabelQuantizer();this.callParent([a])},createLabelQuantizer:function(){return d3.scaleQuantize().domain([8,27]).range(['8px','12px','18px','27px'])},labelSizer:function(a,b){return Math.min((a.x1-a.x0)/4,(a.y1-a.y0)/2)},applyTiling:function(b,a){return Ext.d3.Helpers.eval(b||a)},updateTiling:function(a){if(a){this.getLayout().tile(a);if(!this.isConfiguring){this.performLayout()}}},updateLeafTile:function(a){if(a){this.getLayout().paddingInner(a.padding||0)}if(!this.isConfiguring){this.performLayout()}},applyParentTile:function(a){var c=this,b;if(a){b=a.padding;if(Ext.isNumber(b)){a.padding=function(d){return !c.getRootVisible()&&d===c.root?0:b}}}return a},updateParentTile:function(c){var b,a;if(c){b=this.getLayout();a=c.padding;b.paddingRight(a);b.paddingBottom(a);b.paddingLeft(a)}if(!this.isConfiguring){this.performLayout()}},applyLayout:function(){return d3.treemap().round(!0)},setLayoutSize:function(a){this.callParent([a])},deferredLayoutId:null,isLayoutBlocked:function(d){var a=this,c=a.getBusyLayoutText(),b=!1;if(!a.deferredLayoutId){a.showMask(c);a.deferredLayoutId=setTimeout(a.performLayout.bind(a),100);b=!0}else {clearTimeout(a.deferredLayoutId);a.deferredLayoutId=null}return b},setupScene:function(a){this.callParent([a]);this.getScaleLabels()},onAfterRender:function(){this.hideMask()},hiddenParentLabels:null,labelSizes:null,getContentRect:function(){var a=this.getSceneRect(),b=this.contentRect||(this.contentRect={x:0,y:0});if(a){b.width=a.width;b.height=a.height}return a&&b},onNodeSelect:function(b,a){this.callParent(arguments);a.select('rect').style('fill',null)},onNodeDeselect:function(d,c){var a=this,b=a.getColorAxis();a.callParent(arguments);c.select('rect').style('fill',function(a){return b.getColor(a)})},renderNodes:function(b){var a=this,f=a.root,e=a.getLayout(),j=a.getParentTile(),c=j.label,h=a.getNodeTransform(),d=a.hiddenParentLabels={},i=a.labelSizes={},g;a.callParent([b]);e.paddingTop(function(e){var m=e.data,g=m.data.id,h=i[g],l=c.clipSize,f,j,k;if(!a.getRootVisible()&&e===a.root){f=0;d[g]=!0}else {f=c.offset[1]*2;j=e.x1-e.x0;k=e.y1-e.y0;if(h.width<j&&h.height<k&&j>l[0]&&k>l[1]){f+=h.height;d[g]=!1}else {d[g]=!0}}return f});a.root=f=e(f);g=a.nodes=f.descendants();e.paddingTop(0);b=a.getRenderedNodes().data(g,a.getNodeKey());b.transition(a.layoutTransition).call(h);b.select('rect').call(a.nodeSizeFn.bind(a));b.select('text').call(a.textVisibilityFn.bind(a)).each(function(a){if(a.data.isLeaf()){this.setAttribute('x',(a.x1-a.x0)/2);this.setAttribute('y',(a.y1-a.y0)/2)}else {this.setAttribute('x',c.offset[0]);this.setAttribute('y',c.offset[1])}})},addNodes:function(b){var a=this,d=a.labelSizes,e=a.getColorAxis(),f=a.getNodeText(),c=a.getScaleLabels(),g=a.defaultCls;b.append('rect').style('fill',function(a){return e.getColor(a)});b.append('text').style('font-size',function(d){return c?a.getLabelSize(d,this):null}).each(function(c){var e=f(a,c);this.textContent=e==null?'':e;this.setAttribute('class',g.label);Ext.d3.Helpers.fakeDominantBaseline(this,c.data.isLeaf()?'central':'text-before-edge');d[c.data.id]=this.getBBox()})},updateNodes:function(b){var a=this,e=a.getNodeText(),c=a.getScaleLabels(),d=a.labelSizes;b.select('rect').call(a.nodeSizeFn.bind(a));b.select('text').style('font-size',function(d){return c?a.getLabelSize(d,this):null}).each(function(c){var f=e(a,c);this.textContent=f==null?'':f;d[c.data.id]=this.getBBox()})},getLabelSize:function(a,b){if(a.data.isLeaf()){return this.labelQuantizer(this.labelSizer(a,b))}return null},updateScaleLabels:function(){if(!this.isConfiguring){this.performLayout()}},updateNodeValue:function(a){this.callParent(arguments);if(!this.isConfiguring){this.performLayout()}},nodeSizeFn:function(a){a.attr('width',function(b){return Math.max(0,b.x1-b.x0)}).attr('height',function(b){return Math.max(0,b.y1-b.y0)})},isLabelVisible:function(k,a){var h=this,g=k.getBBox(),d=a.x1-a.x0,b=a.y1-a.y0,f=a.data.isLeaf(),j=h.getParentTile(),i=h.hiddenParentLabels,e=j.label.offset,c;if(f){d-=2;b-=2}else {d-=e[0]*2;b-=e[1]*2}if(f||!a.data.isExpanded()){c=g.width<d&&g.height<b}else {c=!i[a.data.id]}return c},textVisibilityFn:function(b){var a=this;b.classed(a.defaultCls.invisible,function(c){return !a.isLabelVisible(this,c)})},destroy:function(){var a=this,b=a.getColorAxis();if(a.deferredLayoutId){clearTimeout(a.deferredLayoutId)}b.destroy();a.callParent()}});Ext.define('Ext.d3.hierarchy.partition.Partition',{extend:'Ext.d3.hierarchy.Hierarchy',xtype:'d3-partition',config:{partitionCls:'partition',nodeValue:function(a){return a.isExpanded()&&a.childNodes?0:1}},updatePartitionCls:function(a,b){var c=this.baseCls,d=this.element;if(a&&Ext.isString(a)){d.addCls(a,c);if(b){d.removeCls(b,c)}}},applyLayout:function(){return d3.partition()},resetZoom:function(c){var b=this,a=b.getStore(),d=a&&a.getRoot();b.zoomInNode(d,c)}});Ext.define('Ext.d3.hierarchy.partition.Sunburst',{extend:'Ext.d3.hierarchy.partition.Partition',xtype:'d3-sunburst',config:{componentCls:'sunburst',textPadding:[5,'0.35em'],zoomParentDotRadius:30,transitions:{zoom:{duration:1000,ease:'cubicInOut'}}},setupScene:function(a){this.callParent([a]);this.setupScales();this.setupArcGenerator()},scaleDefaults:{x:{domain:[0,1],range:[0,2*Math.PI]},y:{domain:[0,1]}},setupScales:function(){var a=this.scaleDefaults;this.xScale=d3.scaleLinear().domain(a.x.domain.slice()).range(a.x.range.slice());this.yScale=d3.scaleSqrt().domain(a.y.domain.slice())},arc:null,defaultCls:{center:Ext.baseCSSPrefix+'d3-center'},setupArcGenerator:function(){var a=this,b=a.xScale,c=a.yScale;a.arc=d3.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,b(a.x0)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,b(a.x1)))}).innerRadius(function(a){return Math.max(0,c(a.y0))}).outerRadius(function(a){return Math.max(0,c(a.y1))})},onSceneResize:function(g,c){var d=this,e=d.nodesGroup,a=0.5*c.width,b=0.5*c.height,f=Math.min(a,b);e.attr('transform','translate('+a+','+b+')');d.setRadius(f)},radius:null,minRadius:1,setRadius:function(a){var b=this;a=Math.max(b.minRadius,a);b.radius=a;b.yScale.range([0,a]);b.renderScene()},zoomInNode:function(c,h){var a=this,k=a.getScene(),f=a.getZoomParentDotRadius(),i=a.radius,j=a.xScale,d=a.yScale,l=a.arc,g,b,e;if(a.hasFirstLayout&&a.hasFirstRender&&a.size&&c&&c.isNode){b=a.nodeFromRecord(c)}if(!b){return}g=a.createTransition(h?'none':'zoom',k);e=g.tween('scale',function(){var a=d3.interpolate(j.domain(),[b.x0,b.x1]),e=d3.interpolate(d.domain(),[b.y0,1]),g=d3.interpolate(d.range(),[b.y0?f:0,i]);return function(b){j.domain(a(b));d.domain(e(b)).range(g(b))}}).selectAll('.'+a.defaultCls.node);e.selectAll('path').attrTween('d',function(a){return function(b){return l(a)}});e.selectAll('text').call(a.positionTextFn.bind(a)).call(a.textVisibilityFn.bind(a));if(h){a.xScale.domain([b.x0,b.x1]);a.yScale.domain([b.y0,1]).range([b.y0?f:0,i])}},onNodeSelect:function(g,e){var b=this,c=b.getTransitions().select,f=c.targetScale,d=c.sourceScale,a=b.createTransition('select');b.callParent(arguments);e.raise().select('path').style('fill',null);if(a.duration()){e.transition(a).attr('transform','scale('+f+','+f+')').transition(a).attr('transform','scale('+d+','+d+')')}},onNodeDeselect:function(d,c){var a=this,b=a.getColorAxis();a.callParent(arguments);c.select('path').style('fill',function(a){return b.getColor(a)})},isBBoxInSlice:function(a,j,k,c,d,b,l){var e=Math.abs(k-j),i=Math.abs(d-c)-b*2,h=e<Math.PI?2*(c+b)*Math.tan(0.5*e)-l*2:0.5*d,g=a.width>i,f=a.height>h;return !(g||f)},textVisibilityFn:function(b){var a=this,c=a.xScale,d=a.yScale,e=a.defaultCls.invisible,f=a.getTextPadding(),h=parseFloat(f[0]),i=parseFloat(f[1]),g=b instanceof d3.transition;function isInvisible(j,e){var n=j._bbox||j.getBBox(),o=c(e.x0),p=c(e.x1),q=d(e.y0),r=d(e.y1),k=a.isBBoxInSlice(n,o,p,q,r,h,i),f=c.domain(),g=d.domain(),l=f[0]>e.x0||f[1]<e.x1,m=g[0]>e.y0||g[1]<e.y1;return !k||l||m}if(g){b.tween('class.invisible',function(c){var a=this;return function(){d3.select(a).classed(e,isInvisible(a,c))}})}else {b.classed(e,function(a){return isInvisible(this,a)})}},positionTextFn:function(d){var c=this,i=c.xScale,j=c.yScale,h=Math.PI/2,g=180/Math.PI,e=d instanceof d3.transition,f=e?'attrTween':'attr',b,a;function getX(a){return j(a.y0)}function getTransform(a){return a===c.root?'':('rotate('+(i((a.x0+a.x1)/2)-h)*g+')')}if(e){b=function(a){return function(){return getX(a)}};a=function(a){return function(){return getTransform(a)}}}else {b=function(a){return getX(a)};a=function(a){return getTransform(a)}}d[f]('x',b)[f]('transform',a)},addNodes:function(c){var a=this,b=a.getTextPadding();c.append('path').attr('d',a.arc);c.append('text').attr('class',a.defaultCls.label).each(function(d){if(d!==a.root){this.setAttribute('dx',b[0]);this.setAttribute('dy',b[1])}})},measureLabels:function(a){var b=a instanceof d3.transition;if(!b){a.each(function(){this._bbox=this.getBBox()})}},updateNodes:function(f,g){var a=this,d=a.getColorAxis(),e=a.getNodeText(),c=a.getSelection(),b=f.merge(g);b.select('path').attr('d',a.arc).style('fill',function(a){return a.data===c?null:d.getColor(a)});b.select('text').text(function(b){return e(a,b)}).call(a.measureLabels.bind(a)).call(a.positionTextFn.bind(a)).call(a.textVisibilityFn.bind(a));a.nodesGroup.select('.'+a.defaultCls.selected).raise()},updateColorAxis:function(b){var a=this;if(!a.isConfiguring){a.getRenderedNodes().select('path').style('fill',function(a){return b.getColor(a)})}}});Ext.define('Ext.d3.hierarchy.tree.Tree',{extend:'Ext.d3.hierarchy.Hierarchy',config:{treeCls:'tree',nodeTransform:null,depth:0,nodeRadius:5,nodeTransition:!0,nodeSize:null,noSizeLayout:!1,renderLinks:!0,transitions:{select:{targetScale:1.5}}},updateTreeCls:function(a,b){var c=this.baseCls,d=this.element;if(a&&Ext.isString(a)){d.addCls(a,c);if(b){d.removeCls(b,c)}}},applyLayout:function(){return d3.tree()},updateNodeSize:function(a){var b=this.getLayout();b.nodeSize(a)},updateColorAxis:function(b){var a=this;if(!a.isConfiguring){a.getRenderedNodes().select('circle').style('fill',function(a){return b.getColor(a)})}},hideRoot:function(){var a=this,b=a.getRootVisible();a.nodesGroup.select('.'+a.defaultCls.root).classed(a.defaultCls.hidden,!b)},onNodeSelect:function(h,g){var b=this,c=b.getTransitions().select,f=c.targetScale,e=c.sourceScale,a=b.createTransition('select'),d=g.select('circle');b.callParent(arguments);d.style('fill',null);if(a.duration()){d.transition(a).attr('transform','scale('+f+','+f+')').transition(a).attr('transform','scale('+e+','+e+')')}},onNodeDeselect:function(d,c){var a=this,b=a.getColorAxis();a.callParent(arguments);c.select('circle').style('fill',function(a){return b.getColor(a)})}});Ext.define('Ext.d3.hierarchy.tree.HorizontalTree',{extend:'Ext.d3.hierarchy.tree.Tree',xtype:['d3-tree','d3-horizontal-tree'],requires:['Ext.d3.Helpers'],config:{componentCls:'horizontal-tree',nodeTransform:function(a){a.attr('transform',function(b){return 'translate('+b.y+','+b.x+')'})}},pendingTreeAlign:!1,oldLayoutSaving:!0,alignAfterLayout:function(){this.pendingTreeAlign=!0},onSceneResize:function(c,d){var a=this,b=a.getLayout();a.alignAfterLayout();if(b.nodeSize()){if(a.size){this.alignTree()}else {a.performLayout()}}else {a.callParent(arguments)}},onLayout:function(){var a=this;if(a.pendingTreeAlign){a.pendingTreeAlign=!1;a.alignTree()}a.callParent()},alignTree:function(){if(this.getNodeSize()){this.alignContent('l')}},updateNodeSize:function(b){var a=this;if(b){a.getLayout().nodeSize(b.slice().reverse())}else {a.setLayoutSize([a.sceneRect.width,a.sceneRect.height])}if(!a.isConfiguring){a.skipLayoutTransition();a.alignAfterLayout();a.performLayout()}},setLayoutSize:function(a){var b=a[0];a[0]=a[1];a[1]=b;this.callParent([a])},onNodesAdd:function(c){var b=this,a;b.callParent([c]);a=b.getOldNode(b.nodeFromRecord(b.getSelection()));if(a){c.attr('transform','translate('+a.y+','+a.x+')')}},addNodes:function(b){var d=this,a=d.getNodeRadius(),c;b.append('circle').attr('opacity',0);c=b.append('text').attr('class',d.defaultCls.label).each(function(d){var c=d.data.isLeaf();this.setAttribute('x',c?a+5:-5-a)}).attr('opacity',0);if(Ext.d3.Helpers.noDominantBaseline()){c.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,'central',!0)})}},updateNodes:function(i,j){var a=this,e=a.getSelection(),d=a.getNodeTransform(),g=a.getColorAxis(),f=a.getNodeRadius(),h=a.getNodeText(),c=i.merge(j),b=a.layoutTransition;c.transition(b).call(d);c.select('circle').style('fill',function(a){return a.data===e?null:g.getColor(a)}).attr('r',f).transition(b).attr('opacity',1);c.select('text').text(function(b){return h(a,b)}).transition(b).attr('opacity',1)},removeNodes:function(c){var a=this,b=a.nodeFromRecord(a.getSelection());c.attr('opacity',1).transition(a.layoutTransition).attr('opacity',0).attr('transform',function(f){var e=f.parent,d=b||e&&a.nodeFromRecord(e.data),g=d&&d.x||0,h=d&&d.y||0;return 'translate('+h+','+g+')'}).remove()},getLinkPath:function(a){var b=(a.source.y+(a.target.y-a.source.y)/2);return 'M'+a.source.y+','+a.source.x+'C'+b+','+a.source.x+' '+b+','+a.target.x+' '+a.target.y+','+a.target.x},addLinks:function(c){var a=this,b=a.nodeFromRecord(a.getSelection());return c.append('path').classed(a.defaultCls.link,!0).attr('d',function(h){var g=b||h.source,d=a.getOldNode(g),e=d?d.x:g.x,f=d?d.y:g.y;return 'M'+f+','+e+'C'+f+','+e+' '+f+','+e+' '+f+','+e}).attr('opacity',0)},updateLinks:function(e,f){var a=this,d=e.merge(f),c=a.layoutTransition,b=!a.getRootVisible();d.classed(a.defaultCls.hidden,function(c){return b&&c.source.data===a.storeRoot}).transition(c).attr('d',a.getLinkPath).attr('opacity',1)},removeLinks:function(c){var a=this,b=a.nodeFromRecord(a.getSelection());c.attr('opacity',1).transition(a.layoutTransition).attr('opacity',0).attr('d',function(h){var g=h.source,d=b||g&&a.nodeFromRecord(g.data),e=d&&d.x||0,f=d&&d.y||0;return 'M'+f+','+e+'C'+f+','+e+' '+f+','+e+' '+f+','+e}).remove()}});Ext.define('Ext.d3.interaction.Abstract',{isInteraction:!0,mixins:{observable:'Ext.mixin.Observable'},statics:{lockedEvents:{}},config:{component:null,gestures:null,enabled:!0},supports:[],listeners:null,constructor:function(b){var a=this,c;b=b||{};if('id' in b){c=b.id}else if('id' in a.config){c=a.config.id}else {c=a.getId()}a.setId(c);a.mixins.observable.constructor.call(a,b)},resetComponent:function(){var a=this,b=a.getComponent();if(!a.isConfiguring){a.setComponent(null);a.setGestures(null);a.setComponent(b)}},updateComponent:function(b,a){var c=this;if(a===b){return}if(a){c.removeComponent(a)}if(b){c.addComponent(b)}},addComponent:function(a){a.register(this);this.component=a;this.addElementListener(a.element)},removeComponent:function(a){this.removeElementListener(a.element);this.component=null;a.unregister(this)},updateEnabled:function(c){var b=this,a=b.getComponent();if(a){if(c){b.addElementListener(a.element)}else {b.removeElementListener(a.element)}}},onGesture:Ext.emptyFn,addElementListener:function(e){var a=this,c=a.getGestures(),d=a.getLocks(),b;if(!a.getEnabled()){return}function addGesture(b,c){if(!Ext.isFunction(c)){c=a[c]}e.on(b,a.listeners[b]=function(g){var f;if(a.getEnabled()&&(!(b in d)||d[b]===a)){f=c.apply(this,arguments);if(f===!1&&g&&g.stopPropagation){g.stopPropagation()}return f}},a)}a.listeners=a.listeners||{};for(b in c){addGesture(b,c[b])}},removeElementListener:function(d){var a=this,c=a.getGestures(),b;function removeGesture(b){var c=a.listeners[b];if(c){d.un(b,c);delete a.listeners[b]}}if(a.listeners){for(b in c){removeGesture(b)}}},lockEvents:function(){var b=this,d=b.getLocks(),a=Array.prototype.slice.call(arguments),c=a.length;while(c--){d[a[c]]=b}},unlockEvents:function(){var c=this.getLocks(),a=Array.prototype.slice.call(arguments),b=a.length;while(b--){delete c[a[b]]}},getLocks:function(){return this.statics().lockedEvents},destroy:function(){var a=this;a.fireEvent('destroy',a);a.setComponent(null);a.listeners=null}});Ext.define('Ext.d3.interaction.PanZoom',{extend:'Ext.d3.interaction.Abstract',type:'panzoom',alias:'d3.interaction.panzoom',isPanZoom:!0,config:{pan:{gesture:'drag',constrain:!0,momentum:{friction:1,spring:0.2}},zoom:{gesture:'pinch',extent:[1,3],uniform:!0,mouseWheel:{factor:1.02},doubleTap:{factor:1.1}},contentRect:null,viewportRect:null,indicator:{parent:'element'}},panOrigin:null,startSpread:null,minSpread:50,scaling:null,oldScaling:null,oldScalingCenter:null,translation:null,oldTranslation:null,dx:0,dy:0,velocityX:0,velocityY:0,pan:null,viewportRect:null,contentRect:null,updatePan:function(a){this.pan=a;this.resetComponent()},updateZoom:function(){this.resetComponent()},updateContentRect:function(a){this.contentRect=a;this.constrainTranslation()},updateViewportRect:function(a){this.viewportRect=a;this.constrainTranslation()},constructor:function(a){var b=this;b.translation=a&&a.translation?a.translation.slice():[0,0];b.scaling=a&&a.scaling?a.scaling.slice():[1,1];b.callParent(arguments)},destroy:function(){this.destroyIndicator();Ext.AnimationQueue.stop(this.panFxFrame,this);this.callParent()},toViewportXY:function(c,d){var b=this.component.element.getXY(),a=this.viewportRect&&this.viewportRect(),e=c-b[0]-(a?a.x:0),f=d-b[1]-(a?a.y:0);return [e,f]},toRtlViewportXY:function(c,d){var a=this.toViewportXY(c,d),b=this.component;if(b.getInherited().rtl){a[0]=b.getWidth()-a[0]}return a},constrainRange:function(a,c,b){b=b||c;a[0]=Math.max(c[0],Math.min(c[1],a[0]));a[1]=Math.max(b[0],Math.min(b[1],a[1]));return a},constrainTranslation:function(b){var a=this,f=a.pan,i=f&&f.constrain,e=f&&f.momentum,h=i&&a.contentRect&&a.contentRect(),g=i&&a.viewportRect&&a.viewportRect(),c,d;if(h&&g){b=b||a.translation;c=a.getConstraints(h,g);d=a.getOffLimits(b,c);a.constrainRange(b,c.slice(0,2),c.slice(2));if(d&&e&&e.spring){b[0]+=d[0]*e.spring;b[1]+=d[1]*e.spring}a.updateIndicator(h,g)}},createInterpolator:function(b){var d=0,c=1,a;b=b||1;a=function(e){var a=0;if(c){a=(e-d)/c;a=Math.max(0,a);a=Math.min(1,a);a*=b}return a};a.domain=function(a,e){d=a;c=e-a};return a},updateIndicator:function(c,b){var a=this,h=a.hScrollScale,i=a.vScrollScale,f,g,e,d,j,n,m,o,k,l;c=c||a.contentRect&&a.contentRect();b=b||a.viewportRect&&a.viewportRect();if(a.hScroll&&c&&b){k=a.scaling[0];l=a.scaling[1];f=c.x*k+a.translation[0];g=c.y*l+a.translation[1];e=c.width*k;d=c.height*l;if(e>b.width){h.domain(f,f+e);j=h(0);n=h(b.width);a.hScrollBar.style.left=j+'%';a.hScrollBar.style.width=(n-j)+'%';a.hScroll.dom.style.display='block'}else {a.hScroll.dom.style.display='none'}if(d>b.height){i.domain(g,g+d);m=i(0);o=i(b.height);a.vScrollBar.style.top=m+'%';a.vScrollBar.style.height=(o-m)+'%';a.vScroll.dom.style.display='block'}else {a.vScroll.dom.style.display='none'}}},getConstraints:function(a,c){var b=this,m=b.pan,l=null,d,e,k,j,h,i,f,g;a=m&&m.constrain&&(a||b.contentRect&&b.contentRect());c=c||b.viewportRect&&b.viewportRect();if(a&&c){h=b.scaling[0];i=b.scaling[1];d=a.x*h;e=a.y*i;k=a.width*h;j=a.height*i;f=c.width-k-d;g=c.height-j-e;l=[Math.min(-d,f),Math.max(-d,f),Math.min(-e,g),Math.max(-e,g)]}return l},getOffLimits:function(d,c,e){var k=this,j=null,h,i,f,g,a,b;c=c||k.getConstraints();e=e||0.1;if(c){d=d||k.translation;a=d[0];b=d[1];h=c[0];f=c[1];i=c[2];g=c[3];if(a<h){a=a-h}else if(a>f){a=a-f}else {a=0}if(b<i){b=b-i}else if(b>g){b=b-g}else {b=0}if(a&&Math.abs(a)<e){a=0}if(b&&Math.abs(b)<e){b=0}if(a||b){j=[a,b]}}return j},translate:function(b,c){var a=this.translation;this.setTranslation(a[0]+b,a[1]+c)},setTranslation:function(c,d){var a=this,b=a.translation;b[0]=c;b[1]=d;a.constrainTranslation(b);a.fireEvent('panzoom',a,a.scaling,b)},scale:function(c,d,b){var a=this.scaling;this.setScaling(a[0]*c,a[1]*d,b)},setScaling:function(d,e,i){var b=this,j=b.getZoom(),a=b.scaling,k=a[0],l=a[1],c=b.translation,f=b.oldTranslation,g,h;if(j){if(j.uniform){d=e=(d+e)/2}a[0]=d;a[1]=e;b.constrainRange(a,j.extent);d=a[0]/k;e=a[1]/l;g=i&&i[0]||0;h=i&&i[1]||0;c[0]=g+d*(c[0]-g);c[1]=h+e*(c[1]-h);if(f){f[0]=g-(g-f[0])*d;f[1]=h-(h-f[1])*e}b.constrainTranslation(c);b.fireEvent('panzoom',b,a,c)}},setPanZoomSilently:function(c,b){var a=this;a.suspendEvent('panzoom');c&&a.setTranslation(c[0],c[1]);b&&a.setScaling(b[0],b[1]);a.resumeEvent('panzoom')},setPanZoom:function(c,b){var a=this;a.setPanZoomSilently(c,b);a.fireEvent('panzoom',a,a.scaling,a.translation)},normalize:function(b,c,d){var a=(d||1)/this.magnitude(b,c);return [b*a,c*a]},magnitude:function(a,b){return Math.sqrt(a*a+b*b)},panFx:function(h){if(!h.momentum){return}var a=this,g=h.momentum,i=a.translation,b=a.getOffLimits(i),c=a.velocityX=a.dx,d=a.velocityY=a.dy,e,f;if(b){if(b[0]){a.velocityX=0;c=b[0]}if(b[1]){a.velocityY=0;d=b[1]}}e=a.normalize(c,d,-g.friction);a.frictionX=e[0];a.frictionY=e[1];f=a.normalize(c,d,-g.spring);a.springX=f[0];a.springY=f[1];Ext.AnimationQueue.start(a.panFxFrame,a)},incKeepSign:function(a,b){if(a){if(a*b<0&&Math.abs(a)<Math.abs(b)){return 0}else {return a+b}}return a},panFxFrame:function(){var a=this,d=a.translation,e=a.getOffLimits(d),f=e&&e[0],g=e&&e[1],j=0,k=0,b=0,c=0,l=1,h,i;b+=a.velocityX=a.incKeepSign(a.velocityX,a.frictionX);c+=a.velocityY=a.incKeepSign(a.velocityY,a.frictionY);if(f){j=Math.abs(f);h=a.springX*j;a.velocityX=a.incKeepSign(b,h);b+=h;if(Math.abs(b)<0.1){b=Ext.Number.sign(b)*0.1}if(!(a.velocityX||Math.abs(b)>l||a.incKeepSign(f,b))){b=-f}}if(g){k=Math.abs(g);i=a.springY*k;a.velocityY=a.incKeepSign(c,i);c+=i;if(Math.abs(c)<0.1){c=Ext.Number.sign(c)*0.1}if(!(a.velocityY||Math.abs(c)>l||a.incKeepSign(g,c))){c=-g}}a.prevForceX=b;a.prevForceY=c;d[0]+=b;d[1]+=c;a.updateIndicator();if(!(b||c)){Ext.AnimationQueue.stop(a.panFxFrame,a)}a.fireEvent('panzoom',a,a.scaling,d)},getGestures:function(){var e=this,a=e.gestures,f=e.getPan(),d=e.getZoom(),c,b;if(!a){e.gestures=a={};if(f){c=f.gesture;a[c]='onPanGesture';a[c+'start']='onPanGestureStart';a[c+'end']='onPanGestureEnd';a[c+'cancel']='onPanGestureEnd'}if(d){b=d.gesture;a[b]='onZoomGesture';a[b+'start']='onZoomGestureStart';a[b+'end']='onZoomGestureEnd';a[b+'cancel']='onZoomGestureEnd';if(d.doubleTap){a.doubletap='onDoubleTap'}if(d.mouseWheel){a.wheel='onMouseWheel'}}}return a},updateGestures:function(a){this.gestures=a},isPanning:function(a){a=a||this.getPan();return a&&this.getLocks()[a.gesture]===this},onPanGestureStart:function(b){var a=this,d=b&&b.event&&b.event.touches||b.touches,e=a.getPan(),c;if(e&&(!d||d.length<2)){b.claimGesture();Ext.AnimationQueue.stop(a.panFxFrame,a);a.lockEvents(e.gesture);c=b.getXY();a.panOrigin=a.lastPanXY=a.toRtlViewportXY(c[0],c[1]);a.oldTranslation=a.translation.slice();return !1}},onPanGesture:function(g){var a=this,c=a.oldTranslation,d=a.panOrigin,b,e,f;if(a.isPanning()){b=g.getXY();b=a.toRtlViewportXY(b[0],b[1]);a.dx=b[0]-a.lastPanXY[0];a.dy=b[1]-a.lastPanXY[1];a.lastPanXY=b;e=b[0]-d[0];f=b[1]-d[1];a.setTranslation(c[0]+e,c[1]+f);return !1}},onPanGestureEnd:function(){var a=this,b=a.getPan();if(a.isPanning(b)){a.panOrigin=null;a.oldTranslation=null;a.unlockEvents(b.gesture);a.panFx(b);return !1}},onZoomGestureStart:function(c){var a=this,j=a.getZoom(),d=c&&c.event&&c.event.touches||c.touches,b,g,e,f,h,i;if(j&&d&&d.length===2){c.claimGesture();a.lockEvents(j.gesture);a.oldTranslation=a.translation.slice();h=d[0];i=d[1];b=a.toViewportXY(h.pageX,h.pageY);g=a.toViewportXY(i.pageX,i.pageY);e=g[0]-b[0];f=g[1]-b[1];a.startSpread=[Math.max(a.minSpread,Math.abs(e)),Math.max(a.minSpread,Math.abs(f))];a.oldScaling=a.scaling.slice();a.oldScalingCenter=[b[0]+0.5*e,b[1]+0.5*f];return !1}},onZoomGesture:function(f){var a=this,p=a.getZoom(),k=a.startSpread,l=a.oldScaling,j=a.oldScalingCenter,m=f&&f.event&&f.event.touches||f.touches,d,g,b,c,n,o,h,i,e,q,r;if(p&&a.getLocks()[p.gesture]===a){h=m[0];i=m[1];d=a.toViewportXY(h.pageX,h.pageY);g=a.toViewportXY(i.pageX,i.pageY);b=g[0]-d[0];c=g[1]-d[1];e=[d[0]+0.5*b,d[1]+0.5*c];q=e[0]-j[0];r=e[1]-j[1];a.setTranslation(a.oldTranslation[0]+q,a.oldTranslation[1]+r);b=Math.max(a.minSpread,Math.abs(b));c=Math.max(a.minSpread,Math.abs(c));n=b/k[0];o=c/k[1];a.setScaling(n*l[0],o*l[1],e);return !1}},onZoomGestureEnd:function(){var a=this,b=a.getZoom();if(b&&a.getLocks()[b.gesture]===a){a.startSpread=null;a.oldScalingCenter=null;a.oldTranslation=null;a.unlockEvents(b.gesture);a.dx=0;a.dy=0;a.panFx(a.getPan());return !1}},onMouseWheel:function(e){var c=this,g=e.getWheelDelta(),b=c.getZoom(),a,f,d;if(b&&b.mouseWheel&&(a=b.mouseWheel.factor)){a=Math.pow(a,g);d=e.getXY();f=c.toViewportXY(d[0],d[1]);c.scale(a,a,f);e.preventDefault()}},onDoubleTap:function(f){var c=this,b=c.getZoom(),a,e,d;if(b&&b.doubleTap&&(a=b.doubleTap.factor)){d=f.getXY();e=c.toViewportXY(d[0],d[1]);c.scale(a,a,e)}},createIndicator:function(){var a=this;if(a.hScroll){return}a.hScroll=Ext.dom.Element.create({tag:'div',classList:[Ext.baseCSSPrefix+'d3-scroll',Ext.baseCSSPrefix+'d3-hscroll'],style:{},children:[{tag:'div',reference:'bar',classList:[Ext.baseCSSPrefix+'d3-scrollbar',Ext.baseCSSPrefix+'d3-hscrollbar']}]});a.hScrollBar=a.hScroll.dom.querySelector('[reference=bar]');a.hScrollBar.removeAttribute('reference');a.vScroll=Ext.dom.Element.create({tag:'div',classList:[Ext.baseCSSPrefix+'d3-scroll',Ext.baseCSSPrefix+'d3-vscroll'],style:{},children:[{tag:'div',reference:'bar',classList:[Ext.baseCSSPrefix+'d3-scrollbar',Ext.baseCSSPrefix+'d3-vscrollbar']}]});a.vScrollBar=a.vScroll.dom.querySelector('[reference=bar]');a.vScrollBar.removeAttribute('reference');a.hScrollScale=a.createInterpolator(100);a.vScrollScale=a.createInterpolator(100)},destroyIndicator:function(){var a=this;Ext.destroy(a.hScroll,a.vScroll);a.hScroll=a.vScroll=a.hScrollBar=a.vScrollBar=null},addIndicator:function(d){var a=this,c=a.getIndicator(),b=a.indicatorParent;if(c&&!b){a.createIndicator();b=a.indicatorParent=d[c.parent];if(b){b.appendChild(a.hScroll);b.appendChild(a.vScroll)}}},removeIndicator:function(){var a=this,b=a.indicatorParent;if(b){if(a.hScroll){b.removeChild(a.hScroll)}if(a.vScroll){b.removeChild(a.vScroll)}a.indicatorParent=null}},addComponent:function(a){this.callParent([a]);this.addIndicator(a)},removeComponent:function(a){this.removeIndicator();this.callParent([a])}});Ext.define('Ext.d3.svg.Export',{singleton:!0,toSvg:function(a){return '<?xml version="1.0" standalone="yes"?>'+this.serializeNode(a)},download:function(b,c){var d=new Blob([c]),a=document.createElement('a');a.setAttribute('download',b);a.setAttribute('href',URL.createObjectURL(d));a.click()},quotesRe:/"/g,serializeNode:function(a){var c='',b,d,f,i,e,h,g;if(a.nodeType===document.TEXT_NODE){return this.escapeText(a.nodeValue)}c+='<'+a.nodeName;if(a.attributes.length){for(b=0,d=a.attributes.length;b<d;b++){f=a.attributes[b];if(f.name!=='style'){c+=' '+f.name+'="'+f.value+'"'}}}e=getComputedStyle(a);c+=' style="';for(b=0,d=e.length;b<d;b++){h=e[b];g=e[h];if(typeof g==='string'){c+=h+':'+g.replace(this.quotesRe,'\'')+';'}}c+='"';c+='>';if(a.childNodes&&a.childNodes.length){for(b=0,d=a.childNodes.length;b<d;b++){i=a.childNodes[b];c+=this.serializeNode(i)}}c+='</'+a.nodeName+'>';return c},escapeTextRe:[[/&/g,'&amp;'],[/"/g,'&quot;'],[/'/g,'&apos;'],[/</g,'&lt;'],[/>/g,'&gt;']],escapeText:function(c){var d=this.escapeTextRe,e=d.length,a,b;for(a=0;a<e;a++){b=d[a];c=c.replace(b[0],b[1])}return c}});